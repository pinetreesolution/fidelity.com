!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=14)}([function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={version:"2.0.71",autoDetectLocation:!0,slug:void 0,locationVar:"dearViewerLocation",locationFile:void 0,MOUSE_CLICK_ACTIONS:{NONE:"none",NAV:"nav"},ARROW_KEYS_ACTIONS:{NONE:"none",NAV:"nav"},MOUSE_DBL_CLICK_ACTIONS:{NONE:"none",ZOOM:"zoom"},MOUSE_SCROLL_ACTIONS:{NONE:"none",ZOOM:"zoom",NAV:"nav"},PAGE_SCALE:{PAGE_FIT:"fit",PAGE_WIDTH:"width",AUTO:"auto",ACTUAL:"actual",MANUAL:"manual"},READ_DIRECTION:{LTR:"ltr",RTL:"rtl"},TURN_DIRECTION:{LEFT:"left",RIGHT:"right",NONE:"none"},INFO_TYPE:{INFO:"info",ERROR:"error"},FLIPBOOK_PAGE_MODE:{SINGLE:"single",DOUBLE:"double",AUTO:"auto"},FLIPBOOK_SINGLE_PAGE_MODE:{ZOOM:"zoom",BOOKLET:"booklet",AUTO:"auto"},FLIPBOOK_PAGE_SIZE:{AUTO:"auto",SINGLE:"single",DOUBLE_INTERNAL:"dbl_int",DOUBLE:"dbl",DOUBLE_COVER_BACK:"dbl_cover_back"},LINK_TARGET:{NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},CONTROLS_POSITION:{HIDDEN:"hidden",TOP:"top",BOTTOM:"bottom"},TURN_CORNER:{TL:"tl",TR:"tr",BL:"bl",BR:"br",L:"l",R:"r",NONE:"none"},REQUEST_STATUS:{OFF:"none",ON:"pending",COUNT:"counting"},TEXTURE_TARGET:{THUMB:0,VIEWER:1,ZOOM:2},FLIPBOOK_CENTER_SHIFT:{RIGHT:1,LEFT:-1,NONE:0}};n._defaults={is3D:!0,has3DShadow:!0,color3DCover:"#777",color3DSheets:"#fff",has3DCover:!0,flexibility:.9,enableSound:!0,search:!1,height:"auto",autoOpenOutline:!1,autoOpenThumbnail:!1,showDownloadControl:!0,duration:800,pageRotation:0,flipbookRotation:0,flipbook3DTiltAngle:0,readDirection:n.READ_DIRECTION.LTR,pageMode:n.FLIPBOOK_PAGE_MODE.AUTO,singlePageMode:n.FLIPBOOK_SINGLE_PAGE_MODE.AUTO,flipbookFitPages:!1,backgroundColor:"transparent",flipbookHardPages:"none",openPage:1,annotationClass:"",maxTextureSize:3200,minTextureSize:256,rangeChunkSize:524288,disableAutoFetch:!0,disableStream:!0,disableFontFace:!1,icons:{altnext:"df-icon-arrow-right1",altprev:"df-icon-arrow-left1",next:"df-icon-arrow-right1",prev:"df-icon-arrow-left1",end:"df-icon-last-page",start:"df-icon-first-page",share:"df-icon-share","outline-open":"df-icon-arrow-right","outline-close":"df-icon-arrow-down",help:"df-icon-help",more:"df-icon-more",download:"df-icon-download",zoomin:"df-icon-add-circle",zoomout:"df-icon-minus-circle",resetzoom:"df-icon-minus-circle",fullscreen:"df-icon-fullscreen","fullscreen-off":"df-icon-fit-screen",fitscreen:"df-icon-fit-screen",thumbnail:"df-icon-grid-view",outline:"df-icon-list",close:"df-icon-close",doublepage:"df-icon-double-page",singlepage:"df-icon-file",print:"df-icon-print",play:"df-icon-play",pause:"df-icon-pause",search:"df-icon-search",sound:"df-icon-volume","sound-off":"df-icon-volume",facebook:"df-icon-facebook",google:"df-icon-google",twitter:"df-icon-twitter",mail:"df-icon-mail"},text:{toggleSound:"Turn on/off Sound",toggleThumbnails:"Toggle Thumbnails",toggleOutline:"Toggle Outline/Bookmark",previousPage:"Previous Page",nextPage:"Next Page",toggleFullscreen:"Toggle Fullscreen",zoomIn:"Zoom In",zoomOut:"Zoom Out",resetZoom:"Reset Zoom",pageFit:"Fit Page",widthFit:"Fit Width",toggleHelp:"Toggle Help",search:"Search in PDF",singlePageMode:"Single Page Mode",doublePageMode:"Double Page Mode",downloadPDFFile:"Download PDF File",gotoFirstPage:"Goto First Page",gotoLastPage:"Goto Last Page",print:"Print",play:"Start AutoPlay",pause:"Pause AutoPlay",share:"Share",close:"Close",mailSubject:"I wanted you to see this FlipBook",mailBody:"Check out this site {{url}}",loading:"Loading",analyticsEventCategory:"DearPDF",analyticsViewerReady:"Document Ready",analyticsViewerOpen:"Document Opened",analyticsViewerClose:"Document Closed",analyticsFirstPageChange:"First Page Changed"},share:{facebook:"https://www.facebook.com/sharer/sharer.php?u={{url}}",twitter:"https://twitter.com/share?url={{url}}",mail:void 0},allControls:"altPrev,pageNumber,altNext,play,outline,thumbnail,zoomIn,zoomOut,zoom,fullScreen,share,download,search,pageMode,startPage,endPage,sound,search,more",moreControls:"download,pageMode,pageFit,startPage,endPage,sound",hideControls:"",controlsPosition:n.CONTROLS_POSITION.BOTTOM,paddingTop:20,paddingLeft:15,paddingRight:15,paddingBottom:20,enableAnalytics:!1,zoomRatio:2,pageScale:n.PAGE_SCALE.PAGE_FIT,controlsFloating:!0,sideMenuOverlay:!0,enableAnnotation:!0,enableAutoLinks:!1,arrowKeysAction:n.ARROW_KEYS_ACTIONS.NAV,clickAction:n.MOUSE_CLICK_ACTIONS.NAV,dblClickAction:n.MOUSE_DBL_CLICK_ACTIONS.NONE,mouseScrollAction:n.MOUSE_SCROLL_ACTIONS.NONE,linkTarget:n.LINK_TARGET.BLANK,soundFile:"sound/turn2.mp3",imagesLocation:"images",imageResourcesPath:"images/pdfjs/",imagePlaceholder:void 0,cMapUrl:"js/libs/cmaps/",logo:"",logoUrl:"",sharePrefix:"pdf-",pageSize:n.FLIPBOOK_PAGE_SIZE.AUTO,backgroundImage:"",pixelRatio:window.devicePixelRatio||1,spotLightIntensity:.22,ambientLightColor:"#fff",ambientLightIntensity:.8,shadowOpacity:.1,slug:void 0,headerElementSelector:void 0,onReady:function(e){},onPageChanged:function(e){},beforePageChanged:function(e){},onCreate:function(e){},onCreateUI:function(e){},onFlip:function(e){},beforeFlip:function(e){},autoPDFLinktoViewer:!1,autoLightBoxFullscreen:!1,thumbLayout:"book-title-hover",cleanupAfterRender:!0,canvasWillReadFrequently:!0,providerType:"pdf",loadMoreCount:-1,autoPlay:!1,autoPlayDuration:1e3,autoPlayStart:!1},n.defaults={},jQuery.extend(!0,n.defaults,n._defaults),n.viewers={},n.providers={},n.openFileOptions={}},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(0);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=r(e);if(t){var o=r(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===s(a)?a:String(a)),n)}var o,a}function h(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}n.a;var c=n.a.utils,p=function(){function e(){l(this,e),this.textureLoadFallback="blank",this.textureStamp="-1",this.textureLoaded=!1,this.texture="blank",this.textureSrc="blank",this.pageNumber=void 0,this.contentLayer=jQuery("<div>",{class:"df-page-content"})}return h(e,[{key:"reset",value:function(){this.resetTexture(),this.resetContent()}},{key:"resetTexture",value:function(){this.textureLoaded=!1,this.textureStamp="-1",this.loadTexture({texture:this.textureLoadFallback}),this.contentLayer.removeClass("df-content-loaded")}},{key:"clearTexture",value:function(){this.loadTexture({texture:this.textureLoadFallback})}},{key:"resetContent",value:function(){}},{key:"loadTexture",value:function(e){}},{key:"getTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.textureSrc;return!0===e&&t&&t.cloneNode&&(t=t.cloneNode()).getContext&&t.getContext("2d").drawImage(this.textureSrc,0,0),t}},{key:"setLoading",value:function(){}},{key:"updateTextureLoadStatus",value:function(e){this.textureLoaded=!0===e,c.log((!0===this.textureLoaded?"Loaded ":"Loading ")+this.textureStamp+" for "+this.pageNumber),this.contentLayer.toggleClass("df-content-loaded",!0===e),this.setLoading()}},{key:"changeTexture",value:function(e,t){var i=this,n=e+"|"+t;return i.textureStamp!==n&&(c.log("Page "+e+" : texture changed from - "+i.textureStamp+" to "+n),i.textureLoaded=!1,i.textureStamp=n,i.updateTextureLoadStatus(!1),!0)}}]),e}(),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(i,e);var t=a(i);function i(e){var n;return l(this,i),(n=t.call(this)).canvasMode=null,e&&e.parentElement&&(n.parentElement=e.parentElement),n.init(),n}return h(i,[{key:"init",value:function(){var e=this.element=jQuery("<div>",{class:"df-page"});e[0].appendChild(this.contentLayer[0]),this.texture=new Image,this.parentElement&&this.parentElement[0].append(e[0])}},{key:"resetContent",value:function(){void 0!==this.annotationElement&&this.annotationElement.html(""),void 0!==this.textElement&&this.textElement.html("")}},{key:"setLoading",value:function(){this.element.toggleClass("df-loading",!0!==this.textureLoaded)}},{key:"loadTexture",value:function(e){var t=this,i=e.texture,n=e.callback;function o(){t.textureSrc=i,t.element.css({backgroundImage:c.bgImage(i)}),t.updateTextureLoadStatus(!0),"function"==typeof n&&n(e)}null===t.canvasMode&&i&&"CANVAS"===i.nodeName&&(t.canvasMode=!0),!0===t.canvasMode?(t.element.find(">canvas").remove(),i!==t.textureLoadFallback&&(t.textureSrc=i,t.element.append(jQuery(i))),t.updateTextureLoadStatus(!0),"function"==typeof n&&n(e)):i===t.textureLoadFallback?o():(t.texture.onload=o,t.texture.src=i)}},{key:"updateCSS",value:function(e){this.element.css(e)}},{key:"resetCSS",value:function(){this.element.css({transform:"",boxShadow:"",display:"block"})}}]),i}(p)},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(0);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,r=void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===o(r)?r:String(r)),n)}var a,r}var r=n.a,s=n.a.utils,l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pages=[],this.app=i,this.parentElement=this.app.viewerContainer;var n="df-viewer "+(t.viewerClass||"");this.element=jQuery("<div>",{class:n}),this.parentElement.append(this.element),this.wrapper=jQuery("<div>",{class:"df-viewer-wrapper"}),this.element.append(this.wrapper),this.oldBasePageNumber=0,this.pages=[],this.minZoom=1,this.maxZoom=4,this.swipeThreshold=20,this.stageDOM=null,this.events={},this.arrowKeysAction=t.arrowKeysAction,this.clickAction=t.clickAction,this.scrollAction=t.scrollAction,this.dblClickAction=t.dblClickAction,this.pageBuffer=[],this.pageBufferSize=10}var t,i,o;return t=e,i=[{key:"init",value:function(){}},{key:"updateBuffer",value:function(e){}},{key:"pageResetCallback",value:function(e){}},{key:"initCustomControls",value:function(){}},{key:"_getInnerWidth",value:function(){return this.app.dimensions.containerWidth-this.app.dimensions.padding.width-this.app.dimensions.offset.width}},{key:"_getInnerHeight",value:function(){return this.app.dimensions.maxHeight-this.app.dimensions.padding.height}},{key:"_getOuterHeight",value:function(e){return e}},{key:"dispose",value:function(){this.stageDOM&&(this.stageDOM.removeEventListener("mousemove",this.events.mousemove,!1),this.stageDOM.removeEventListener("mousedown",this.events.mousedown,!1),this.stageDOM.removeEventListener("mouseup",this.events.mouseup,!1),this.stageDOM.removeEventListener("touchmove",this.events.mousemove,!1),this.stageDOM.removeEventListener("touchstart",this.events.mousedown,!1),this.stageDOM.removeEventListener("touchend",this.events.mouseup,!1),this.stageDOM.removeEventListener("dblclick",this.events.dblclick,!1),this.stageDOM.removeEventListener("scroll",this.events.scroll,!1),this.stageDOM.removeEventListener("mousewheel",this.events.mousewheel,!1),this.stageDOM.removeEventListener("DOMMouseScroll",this.events.mousewheel,!1)),this.events=null,this.stageDOM=null,this.element.remove()}},{key:"checkDocumentPageSizes",value:function(){}},{key:"getViewerPageNumber",value:function(e){return e}},{key:"getDocumentPageNumber",value:function(e){return e}},{key:"getRenderContext",value:function(e,t){var i=this.app,o=i.provider,a=t.pageNumber,r=s.ifdef(t.textureTarget,n.a.TEXTURE_TARGET.VIEWER),l=(i.dimensions.pageFit,o.viewPorts[a]),u=i.viewer.getTextureSize(t),h=u.height/u.width;u.height=s.limitAt(u.height,1,i.dimensions.maxTextureHeight),u.width=u.height/h;var c=null;if(c=r===n.a.TEXTURE_TARGET.THUMB?i.thumbSize:Math.floor(u.height),void 0===o.getCache(a,c)){var p=u.height/l.height,d=document.createElement("canvas"),f=this.filterViewPort(e.getViewport({scale:p,rotation:e._pageInfo.rotate+i.options.pageRotation}),a);r===n.a.TEXTURE_TARGET.THUMB&&(p=f.width/f.height>180/i.thumbSize?180*p/f.width:p*i.thumbSize/f.height,f=this.filterViewPort(e.getViewport({scale:p,rotation:e._pageInfo.rotate+i.options.pageRotation}),a)),d.height=Math.floor(f.height),d.width=Math.floor(f.width);var g=Math.abs(d.width-u.width)/u.width*100;return g>.001&&g<2&&(d.width=Math.floor(u.width),d.height=Math.floor(u.height)),i.viewer.filterViewPortCanvas(f,d,a),{canvas:d,canvasContext:d.getContext("2d",{willReadFrequently:!0===n.a.defaults.canvasWillReadFrequently}),viewport:f}}}},{key:"filterViewPort",value:function(e,t){return e}},{key:"getViewPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.app.provider.viewPorts[e];return t?null!=i?i:this.app.provider.coverPage.viewPort:i}},{key:"pagesReady",value:function(){}},{key:"onReady",value:function(){}},{key:"filterViewPortCanvas",value:function(e){}},{key:"finalizeAnnotations",value:function(){}},{key:"finalizeTextContent",value:function(){}},{key:"initEvents",value:function(){var e=this,t=e.stageDOM=s.ifdef(e.stageDOM,e.parentElement[0]);t&&(t.addEventListener("mousemove",e.events.mousemove=e.mouseMove.bind(e),!1),t.addEventListener("mousedown",e.events.mousedown=e.mouseDown.bind(e),!1),t.addEventListener("mouseup",e.events.mouseup=e.mouseUp.bind(e),!1),t.addEventListener("touchmove",e.events.mousemove=e.mouseMove.bind(e),!1),t.addEventListener("touchstart",e.events.mousedown=e.mouseDown.bind(e),!1),t.addEventListener("touchend",e.events.mouseup=e.mouseUp.bind(e),!1),t.addEventListener("dblclick",e.events.dblclick=e.dblclick.bind(e),!1),t.addEventListener("scroll",e.events.scroll=e.onScroll.bind(e),!1),t.addEventListener("mousewheel",e.events.mousewheel=e.mouseWheel.bind(e),!1),t.addEventListener("DOMMouseScroll",e.events.mousewheel=e.mouseWheel.bind(e),!1)),this.startTouches=null,this.lastScale=null,this.startPoint=null}},{key:"refresh",value:function(){}},{key:"reset",value:function(){}},{key:"eventToPoint",value:function(e){var t={x:e.clientX,y:e.clientY};return t.x=t.x-this.app.viewerContainer[0].getBoundingClientRect().left,t.y=t.y-this.app.viewerContainer[0].getBoundingClientRect().top,{raw:t}}},{key:"mouseMove",value:function(e){e=s.fixMouseEvent(e),this.pinchMove(e),!0===this.pinchZoomDirty&&e.preventDefault(),this.startPoint&&1!=this.pinchZoomDirty&&(this.pan(this.eventToPoint(e)),e.preventDefault())}},{key:"mouseDown",value:function(e){e=s.fixMouseEvent(e),this.pinchDown(e),this.startPoint=this.eventToPoint(e)}},{key:"mouseUp",value:function(e){e=s.fixMouseEvent(e);var t=this;!0===t.pinchZoomDirty&&e.preventDefault();var i=t.eventToPoint(e),n=e.target||e.originalTarget,o=t.startPoint&&i.x===t.startPoint.x&&i.y===t.startPoint.y&&"A"!==n.nodeName;!0===e.ctrlKey&&o&&this.zoomOnPoint(i),this.pinchUp(e),this.startPoint=null}},{key:"pinchDown",value:function(e){}},{key:"pinchUp",value:function(e){}},{key:"pinchMove",value:function(e){}},{key:"updateTemporaryScale",value:function(){if(!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))this.parentElement[0].style.transform="none";else if(this.app.viewer.zoomCenter){var e=this.app.viewer.pinchZoomUpdateScale;this.parentElement[0].style.transformOrigin=this.app.viewer.zoomCenter.x+"px "+this.app.viewer.zoomCenter.y+"px",this.parentElement[0].style.transform="scale3d("+e+","+e+",1)"}}},{key:"pan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.panRequestStatus=n.a.REQUEST_STATUS.ON,s.pan(this,e,t)}},{key:"updatePan",value:function(){this.element.css({transform:"translate3d("+this.left+"px,"+this.top+"px,0)"})}},{key:"dblclick",value:function(e){}},{key:"onScroll",value:function(e){}},{key:"mouseWheel",value:function(e){var t=this.app,i=s.getMouseDelta(e),o=!0===e.ctrlKey;t.options.mouseScrollAction===n.a.MOUSE_SCROLL_ACTIONS.NAV&&!1===o?i>0?t.next():i<0&&t.prev():t.options.mouseScrollAction!==n.a.MOUSE_SCROLL_ACTIONS.ZOOM&&!0!==o||(i>0||i<0)&&(e.preventDefault(),t.viewer.zoomCenter=this.eventToPoint(e).raw,t.zoom(i),t.ui.update())}},{key:"zoomOnPoint",value:function(e){this.app.viewer.zoomCenter=e.raw,this.app.zoom(1)}},{key:"getVisiblePages",value:function(){return{main:[],buffer:[]}}},{key:"getBasePage",value:function(){return this.app.currentPageNumber}},{key:"isFirstPage",value:function(e){return void 0===e&&(e=this.app.currentPageNumber),1===e}},{key:"isLastPage",value:function(e){return void 0===e&&(e=this.app.currentPageNumber),e===this.app.pageCount}},{key:"isEdgePage",value:function(e){return void 0===e&&(e=this.app.currentPageNumber),1===e||e===this.app.pageCount}},{key:"checkRequestQueue",value:function(){var e=n.a.REQUEST_STATUS;this.panRequestStatus===e.ON&&(this.updatePan(),this.panRequestStatus=e.OFF),this.app.viewer.pinchZoomRequestStatus===e.ON&&(this.app.viewer.updateTemporaryScale(),this.app.viewer.pinchZoomRequestStatus=e.OFF)}},{key:"isAnimating",value:function(){return!1}},{key:"updatePendingStatusClass",value:function(e){void 0===e&&(e=this.isAnimating()),this.app.container.toggleClass("df-pending",e)}},{key:"initPages",value:function(){}},{key:"resize",value:function(){}},{key:"zoom",value:function(){}},{key:"gotoPageCallBack",value:function(){this.requestRefresh()}},{key:"requestRefresh",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.app.refreshRequestStatus=!0===e?r.REQUEST_STATUS.ON:r.REQUEST_STATUS.OFF}},{key:"getPageByNumber",value:function(e){for(var t=this.pages,i=void 0,n=0;n<t.length;n++)if(e===t[n].pageNumber){i=t[n];break}return i}},{key:"changeAnnotation",value:function(){return!1}},{key:"getAnnotationElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getPageByNumber(e);if(void 0!==i)return void 0===i.annotationElement&&(i.annotationElement=jQuery("<div class='df-link-content'>"),i.contentLayer.append(i.annotationElement)),!0===t&&i.annotationElement.html(""),i.annotationElement[0]}},{key:"getTextElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getPageByNumber(e);if(void 0!==i)return void 0===i.textElement&&(i.textElement=jQuery("<div class='df-text-content'>"),i.contentLayer.append(i.textElement)),!0===t&&i.textElement.html(""),i.textElement[0]}},{key:"render",value:function(){}},{key:"textureLoadedCallback",value:function(e){}},{key:"handleZoom",value:function(){}},{key:"getTextureSize",value:function(e){console.error("Texture calculation missing!")}},{key:"setPage",value:function(e){s.log("Set Page detected",e.pageNumber);var t=this.getPageByNumber(e.pageNumber);return!!t&&(e.callback=this.textureLoadedCallback.bind(this),t.loadTexture(e),this.updateBuffer(t),!0)}},{key:"cleanPage",value:function(e){return!0}},{key:"validatePageChange",value:function(e){return e!==this.app.currentPageNumber}},{key:"afterControlUpdate",value:function(){}}],i&&a(t.prototype,i),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(0);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,r,s=n.a,l="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,u="onmousedown"in window,h=s.utils={mouseEvents:u?{type:"mouse",start:"mousedown",move:"mousemove",end:"mouseup"}:{type:"touch",start:"touchstart",move:"touchmove",end:"touchend"},html:{div:"<div></div>",a:"<a>",input:"<input type='text'/>",select:"<select></select>"},getSharePrefix:function(){return h.getSharePrefixes()[0]},getSharePrefixes:function(){return(s.defaults.sharePrefix+",dflip-,flipbook-,dearflip-,dearpdf-").split(",").filter((function(e){return e}))},toRad:function(e){return e*Math.PI/180},toDeg:function(e){return 180*e/Math.PI},ifdef:function(e){return null==e?arguments.length>1&&void 0!==arguments[1]?arguments[1]:null:e},createBtn:function(e,t,i){var n=jQuery(h.html.div,{class:"df-ui-btn df-ui-"+e,title:i,html:void 0!==i?"<span>"+i+"</span>":""});return void 0!==t&&t.indexOf("<svg")>-1?n.html(t.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg" ')):n.addClass(t),n},transition:function(e,t){return e?t/1e3+"s ease-out":"0s none"},display:function(e){return e?"block":"none"},resetTranslate:function(){return h.translateStr(0,0)},bgImage:function(e){return null==e||"blank"===e?"":' url("'+e+'")'},translateStr:function(e,t){return l?" translate3d("+e+"px,"+t+"px, 0px) ":" translate("+e+"px, "+t+"px) "},httpsCorrection:function(e){if(null==e)return null;var t=window.location;return t.href.indexOf("https://")>-1&&e.indexOf(t.hostname)>-1&&(e=e.replace("http://","https://")),t.href.indexOf("http://")>-1&&e.indexOf(t.hostname)>-1&&(e=e.replace("https://","http://")),e},rotateStr:function(e){return" rotateZ("+e+"deg) "},lowerPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},nearestPowerOfTwo:function(e,t){return Math.min(t||2048,Math.pow(2,Math.ceil(Math.log(e)/Math.LN2)))},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},hasFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},fixMouseEvent:function(e){if(e){var t=e.originalEvent||e;if(t.changedTouches&&t.changedTouches.length>0){var i=jQuery.event.fix(e),n=t.changedTouches[0];return i.clientX=n.clientX,i.clientY=n.clientY,i.pageX=n.pageX,i.touches=t.touches,i.pageY=n.pageY,i.movementX=n.movementX,i.movementY=n.movementY,i}return e}return e},limitAt:function(e,t,i){return e<t?t:e>i?i:e},distOrigin:function(e,t){return h.distPoints(0,0,e,t)},distPoints:function(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))},angleByDistance:function(e,t){var i=t/2,n=h.limitAt(e,0,t);return n<i?h.toDeg(Math.asin(n/i)):90+h.toDeg(Math.asin((n-i)/i))},calculateScale:function(e,t){var i=h.distPoints(e[0].x,e[0].y,e[1].x,e[1].y);return h.distPoints(t[0].x,t[0].y,t[1].x,t[1].y)/i},getVectorAvg:function(e){return{x:e.map((function(e){return e.x})).reduce(h.sum)/e.length,y:e.map((function(e){return e.y})).reduce(h.sum)/e.length}},sum:function(e,t){return e+t},getTouches:function(e,t){return t=t||{left:0,top:0},Array.prototype.slice.call(e.touches).map((function(e){return{x:e.pageX-t.left,y:e.pageY-t.top}}))},getScriptCallbacks:[],getScript:function(e,t,i){var n,o=h.getScriptCallbacks[e];function a(){n.removeEventListener("load",r,!1),n.removeEventListener("readystatechange",r,!1),n.removeEventListener("complete",r,!1),n.removeEventListener("error",s,!1),n.onload=n.onreadystatechange=null,n=null,n=null}function r(e,t){if(null!=n&&(t||!n.readyState||/loaded|complete/.test(n.readyState))){if(!t){for(var r=0;r<o.length;r++)o[r]&&o[r](),o[r]=null;i=null}a()}}function s(){i(),a(),i=null}if(0===jQuery("script[src='"+e+"']").length){(o=h.getScriptCallbacks[e]=[]).push(t),n=document.createElement("script");var l=document.body.getElementsByTagName("script")[0];n.async=!0,n.setAttribute("data-cfasync","false"),null!=l?(l.parentNode.insertBefore(n,l),l=null):document.body.appendChild(n),n.addEventListener("load",r,!1),n.addEventListener("readystatechange",r,!1),n.addEventListener("complete",r,!1),i&&n.addEventListener("error",s,!1),n.src=e+("MS"===h.prefix.dom?"?"+Math.random():"")}else o.push(t)},detectScriptLocation:function(){if(void 0===window[n.a.locationVar])jQuery("script").each((function(){var e=jQuery(this)[0].src;if((e.indexOf("/"+n.a.locationFile+".js")>-1||e.indexOf("/"+n.a.locationFile+".min.js")>-1||e.indexOf("js/"+n.a.locationFile+".")>-1)&&(e.indexOf("https://")>-1||e.indexOf("http://")>-1)){var t=e.split("/");window[n.a.locationVar]=t.slice(0,-2).join("/")}}));else if(-1==window[n.a.locationVar].indexOf(":")){var e=document.createElement("a");e.href=window[n.a.locationVar],window[n.a.locationVar]=e.href,e=null}void 0!==window[n.a.locationVar]&&window[n.a.locationVar].length>2&&"/"!==window[n.a.locationVar].slice(-1)&&(window.window[n.a.locationVar]+="/")},disposeObject:function(e){return e&&e.dispose&&e.dispose(),e=null},log:function(){var e;!0===s.defaults.enableDebugLog&&window.console&&(e=console).log.apply(e,arguments)},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIOS:/(iPad|iPhone|iPod)/g.test(navigator.userAgent),isIPad:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Mac/.test(navigator.platform),isSafari:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString(),isIEUnsupported:navigator.userAgent.match(/(MSIE|Trident)/),isSafariWindows:function(){return!h.isIOS&&h.isSafari},hasWebgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),canSupport3D:function(){var e=!0;try{if(0==h.hasWebgl)e=!1,console.log("Proper Support for Canvas webgl 3D not detected!");else if(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)e=!1,console.log("Proper Support for 3D not detected for IE!");else if(h.isSafari&&!h.isIOS)e=!1,console.log("Proper Support for 3D not detected for IOS!");else{var t=navigator.userAgent.toString().toLowerCase().match(/android\s([0-9\.]*)/i);(t=t?t[1]:void 0)&&(t=parseInt(t,10),!isNaN(t)&&t<9&&(e=!1,console.log("Proper Support for 3D not detected for Android below 9.0!")))}}catch(e){}return e},prefix:(a=window.getComputedStyle(document.documentElement,""),r=Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)[1],{dom:"WebKit|Moz|MS".match(new RegExp("("+r+")","i"))[1],lowercase:r,css:"-"+r+"-",js:r[0].toUpperCase()+r.substr(1)}),scrollIntoView:function(e,t,i){(t=t||e.parentNode).scrollTop=e.offsetTop-t.offsetTop+(!1===i?e.offsetHeight-t.offsetHeight:0),t.scrollLeft=e.offsetLeft-t.offsetLeft},getVisibleElements:function(e){var t=e.container,i=e.elements,n=e.visible||[],o=t.scrollTop,a=o+t.clientHeight;if(0==a)return n;var r=0,s=i.length-1,l=i[r],u=l.offsetTop+l.clientTop+l.clientHeight;if(u<o)for(;r<s;){var h=r+s>>1;(u=(l=i[h]).offsetTop+l.clientTop+l.clientHeight)>o?s=h:r=h+1}for(var c=r;c<i.length;c++){if(!((l=i[c]).offsetTop+l.clientTop<=a))break;n.push(c+1)}return n},getMouseDelta:function(e){var t=0;return null!=e.wheelDelta?t=e.wheelDelta:null!=e.detail&&(t=-e.detail),t},pan:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.startPoint,o=e.app.zoomValue,a=e.left+(!0===i?0:t.raw.x-n.raw.x),r=e.top+(!0===i?0:t.raw.y-n.raw.y);e.left=Math.ceil(h.limitAt(a,-e.shiftWidth,e.shiftWidth)),e.top=Math.ceil(h.limitAt(r,-e.shiftHeight,e.shiftHeight)),1===o&&(e.left=0,e.top=0),!1===i&&(e.startPoint=t)}};h.isChromeExtension=function(){return 0===window.location.href.indexOf("chrome-extension://")};var c=/\x00+/g,p=/[\x01-\x1F]/g;h.removeNullCharacters=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"!=typeof e?(warn("The argument for removeNullCharacters must be a string."),e):(t&&(e=e.replace(p," ")),e.replace(c,""))},n.a.hashFocusBookFound=!1,h.detectHash=function(){n.a.preParseHash=window.location.hash,Array.prototype.forEach.call(h.getSharePrefixes(),(function(e){if(n.a.preParseHash&&n.a.preParseHash.indexOf(e)>=0&&!1===n.a.hashFocusBookFound){var t,i=n.a.preParseHash.split(e)[1].split("/")[0],o=n.a.preParseHash.split(e)[1].split("/")[1];null!=o&&(o=o.split("/")[0]),0===(t=jQuery("[data-slug="+i+"]")).length&&(t=jQuery("#"+i)),0===t.length&&(t=jQuery("[data-_slug="+i+"]")),t.length>0&&(t=jQuery(t[0]),n.a.hashFocusBookFound=!0,null!=(o=parseInt(o,10))&&t.data("page",o),(null!=t.data("lightbox")||null!=t.attr("href")&&t.attr("href").indexOf(".pdf")>-1)&&t.trigger("click"),t.data("hash_focused",!0))}}))},h.focusHash=function(e){var t,i;!0===e.data("hash_focused")&&(null===(t=(i=e[0]).scrollIntoView)||void 0===t||t.call(i,{behavior:"smooth",block:"end",inline:"nearest"}))},h.contain=function(e,t,i,n){var o=e/t;return o>=i/n?{width:i,height:i/o}:{width:n*o,height:n}},h.containScale=function(e,t,i,n){var o=h.contain(e,t,i,n);return o.width/o.height},h.fallbackOptions=function(e){return void 0===e.share.mail&&(e.share.mail="mailto:?subject="+e.text.mailSubject+"&body="+e.text.mailBody),e.openPage&&(e.openPage=parseInt(e.openPage,10)),e};h.getOptions=function(e){var t=(e=jQuery(e)).data("option"),i=void 0;i="object"===o(t)?t:null==t||""===t||null==window[t]?{}:window[t];var n=function(e){var t={},i=e.data("source");return t.source=null==i||""===i?void 0:i,t.id=e.attr("id"),t.openPage=e.data("page"),t.pageMode=e.attr("pagemode"),t}(e);return i=jQuery.extend(!0,{},i,n)},h.isTrue=function(e){return"true"===e||!0===e},h.parseInt=function(e){return parseInt(e,10)},h.parseFloat=function(e){return parseFloat(e)},h.parseIntIfExists=function(e){return void 0!==e&&(e=parseInt(e,10)),e},h.parseFloatIfExists=function(e){return void 0!==e&&(e=parseFloat(e)),e},h.parseBoolIfExists=function(e){return void 0!==e&&(e=h.isTrue(e)),e},h.sanitizeOptions=function(e){return e.paddingLeft=h.parseIntIfExists(e.paddingLeft),e.paddingRight=h.parseIntIfExists(e.paddingRight),e.paddingTop=h.parseIntIfExists(e.paddingTop),e.paddingBottom=h.parseIntIfExists(e.paddingBottom),e.duration=h.parseIntIfExists(e.duration),e.rangeChunkSize=h.parseIntIfExists(e.rangeChunkSize),e.maxTextureSize=h.parseIntIfExists(e.maxTextureSize),e.linkTarget=h.parseIntIfExists(e.linkTarget),e.zoomRatio=h.parseFloatIfExists(e.zoomRatio),e.enableAnalytics=h.parseBoolIfExists(e.enableAnalytics),e.autoPlay=h.parseBoolIfExists(e.autoPlay),e.autoPlayStart=h.parseBoolIfExists(e.autoPlayStart),e.autoPlayDuration=h.parseIntIfExists(e.autoPlayDuration),void 0!==e.loadMoreCount&&(e.loadMoreCount=h.parseInt(e.loadMoreCount),isNaN(e.loadMoreCount)&&(e.loadMoreCount=-1)),e},h.finalizeOptions=function(e){return e},h.urlify=function(e){return e.replace(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[.\!\/\\w]*))?)/g,(function(e,t,i,n,o){var a=e=e.toLowerCase();if(e.indexOf(":")>0&&-1===e.indexOf("http:")&&-1===e.indexOf("https:"))return h.log("AutoLink Rejected: "+a+" for "+e),e;if(0===e.indexOf("www."))a="http://"+e;else if(0===e.indexOf("http://")||0===e.indexOf("https://"));else if(0===e.indexOf("mailto:"));else if(e.indexOf("@")>0){a="mailto:"+e;if(null===e.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/))return h.log("AutoLink Rejected: "+a+" for "+e),e}return h.log("AutoLink: "+a+" for "+e),'<a href="'+a+'" class="df-autolink" target="_blank">'+e+"</a>"}))},n.a.parseCSSElements=function(){jQuery(".dvcss").each((function(){var e,t=jQuery(this),i=function(e){for(var t,i=e.classList,n=0;n<i.length;n++)if(0===(t=i[n]).indexOf("dvcss_e_"))return t;return null}(t[0]);t.removeClass(i).removeClass("dvcss"),i=i.replace("dvcss_e_","");try{e=JSON.parse(atob(i))}catch(e){}if(e){var n="df_option_"+e.id;window[n]=jQuery.extend(!0,{},window[n],e),t.addClass("df-element"),"none"!==e.lightbox&&(t.attr("data-lightbox",void 0===e.lightbox?"custom":e.lightbox),"thumb"==e.lightbox&&t.attr("data-thumb",e.pdfThumb),e.thumbLayout&&t.attr("data-thumb-layout",e.thumbLayout),e.apl&&t.attr("apl",e.apl)),t.data("option",n),t.attr("data-slug",e.slug),t.attr("id","df_"+e.id)}}))},n.a.parseNormalElements=function(){jQuery(".df-posts").each((function(){if(!1!==n.a.defaults.loadMoreCount&&-1!==n.a.defaults.loadMoreCount){var e=jQuery(this);if("true"!==e.data("parsed")){e.data("parsed","true"),e.attr("df-parsed","true");var t=0,i=e.find(".df-element"),o=i.length;i.each((function(){++t>n.a.defaults.loadMoreCount&&jQuery(this).attr("skip-parse","true")})),o>n.a.defaults.loadMoreCount&&e.append("<div class='df-load-more-button-wrapper'><div class='df-load-more-button'>Load More..</div></div>")}}}));var e="data:image/svg+xml,"+escape('<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 210 297"><rect width="210" height="297" style="fill:#f1f2f2"/><circle cx="143" cy="95" r="12" style="fill:#e3e8ed"/><polygon points="131 138 120 149 95 124 34 184 176 185 131 138" style="fill:#e3e8ed"/></svg>');jQuery(".df-element").each((function(){var t=jQuery(this);if("true"!==t.attr("skip-parse")&&"true"!==t.data("parsed")){t.data("parsed","true"),t.attr("df-parsed","true");var i=t.data("lightbox");if(void 0===i)t.dearviewer();else if(t.addClass("df-popup-"+i),"thumb"===i){var o=t.data("thumb-layout")||n.a.defaults.thumbLayout,a=h.httpsCorrection(t.data("thumb"));t.removeAttr("data-thumb").removeAttr("data-thumb-layout");var r=t.html().trim();if(void 0!==r&&""!==r||(r="Click to Open"),!0===n.a.defaults.displayLightboxPlayIcon&&t.addClass("df-icon-play"),"custom"!==o){t.html("");var s=jQuery("<span class='df-book-title'>").html(r),l=jQuery("<div class='df-book-wrapper'>").appendTo(t),u=jQuery("<div class='df-book-cover'>").append(s).appendTo(l);null!=a&&""!=a.toString().trim()||(t.addClass("df-thumb-not-found"),a=n.a.defaults.imagePlaceholder||e);var c=jQuery('<img alt="'+r+'"/>');c.attr("src",a),u.append(c)}"book-title-hover"!=o&&t.addClass("df-tl-"+o)}}}))},n.a.parseElements=h.parseElements=function(){n.a.parseCSSElements(),n.a.parseNormalElements()},n.a.initUtils=function(){h.detectScriptLocation();var e=jQuery("body");(h.isSafari||h.isIOS)&&e.addClass("df-ios"),e.on("click",(function(){})),e.on("click",".df-posts .df-load-more-button",(function(){var e=jQuery(this).closest(".df-posts");if(e.length>0){var t=0;e.find(".df-element").each((function(){var e=jQuery(this);"true"===e.attr("skip-parse")&&(t<n.a.defaults.loadMoreCount&&e.removeAttr("skip-parse"),t++)})),n.a.parseNormalElements()}}))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return y}));var n=i(0),o=i(2),a=i(1);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),n)}var o,a}function u(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},h.apply(this,arguments)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var o=f(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var g=n.a.utils,v=function(e){c(i,e);var t=d(i);function i(e,o){var a;return s(this,i),e.viewerClass="df-flipbook "+(e.viewerClass||""),(a=t.call(this,e,o)).isFlipBook=!0,a.sheets=[],a.isRTL=a.app.isRTL,a.foldSense=50,a.isOneSided=!1,a.stackCount=6,a.annotedPage=null,a.pendingAnnotations=[],a.seamPosition=0,a.dragSheet=null,a.drag=null,a.soundOn=!0===e.enableSound,a.soundFile=null,a.minZoom=1,a.maxZoom=4,a.app.options.pageSize!==n.a.FLIPBOOK_PAGE_SIZE.AUTO&&a.app.options.pageSize!==n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL||(a.app.checkSecondPage=!0),a.app.pageScaling=n.a.PAGE_SCALE.PAGE_FIT,e.viewerClass="",a.zoomViewer=new m(e,o),a}return u(i,[{key:"init",value:function(){h(f(i.prototype),"init",this).call(this),this.initSound();var e=this.app;this.pageMode=e.options.pageMode===n.a.FLIPBOOK_PAGE_MODE.AUTO?g.isMobile||e.pageCount<=2?n.a.FLIPBOOK_PAGE_MODE.SINGLE:n.a.FLIPBOOK_PAGE_MODE.DOUBLE:e.options.pageMode,this.singlePageMode=e.options.singlePageMode||(g.isMobile?n.a.FLIPBOOK_SINGLE_PAGE_MODE.BOOKLET:n.a.FLIPBOOK_SINGLE_PAGE_MODE.ZOOM),this.updatePageMode()}},{key:"determineHeight",value:function(){}},{key:"initCustomControls",value:function(){h(f(i.prototype),"initCustomControls",this).call(this);var e=this,t=this.app,n=t.ui,o=n.controls,a=t.options.text,r=t.options.icons;o.sound=g.createBtn("sound",r.sound,a.toggleSound).on("click",(function(){e.soundOn=!e.soundOn,n.updateSound()})),n.updateSound=function(){!1===e.soundOn?o.sound.addClass("disabled"):o.sound.removeClass("disabled")},n.updateSound()}},{key:"dispose",value:function(){h(f(i.prototype),"dispose",this).call(this);for(var e=0;e<this.sheets.length;e++){var t=this.sheets[e];t&&t.currentTween&&(t.currentTween.stop(),t.currentTween=null)}this.zoomViewer.dispose(),this.soundFile=null}},{key:"initSound",value:function(){this.soundFile=document.createElement("audio"),this.soundFile.setAttribute("src",this.app.options.soundFile+"?ver="+n.a.version),this.soundFile.setAttribute("type","audio/mpeg")}},{key:"playSound",value:function(){var e=this;try{!0===e.app.userHasInteracted&&!0===e.soundOn&&(e.soundFile.currentTime=0,e.soundFile.play())}catch(e){}}},{key:"checkDocumentPageSizes",value:function(){var e=this.app.provider;e.pageSize===n.a.FLIPBOOK_PAGE_SIZE.AUTO&&(e._page2Ratio&&e._page2Ratio>1.5*e.coverPage.pageRatio?e.pageSize=n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL:e.pageSize=n.a.FLIPBOOK_PAGE_SIZE.SINGLE),e.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL&&(e.pageCount=1===e.numPages?1:2*e.numPages-2),e.pageSize!==n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK&&e.pageSize!==n.a.FLIPBOOK_PAGE_SIZE.DOUBLE||(e.pageCount=2*e.numPages)}},{key:"getViewerPageNumber",value:function(e){return this.app.provider.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL&&e>2&&(e=2*e-1),this.app.provider.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK&&e>2&&(e=2*e-1),e}},{key:"getDocumentPageNumber",value:function(e){return this.app.provider.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL&&e>2?Math.ceil((e-1)/2)+1:this.app.provider.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK&&e>1?e===this.app.pageCount?1:Math.ceil((e-1)/2)+1:e}},{key:"getViewPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return this.filterViewPort(h(f(i.prototype),"getViewPort",this).call(this,e,t),e,n)}},{key:"isDoubleInternal",value:function(){return this.app.provider.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL}},{key:"isDoubleCoverBack",value:function(){return this.app.provider.pageSize===n.a.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK}},{key:"isDoubleInternalPage",value:function(e){return this.isDoubleInternal()&&e>1&&e<this.app.provider.pageCount}},{key:"getDoublePageWidthFix",value:function(e){return this.isDoubleInternalPage(e)||this.isDoubleCoverBack()?2:1}},{key:"isDoublePageFix",value:function(e){var t=!1;return(this.isDoubleCoverBack()||this.isDoubleInternalPage(e))&&(this.app.isRTL?e%2==0&&(t=!0):e%2==1&&(t=!0)),t}},{key:"finalizeAnnotations",value:function(e,t){e.classList.toggle("df-double-internal",this.isDoubleInternalPage(t)),e.classList.toggle("df-double-internal-fix",this.isDoublePageFix(t))}},{key:"finalizeTextContent",value:function(e,t){e.classList.toggle("df-double-internal",this.isDoubleInternalPage(t)),e.classList.toggle("df-double-internal-fix",this.isDoublePageFix(t))}},{key:"isSheetCover",value:function(e){var t=this.isBooklet;return 0===e||t&&1===e||e===Math.ceil(this.app.pageCount/(t?1:2))-(t?0:1)}},{key:"isSheetHard",value:function(e){var t=this.app.options.flipbookHardPages;this.isBooklet;if("cover"===t)return this.isSheetCover(e);if("all"===t)return!0;var i=(","+t+",").indexOf(","+(2*e+1)+",")>-1,n=(","+t+",").indexOf(","+(2*e+2)+",")>-1;return i||n}},{key:"sheetsIndexShift",value:function(e,t,i){e>t?(this.sheets[i-1].skipFlip=!0,this.sheets.unshift(this.sheets.pop())):e<t&&(this.sheets[0].skipFlip=!0,this.sheets.push(this.sheets.shift()))}},{key:"checkSwipe",value:function(e,t){var i=this;if(!0!==i.pinchZoomDirty&&1===i.app.zoomValue&&!0===i.canSwipe){var n=e.x-i.lastPos;Math.abs(n)>i.swipeThreshold&&(n<0?i.app.openRight():i.app.openLeft(),i.canSwipe=!1,t.preventDefault()),i.lastPos=e.x}}},{key:"checkCenter",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this,o=this.app,a=n.a.FLIPBOOK_CENTER_SHIFT,r=o.currentPageNumber%2==0,s=i.getBasePage(),l=i.isRTL,u=i.isSingle;e=0===s||i.isBooklet?i.isRTL?a.RIGHT:a.LEFT:s===o.pageCount?l?a.LEFT:a.RIGHT:u?l?r?a.LEFT:a.RIGHT:r?a.RIGHT:a.LEFT:a.NONE,!0!==i.centerNeedsUpdate&&(i.centerNeedsUpdate=i.centerShift!==e),i.centerNeedsUpdate&&(i.centerShift=e,i.updateCenter(t),i.centerNeedsUpdate=!1)}},{key:"updateCenter",value:function(){console.log("UpdateCenter: missing implementation.")}},{key:"reset",value:function(){for(var e,t=0;t<this.sheets.length;t++)(e=this.sheets[t]).reset(),e.pageNumber=-1,e.resetTexture();this.annotedPage=null,this.oldBasePageNumber=-1,this.centerShift=null,this.refresh()}},{key:"handleZoom",value:function(){var e=this.app,t=(e.dimensions,this.maxZoom=e.dimensions.maxTextureHeight/this._containCover.height),i=e.zoomValue,n=!1,o=!1;(t<this.minZoom&&(t=this.maxZoom=this.minZoom),!0===e.pendingZoom&&null!=e.zoomDelta)?i=e.zoomDelta>0?i*e.options.zoomRatio:i/e.options.zoomRatio:null!=this.lastScale&&(i*=this.lastScale,this.lastScale=null);i=g.limitAt(i,this.minZoom,t),e.zoomValueChange=i/e.zoomValue,!(e.zoomChanged=e.zoomValue!==i)||1!==i&&1!==e.zoomValue||(n=1===i,o=1===e.zoomValue),e.zoomValue=i,(o||n)&&(e.container.toggleClass("df-zoom-active",1!==i),o&&this.enterZoom(),n&&this.exitZoom())}},{key:"refresh",value:function(){var e=this,t=this.app,i=e.stackCount,o=e.isRTL,a=e.isBooklet,r=e.getBasePage(),s=a?1:2;o&&(r=t.pageCount-r);var l,u=e.oldBasePageNumber,h=Math.ceil(t.pageCount/s),c=Math.floor(i/2);r!==e.oldBasePageNumber&&(e.pageNumberChanged=!0,this.updatePendingStatusClass(!0),e.zoomViewer.reset()),e.sheetsIndexShift(u,r,i);var p=Math.ceil(r/s);for(l=0;l<i;l++){var d=void 0,f=p-c+l;if(o&&(f=h-f-1),null!=(d=e.sheets[l])){d.targetSide=l<c?n.a.TURN_DIRECTION.LEFT:n.a.TURN_DIRECTION.RIGHT;var g=d.side!==d.targetSide,v=f!==d.pageNumber,m=g&&!1===d.skipFlip&&1===t.zoomValue;if(!g&&v&&d.isFlipping&&d.currentTween&&d.currentTween.stop(),d.isHard=e.isSheetHard(f),d.isCover=e.isSheetCover(f),e.refreshSheet({sheet:d,sheetNumber:f,totalSheets:h,zIndex:this.stackCount+(l<c?l-c:c-l),visible:a?o?l<c||d.isFlipping||m:l>=c||d.isFlipping||m:f>=0&&f<h||a&&f===h,index:l,needsFlip:m,midPoint:c}),v)d.resetTexture(),(this.app.isRTL?d.backPage:d.frontPage).pageNumber=this.isBooklet?f:2*f+1,(this.app.isRTL?d.frontPage:d.backPage).pageNumber=this.isBooklet?-1:2*f+2,t.textureRequestStatus=n.a.REQUEST_STATUS.ON;d.pageNumber=f}}e.requestRefresh(!1),t.textureRequestStatus=n.a.REQUEST_STATUS.ON,e.oldBasePageNumber=r,this.checkCenter(),this.zoomViewer.refresh(),e.pageNumberChanged=!1}},{key:"validatePageChange",value:function(e){var t=this.app,i=!this.isFlipping()||void 0===t.oldPageNumber;return i=(i=i||t.currentPageNumber<e&&t.oldPageNumber<t.currentPageNumber)||t.currentPageNumber>e&&t.oldPageNumber>t.currentPageNumber}},{key:"getVisiblePages",value:function(){for(var e=this,t=[],i=e.getBasePage(),n=e.app.zoomValue>1?1:e.isBooklet?Math.min(e.stackCount/2,2):e.stackCount/2,o=0;o<n;o++)t.push(i-o),t.push(i+o+1);return{main:t,buffer:[]}}},{key:"getBasePage",value:function(e){return void 0===e&&(e=this.app.currentPageNumber),this.isBooklet?e:2*Math.floor(e/2)}},{key:"afterFlip",value:function(){!0!==this.isAnimating()&&(this.pagesReady(),this.updatePendingStatusClass())}},{key:"isFlipping",value:function(){var e=!1;return this.sheets.forEach((function(t){!0===t.isFlipping&&(e=!0)})),e}},{key:"isAnimating",value:function(){return this.isFlipping()}},{key:"mouseWheel",value:function(e){this.app.options.mouseScrollAction===n.a.MOUSE_SCROLL_ACTIONS.ZOOM?this.zoomViewer.mouseWheel(e):h(f(i.prototype),"mouseWheel",this).call(this,e)}},{key:"checkRequestQueue",value:function(){this.app.zoomValue>1?this.zoomViewer.checkRequestQueue():h(f(i.prototype),"checkRequestQueue",this).call(this)}},{key:"updatePan",value:function(){}},{key:"resetPageTween",value:function(){}},{key:"gotoPageCallBack",value:function(){this.resetPageTween(),1!==this.app.zoomValue&&!0===this.app.options.resetZoomBeforeFlip&&this.app.resetZoom(),this.beforeFlip(),this.requestRefresh()}},{key:"beforeFlip",value:function(){var e=this;e.app.executeCallback("beforeFlip"),1===e.app.zoomValue&&e.playSound()}},{key:"onFlip",value:function(){this.app.executeCallback("onFlip")}},{key:"getAnnotationElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app.zoomValue>1?this.zoomViewer.getAnnotationElement(e,t):h(f(i.prototype),"getAnnotationElement",this).call(this,e,t)}},{key:"getTextElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app.zoomValue>1?this.zoomViewer.getTextElement(e,t):h(f(i.prototype),"getTextElement",this).call(this,e,t)}},{key:"enterZoom",value:function(){this.exchangeTexture(this,this.zoomViewer)}},{key:"exitZoom",value:function(){this.exchangeTexture(this.zoomViewer,this)}},{key:"exchangeTexture",value:function(e,t){var i=this.getBasePage(),n=e.getPageByNumber(i),o=t.getPageByNumber(i);if(o&&"-1"===o.textureStamp?(o.textureStamp=n.textureStamp,o.loadTexture({texture:n.getTexture(!0)}),g.log("Texture Exchanging at "+i)):g.log("Texture Exchanging Bypassed at "+i),!this.isBooklet){var a=e.getPageByNumber(i+1),r=t.getPageByNumber(i+1);r&&"-1"===r.textureStamp?(r.textureStamp=a.textureStamp,r.loadTexture({texture:a.getTexture(!0)}),g.log("Texture Exchanging at "+(i+1))):g.log("Texture Exchanging Bypassed at "+(i+1))}t.pagesReady()}},{key:"setPageMode",value:function(e){var t=!0===e.isSingle;this.pageMode=t?n.a.FLIPBOOK_PAGE_MODE.SINGLE:n.a.FLIPBOOK_PAGE_MODE.DOUBLE,this.updatePageMode(),this.app.resizeRequestStart(),this.requestRefresh()}},{key:"updatePageMode",value:function(){this.app.pageCount<3&&(this.pageMode=n.a.FLIPBOOK_PAGE_MODE.SINGLE),this.isSingle=this.pageMode===n.a.FLIPBOOK_PAGE_MODE.SINGLE,this.isBooklet=this.isSingle&&this.singlePageMode===n.a.FLIPBOOK_SINGLE_PAGE_MODE.BOOKLET,this.app.jumpStep=this.isSingle?1:2,this.totalSheets=Math.ceil(this.app.pageCount/(this.isBooklet?1:2))}},{key:"setPage",value:function(e){return e.textureTarget===n.a.TEXTURE_TARGET.ZOOM?this.zoomViewer.setPage(e):h(f(i.prototype),"setPage",this).call(this,e)}},{key:"_getInnerHeight",value:function(){var e=this.app.dimensions.coverPage.viewPort,t=this.availablePageWidth(!1,!0),i=this.app.dimensions.maxHeight-this.app.dimensions.padding.height;this._containCover=g.contain(100*e.width,100*e.height,t,i),this._containCover.width=Math.floor(this._containCover.width),this._containCover.height=Math.floor(this._containCover.height);var n=this.app.dimensions.isFixedHeight?i:this._containCover.height;return this.app.coverScaleValue=this._containCover.height/e.height,this.app.dimensions.stage.width=this.app.dimensions.stage.innerWidth+this.app.dimensions.padding.width,this.app.dimensions.stage.height=n+this.app.dimensions.padding.height,n}},{key:"availablePageWidth",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.app.dimensions.offset.width:0,i=this.app.dimensions.stage.innerWidth+t;return i/=this.pageMode===n.a.FLIPBOOK_PAGE_MODE.SINGLE?1:2,Math.floor(i*(e?this.app.zoomValue:1))}},{key:"availablePageHeight",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Math.floor(this.app.dimensions.stage.innerHeight*(e?this.app.zoomValue:1))}},{key:"getTextureSize",value:function(e){var t=this.getViewPort(e.pageNumber,!0),i=g.contain(100*t.width,100*t.height,window.devicePixelRatio*this.availablePageWidth(),window.devicePixelRatio*this.availablePageHeight());return{height:i.height,width:i.width}}},{key:"filterViewPort",value:function(e,t){if(void 0!==e){if(1!=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return e;var i=e.clone();return i.width=i.width/this.getDoublePageWidthFix(t),i}}},{key:"filterViewPortCanvas",value:function(e,t,i){this.isDoublePageFix(i)&&(e.transform[4]=e.transform[4]-Math.floor(Math.min(t.width,2*e.width-t.width))),e.widthFix=this.isDoubleInternalPage(i)?2:1}},{key:"isClosedPage",value:function(e){return void 0===e&&(e=this.app.currentPageNumber),1===e||e===this.app.jumpStep*Math.ceil(this.app.pageCount/this.app.jumpStep)&&!this.isBooklet}},{key:"isLeftPage",value:function(e){return void 0===e&&(e=this.app.currentPageNumber),this.isBooklet?this.isRTL:e%2==(this.isRTL?1:0)}},{key:"cleanPage",value:function(e){if(this.isDoubleInternalPage(e)){var t=e+(e%2==1?-1:1);return!1===this.app.provider.requestedPages[e]&&!1===this.app.provider.requestedPages[t]}return h(f(i.prototype),"cleanPage",this).call(this,e)}}]),i}(o.a),m=function(e){c(i,e);var t=d(i);function i(e,n){var o;return s(this,i),e.viewerClass="df-zoomview "+(e.viewerClass||""),(o=t.call(this,e,n)).viewer=o.app.viewer,o.events={},o.init(),o.initEvents(),o.left=0,o.top=0,o}return u(i,[{key:"init",value:function(){this.leftPage=new a.a,this.rightPage=new a.a,this.pages.push(this.leftPage),this.pages.push(this.rightPage),this.leftPage.element.addClass("df-page-back"),this.rightPage.element.addClass("df-page-front"),this.wrapper.append(this.leftPage.element),this.wrapper.append(this.rightPage.element),this.bookShadow=jQuery("<div>",{class:"df-book-shadow"}),this.wrapper.append(this.bookShadow),this.wrapper.addClass("df-sheet")}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],h(f(i.prototype),"initEvents",this).call(this)}},{key:"dispose",value:function(){this.element.remove()}},{key:"resize",value:function(){var e=this,t=e.app.dimensions,i=t.padding,n=this.app.viewer.availablePageHeight(),o=this.app.viewer.availablePageWidth(),a=e.fullWidth=2*o,r=t.stage.innerWidth,s=t.stage.innerHeight,l=e.shiftHeight=Math.ceil(g.limitAt((n-s)/2,0,n)),u=e.shiftWidth=Math.ceil(g.limitAt((a-r)/2,0,a));1===e.app.zoomValue&&(e.left=0,e.top=0),e.element.css({top:-l,bottom:-l,right:-u,left:-u,paddingTop:i.top,paddingRight:i.right,paddingBottom:i.bottom,paddingLeft:i.left,transform:"translate3d("+e.left+"px,"+e.top+"px,0)"}),e.wrapper.css({width:a,height:n,marginTop:t.height-n-i.height>0?(t.height-i.height-n)/2:0}),this.wrapper.height(n).width(a-a%2),!0===e.app.pendingZoom&&e.zoom(),this.app.viewer.annotedPage=null,this.pagesReady()}},{key:"zoom",value:function(){var e=this,t=this.app;if(t.zoomChanged){var i=t.dimensions.origin,n=t.zoomValueChange;if(1===t.zoomValue)e.left=0,e.top=0;else{e.left*=n,e.top*=n,t.viewer.zoomCenter||(t.viewer.zoomCenter={x:i.x,y:i.y});var o={raw:t.viewer.zoomCenter},a={raw:{}},r=(o.raw.x-i.x)*n,s=(o.raw.y-i.y)*n;a.raw.x=i.x+r,a.raw.y=i.y+s,e.startPoint=a,e.pan(o),e.startPoint=null}}t.viewer.zoomCenter=null}},{key:"reset",value:function(){this.leftPage.resetTexture(),this.rightPage.resetTexture()}},{key:"refresh",value:function(){var e=this.app,t=e.viewer,i=t.getBasePage(),n=t.isBooklet?!e.isRTL:e.isRTL,o=n?this.rightPage:this.leftPage,a=n?this.leftPage:this.rightPage;o.pageNumber=i,a.pageNumber=i+1,o.updateCSS({display:0===i?"none":"block"}),a.updateCSS({display:a.pageNumber>e.pageCount||t.isBooklet?"none":"block"})}},{key:"updateCenter",value:function(){var e=this;if(null!==e&&null!==e.app.viewer){var t=e.app.viewer.centerShift,i=e.app.viewer.isRTL,n=t*(!i&&e.app.currentPageNumber>1||i&&e.app.currentPageNumber<e.app.pageCount?e.leftSheetWidth:e.rightSheetWidth)/2;e.wrapper[0].style.left=n+"px"}}},{key:"isDoubleInternalPage",value:function(e){return this.app.viewer.isDoubleInternalPage(e)}},{key:"pagesReady",value:function(){if(1!==this.app.zoomValue&&this.app.viewer.updatePendingStatusClass(!1),!1===this.app.options.flipbookFitPages){var e=this.app.viewer.availablePageWidth(),t=this.app.viewer.availablePageHeight(),i=this.app.viewer.getBasePage(),n=this.leftViewport=this.app.viewer.getViewPort(i+(this.app.viewer.isBooklet?0:this.app.viewer.isRTL?1:0)),o=this.rightViewPort=this.app.viewer.getViewPort(i+(this.app.viewer.isBooklet||this.app.viewer.isRTL?0:1));if(n){var a=g.contain(n.width,n.height,e,t);this.leftSheetWidth=Math.floor(a.width),this.leftSheetHeight=Math.floor(a.height)}if(this.leftSheetTop=(t-this.leftSheetHeight)/2,o){var r=g.contain(o.width,o.height,e,t);this.rightSheetWidth=Math.floor(r.width),this.rightSheetHeight=Math.floor(r.height)}this.rightSheetTop=(t-this.rightSheetHeight)/2,this.leftPage.element.height(Math.floor(this.leftSheetHeight)).width(Math.floor(this.leftSheetWidth)).css({transform:"translateY("+Math.floor(this.leftSheetTop)+"px)"}),this.rightPage.element.height(Math.floor(this.rightSheetHeight)).width(Math.floor(this.rightSheetWidth)).css({transform:"translateY("+Math.floor(this.rightSheetTop)+"px)"})}}},{key:"textureLoadedCallback",value:function(e){this.getPageByNumber(e.pageNumber);this.pagesReady()}}]),i}(o.a),y=function(){function e(t){s(this,e),this.parentElement=t.parentElement,this.isFlipping=!1,this.isOneSided=!1,this.viewer=t.viewer,this.frontPage=null,this.backPage=null,this.animateToReset=null}return u(e,[{key:"init",value:function(){}},{key:"flip",value:function(){}},{key:"frontImage",value:function(e){this.frontPage.loadTexture({texture:e.texture,callback:e.callback})}},{key:"backImage",value:function(e){this.backPage.loadTexture({texture:e.texture,callback:e.callback})}},{key:"resetTexture",value:function(){this.frontPage.resetTexture(),this.backPage.resetTexture()}},{key:"reset",value:function(){var e=this;e.animateToReset=null,e.isFlipping=!1,e.currentTween=null,e.pendingPoint=null,e.magnetic=!1,e.skipFlip=!0,e.animateToReset=null,e.viewer.dragPage=null,e.viewer.flipPage=null,e.viewer.corner=n.a.TURN_CORNER.NONE}}]),e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return f})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return g}));var n=i(0);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=s(e);if(t){var o=s(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}(this,i)}}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==l(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===l(a)?a:String(a)),n)}var o,a}function c(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=n.a.utils,d=function(){function e(){u(this,e),this.baseUrl=null,this.pdfDocument=null,this.pdfApp=null,this.pdfHistory=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._pagesRefCache=null}return c(e,[{key:"dispose",value:function(){this.baseUrl=null,this.pdfDocument=null,this.pdfApp=null,this.pdfHistory=null,this._pagesRefCache=null}},{key:"setDocument",value:function(e,t){this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(e){this.pdfApp=e,this.externalLinkTarget=e.options.linkTarget}},{key:"setHistory",value:function(e){this.pdfHistory=e}},{key:"navigateTo",value:function(e){this.goToDestination(e)}},{key:"addLinkAttributes",value:function(e,t){var i=this.externalLinkTarget,o=this.externalLinkRel,a=this.externalLinkEnabled;if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');var r=(0,p.removeNullCharacters)(t);a?e.href=e.title=r:(e.href="",e.title="Disabled: ".concat(r),e.onclick=function(){return!1});var s="";switch(i){case n.a.LINK_TARGET.NONE:break;case n.a.LINK_TARGET.SELF:s="_self";break;case n.a.LINK_TARGET.BLANK:s="_blank";break;case n.a.LINK_TARGET.PARENT:s="_parent";break;case n.a.LINK_TARGET.TOP:s="_top"}e.target=s,e.rel="string"==typeof o?o:"noopener noreferrer nofollow"}},{key:"goToDestination",value:function(e){var t,i="",n=this,o=function t(o){p.log("Requested: ",o);var a=o instanceof Object?n._pagesRefCache[o.num+" "+o.gen+" R"]:o+1;a?((a=n.pdfApp.viewer.getViewerPageNumber(a))>n.pdfApp.pageCount&&(a=n.pdfApp.pageCount),p.log("Loading for:",o," at page ",a),n.pdfApp.requestDestRefKey===o.num+" "+o.gen+" R"?(n.pdfApp.gotoPage(a),n.pdfHistory&&n.pdfHistory.push({dest:e,hash:i,page:a})):p.log("Expired Request for ",a," with ",o)):(n.pdfApp.container.addClass("df-fetch-pdf"),n.pdfDocument.getPageIndex(o).then((function(e){var i=e+1,a=o.num+" "+o.gen+" R";n._pagesRefCache[a]=i,t(o)})))};"string"==typeof e?(i=e,t=this.pdfDocument.getDestination(e)):t=Promise.resolve(e),t.then((function(t){p.log("Started:",t),e=t,t instanceof Array&&(n.pdfApp.requestDestRefKey=t[0].num+" "+t[0].gen+" R",o(t[0]))}))}},{key:"customNavigateTo",value:function(e){if(""!==e&&null!=e&&"null"!==e){var t=null;if(isNaN(Math.floor(e))){if("string"==typeof e&&(t=parseInt(e.replace("#",""),10),isNaN(t)))return void window.open(e,this.pdfApp.options.linkTarget===n.a.LINK_TARGET.SELF?"_self":"_blank")}else t=e;null!=t&&this.pdfApp.gotoPage(t)}}},{key:"getDestinationHash",value:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var t=e[0],i=t instanceof Object?this._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;if(i){var n=this.getAnchorUrl("#page="+i),o=e[1];if("object"===l(o)&&"name"in o&&"XYZ"===o.name){var a=e[4]||this.pdfApp.pageScaleValue,r=parseFloat(a);r&&(a=100*r),n+="&zoom="+a,(e[2]||e[3])&&(n+=","+(e[2]||0)+","+(e[3]||0))}return n}}return this.getAnchorUrl("")}},{key:"getCustomDestinationHash",value:function(e){return"#"+escape(e)}},{key:"getAnchorUrl",value:function(e){return(this.baseUrl||"")+e}},{key:"executeNamedAction",value:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var t=document.createEvent("CustomEvent");t.initCustomEvent("namedaction",!0,!0,{action:e}),this.pdfApp.container.dispatchEvent(t)}},{key:"cachePageRef",value:function(e,t){var i=t.num+" "+t.gen+" R";this._pagesRefCache[i]=e}},{key:"pagesCount",get:function(){return this.pdfDocument.numPages}},{key:"page",get:function(){return this.pdfApp.currentPageNumber},set:function(e){this.pdfApp.gotoPage(e)}}]),e}(),f=function(){function e(t,i){u(this,e),this.props=t,this.app=i,this.textureCache=[],this.pageCount=0,this.numPages=0,this.outline=[],this.viewPorts=[],this.requestedPages="",this.requestIndex=0,this.pagesToClean=[],this.coverPage=void 0,this.pageSize=this.app.options.pageSize,this._page1Pass=!1,this._page2Pass=!1}return c(e,[{key:"finalize",value:function(){}},{key:"setCache",value:function(e,t,i){var n=this,o=i;i&&(void 0===n.textureCache[o]&&(n.textureCache[o]=[]),n.textureCache[o][e]=t)}},{key:"getCache",value:function(e,t){return void 0===this.textureCache[t]?void 0:this.textureCache[t][e]}},{key:"_isValidPage",value:function(e){return e>0&&e<=this.pageCount}},{key:"processPage",value:function(e){}},{key:"cleanUpPages",value:function(){}},{key:"checkRequestQueue",value:function(){}},{key:"processAnnotations",value:function(){}},{key:"processTextContent",value:function(){}},{key:"loadDocument",value:function(){}},{key:"pagesLoaded",value:function(){var e=this;e._page1Pass&&e._page2Pass&&(e.app.viewer.checkDocumentPageSizes(),e.finalize())}},{key:"_documentLoaded",value:function(){this.finalizeOutLine(),this.app&&this.app.dimensions&&void 0===this.app.dimensions.pageFit&&p.log("Provider needs to initialize page properties for the app"),this.app._documentLoaded()}},{key:"finalizeOutLine",value:function(){if(null!==this.app&&null!==this.app.options){var e=this.app.options.outline;if(e)for(var t=0;t<e.length;t++)e[t].custom=!0,this.outline.push(e[t])}}}]),e}(),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(s,e);var t=a(s);function s(e,o){var a;u(this,s);var l,h=(a=t.call(this,e,o)).app,c=r(a);function d(e){h.options.pdfjsWorkerSrc+="?ver="+n.a.version,h.updateInfo(h.options.text.loading+" PDF Worker ...");var t=document.createElement("a");t.href=h.options.pdfjsWorkerSrc,t.hostname!==window.location.hostname&&!0===n.a.loadCorsPdfjsWorker?(h.updateInfo(h.options.text.loading+" PDF Worker CORS ..."),jQuery.ajax({url:h.options.pdfjsWorkerSrc,cache:!0,success:function(t){h.options.pdfjsWorkerSrc=p.createObjectURL(t,"text/javascript"),"function"==typeof e&&e()}})):"function"==typeof e&&e()}return c.pdfDocument=void 0,c._page2Ratio=void 0,l=function(){pdfjsLib.GlobalWorkerOptions.workerSrc=h.options.pdfjsWorkerSrc,pdfjsLib.canvasWillReadFrequently=n.a.defaults.canvasWillReadFrequently,c.loadDocument()},"undefined"==typeof pdfjsLib?(h.updateInfo(h.options.text.loading+" PDF Service ..."),p.getScript(h.options.pdfjsSrc+"?ver="+n.a.version,(function(){"function"==typeof define&&i(6)&&window.requirejs?(h.updateInfo(h.options.text.loading+" PDF Service (require) ..."),window.require.config({paths:{"pdfjs-dist/build/pdf.worker":h.options.pdfjsWorkerSrc.replace(".js","")}}),window.require(["pdfjs-dist/build/pdf"],(function(e){window.pdfjsLib=e,d(l)}))):d(l)}),(function(){h.updateInfo("Unable to load PDF service.."),c.dispose()}))):"function"==typeof l&&l(),a}return c(s,[{key:"dispose",value:function(){this.pdfDocument&&this.pdfDocument.destroy(),this.linkService=p.disposeObject(this.linkService),this.pdfLoadProgress&&this.pdfLoadProgress.destroy(),this.pdfLoadProgress=null,this.pdfDocument=null}},{key:"loadDocument",value:function(){var e=this.app,t=this.app.options,i=this,n=t.pdfParameters||{};if(n.url=p.httpsCorrection(n.url||t.source),n.rangeChunkSize=t.rangeChunkSize,n.cMapPacked=!0,n.disableAutoFetch=t.disableAutoFetch,n.disableStream=t.disableStream,n.disableRange=!0===t.disableRange,n.disableFontFace=t.disableFontFace,n.cMapUrl=t.cMapUrl,n.imagesLocation=t.imagesLocation,n.imageResourcesPath=t.imageResourcesPath,n.url||n.data||n.range){var o=i.pdfLoadProgress=pdfjsLib.getDocument(n);o._worker.promise.then((function(t){e.updateInfo(e.options.text.loading+" PDF ...")})),o.promise.then((function(n){i.pdfDocument=n,n.getPage(1).then((function(o){var a;i.coverPage=o;var r=i.coverPage.viewPort=o.getViewport({scale:1,rotation:o._pageInfo.rotate+e.options.pageRotation}),s=i.coverPage.pageRatio=r.width/r.height,l=s>1;i.viewPorts[1]=r,e.dimensions.coverPage={ratio:s,viewPort:r,width:r.width,height:r.height},e.dimensions.maxTextureHeight=(null!==(a=t.maxTextureSize)&&void 0!==a?a:4096)/(l?s:1),e.dimensions.autoHeightRatio=1/s,i.pageCount=n.numPages,i.numPages=n.numPages,i._page1Pass=!0,i.pagesLoaded()})),n.numPages>1&&!0===e.checkSecondPage?n.getPage(2).then((function(t){var n=t.getViewport({scale:1,rotation:t._pageInfo.rotate+e.options.pageRotation});i._page2Ratio=n.width/n.height,i.viewPorts[2]=n,i._page2Pass=!0,i.pagesLoaded()})):(i._page2Pass=!0,i.pagesLoaded())})).catch((function(t){if(null!==e&&null!=e.options){var n,o="",a=document.createElement("a");a.href=e.options.source,a.hostname===window.location.hostname||-1!==a.href.indexOf("file://")||p.isChromeExtension()||-1!==a.href.indexOf("blob:")||(o="<strong>CROSS ORIGIN!! </strong>");var r=(null===(n=e.options)||void 0===n?void 0:n.fileName)||a.href;e.updateInfo(o+"<strong>Error: Cannot access file!  </strong>"+unescape(r)+"<br><br>"+t.message,"df-error"),console.log(t),e.container.removeClass("df-loading").addClass("df-error"),i.dispose()}})),o.getTotalLength=function(){return i.pdfLoadProgress._transport._networkStream._fullRequestReader.contentLength},o.onProgress=function(t){if(null!==e){var i=100*t.loaded/o.getTotalLength();isNaN(i)?t&&t.loaded?(void 0===o.lastLoaded||o.lastLoaded+25e4<t.loaded)&&(o.lastLoaded=t.loaded,e.updateInfo(e.options.text.loading+" PDF "+(Math.ceil(t.loaded/1e4)/100).toFixed(2).toString()+"MB ...")):e.updateInfo(e.options.text.loading+" PDF ..."):e.updateInfo(e.options.text.loading+" PDF "+Math.ceil(Math.min(100,i)).toString().split(".")[0]+"% ...")}}}else e.updateInfo("ERROR : No PDF File provided! ","df-error")}},{key:"pdfFetchStarted",value:function(){this.pdfFetchStatusCount=0,this.app.container.addClass("df-fetch-pdf"),this.pdfFetchStatus=n.a.REQUEST_STATUS.COUNT}},{key:"checkRequestQueue",value:function(){}},{key:"finalize",value:function(){var e=this.app,t=this;null!==e&&null!==e.options&&(t.linkService=new d,t.linkService.setDocument(t.pdfDocument,null),t.linkService.setViewer(e),t.pdfDocument.getOutline().then((function(i){!0===e.options.overwritePDFOutline&&(i=[]),i=i||[],t.outline=i,t._documentLoaded()})))}},{key:"processPage",value:function(e){var t=this.app,i=this,n=e.pageNumber,o=performance.now(),a=t.viewer.getDocumentPageNumber(n);p.log("Requesting PDF Page:"+a),i.pdfDocument.getPage(a).then((function(r){i.viewPorts[n]||(e.isFreshPage=!0,i.viewPorts[n]=r.getViewport({scale:1,rotation:r._pageInfo.rotate+t.options.pageRotation}));var s,l=t.viewer.getRenderContext(r,e);e.isFreshPage&&(null===(s=t.viewer.getPageByNumber(e.pageNumber))||void 0===s||s.changeTexture(e.pageNumber,l.canvas.height));p.log("Page "+n+" rendering - "+l.canvas.width+"x"+l.canvas.height),e.trace=i.requestIndex++,i.requestedPages+=","+e.trace+"["+a+"|"+l.canvas.height+"]",r.cleanupAfterRender=!1,r.render(l).promise.then((function(){if(t.applyTexture(l.canvas,e),!0===t.options.cleanupAfterRender){var s=","+e.trace+"["+a+"|"+l.canvas.height+"]";p.log("CleanUp Requesting for ("+n+") actual "+a),i.requestedPages.indexOf(s)>-1&&(i.requestedPages=i.requestedPages.replace(s,""),-1==i.requestedPages.indexOf("["+a+"|")?(p.log("CleanUp Passed for ("+n+") actual "+a),i.pagesToClean.push(r),i.pagesToClean.length>0&&i.cleanUpPages()):p.log("CleanUp Cancelled waiting for ("+n+") actual "+a+" : "+i.requestedPages))}l=null,p.log("Rendered "+n+" in "+(performance.now()-o)+" milliseconds")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"cleanUpPages",value:function(){for(;this.pagesToClean.length>0;){var e=this.pagesToClean.splice(-1)[0];p.log("Cleanup Completed for PDF page: "+(e._pageIndex+1)),e.cleanup()}}}]),s}(f);n.a.providers.pdf=g},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i(0),o=i(4),a=i(1);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},s.apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),n)}var o,a}function h(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var o=g(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,i)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=n.a,m=v.utils,y=function(e){c(i,e);var t=d(i);function i(e){var n;return l(this,i),(n=t.call(this,e)).flexibility=e.flexibility,n.sheetAngle=180,n.curveAngle=0,n.parent3D=e.parent3D,n.segments=e.segments||50,n.width=e.width||100,n.height=e.height||100,n.depth=e.depth||.5,n.matColor="white",n.init(),n.bumpScale=[0,0,0,0,1,1],n}return h(i,[{key:"init",value:function(){var e=this;e.element=new S.Paper({parent3D:e.parent3D,segments:e.segments,depth:e.depth,height:e.height,width:e.width,flatShading:0===e.flexibility}),e.element.sheet=e,e.frontPage=new w({sheet:e,face:5}),e.backPage=new w({sheet:e,face:4}),e.reset(),e.updateAngle()}},{key:"setMatColor",value:function(e,t){if(this.matColor=new THREE.Color(e),void 0===t)for(var i=0;i<6;i++)this.element.material[i].color=this.matColor;else this.element.material[t].color=this.matColor}},{key:"getBumpScale",value:function(e){return this.bumpScale[e]}},{key:"resetMatColor",value:function(e,t){this.element.material[e].color=t?this.matColor:S.WHITE_COLOR}},{key:"frontImage",value:function(e,t){this.element.frontImage(e,t)}},{key:"backImage",value:function(e,t){this.element.backImage(e,t)}},{key:"updateAngle",value:function(){var e=this;if(void 0!==this.viewer&&null!==this.viewer){var t=!0===e.isHard?0:e.flexibility,i=this.width*(1-Math.sin(t/2*(t/2))/2)-this.width*t/20;this.element.scale.y=this.height/this.element.geometry.parameters.height;var n=e.segments,o=i/1,a=o*t,r=o,s=[],l=[],u=[],h=[],c=[],p=[],d=e.depth,f=0,g=[];g.push(f),c[0]=[],p[0]=[];var v=e.sheetAngle*Math.PI/180,m=!0===e.isHard?v:e.curveAngle*Math.PI/180,y=e.sheetAngle*Math.PI/180,b=y-Math.PI/2,w=Math.sin(b)*d/2;c[0][0]=c[0][1]=new THREE.Vector3(-r*Math.cos(v),0,Math.sin(v)*r-w),p[0][0]=p[0][1]=new THREE.Vector3(c[0][0].x-Math.cos(b)*d,0,c[0][0].z+2*w),c[0][1]=new THREE.Vector3(-r/2*Math.cos(m),0,r/2*Math.sin(m)-w),p[0][1]=new THREE.Vector3(c[0][1].x-Math.cos(b)*d,0,c[0][1].z+2*w),y=(45+e.sheetAngle/2)*Math.PI/180,c[0][2]=new THREE.Vector3(-Math.cos(y)*a/2,0,Math.sin(y)*a-w),p[0][2]=new THREE.Vector3(c[0][2].x+Math.cos(b)*d,0,c[0][2].z+2*w),Math.abs(p[0][2].x-0)<5e-4&&(p[0][2].x=0),c[0][3]=new THREE.Vector3(0,0,-w),p[0][3]=new THREE.Vector3(c[0][3].x-Math.cos(b)*d,0,c[0][3].z+2*w),Math.abs(p[0][3].x-0)<5e-4&&(p[0][3].x=0);for(var P=0;P<1;P++){var C=Math.max(e.segments-1,1);s[P]=new THREE.CubicBezierCurve3(c[P][0],c[P][1],c[P][2],c[P][3]),u[P]=s[P].getPoints(C),C>2&&u[P].push((new THREE.Vector3).copy(u[P][C]));for(var x=void 0,T=u[P][0],E=1;E<u[P].length;E++)f+=(x=u[P][E]).distanceTo(T),g.push(f),T=x;l[P]=new THREE.CubicBezierCurve3(p[P][0],p[P][1],p[P][2],p[P][3]),h[P]=l[P].getPoints(C),C>2&&h[P].push((new THREE.Vector3).copy(h[P][C]))}var k=e.element.geometry;if(void 0!==k.attributes){var O=k.attributes.position,R=k.attributes.uv,L=n+1;O.setZ(0,u[0][n].z),O.setZ(2,u[0][n].z),O.setX(0,u[0][n].x),O.setX(2,u[0][n].x),O.setZ(1,h[0][n].z),O.setZ(3,h[0][n].z),O.setX(1,h[0][n].x),O.setX(3,h[0][n].x),O.setZ(5,u[0][0].z),O.setZ(7,u[0][0].z),O.setX(5,u[0][0].x),O.setX(7,u[0][0].x),O.setZ(4,h[0][0].z),O.setZ(6,h[0][0].z),O.setX(4,h[0][0].x),O.setX(6,h[0][0].x);for(var N=0;N<1;N++)for(var A=0;A<L;A++)O.setZ(8+0*L+A,u[0][A].z),O.setX(8+0*L+A,u[0][A].x),O.setZ(8+1*L+A,h[0][A].z),O.setX(8+1*L+A,h[0][A].x),O.setZ(8+2*L+A,u[0][A].z),O.setX(8+2*L+A,u[0][A].x),O.setZ(8+3*L+A,h[0][A].z),O.setX(8+3*L+A,h[0][A].x),O.setZ(8+4*L+A,u[0][A].z),O.setX(8+4*L+A,u[0][A].x),O.setZ(8+5*L+A,u[0][A].z),O.setX(8+5*L+A,u[0][A].x),R.setX(8+4*L+A,g[A]/f),R.setX(8+5*L+A,g[A]/f),O.setZ(8+6*L+A,h[0][n-A].z),O.setX(8+6*L+A,h[0][n-A].x),O.setZ(8+7*L+A,h[0][n-A].z),O.setX(8+7*L+A,h[0][n-A].x),R.setX(8+6*L+A,1-g[n-A]/f),R.setX(8+7*L+A,1-g[n-A]/f);k.computeBoundingBox(),e.element.scale.x=1*r/f,k.computeBoundingSphere(),O.needsUpdate=!0,R.needsUpdate=!0,k.computeVertexNormals()}else{var I=k.vertices,_=n-1,M=8;I[0].z=I[2].z=u[0][n].z,I[0].x=I[2].x=u[0][n].x,I[1].z=I[3].z=h[0][n].z,I[1].x=I[3].x=h[0][n].x,I[5].z=I[7].z=u[0][0].z,I[5].x=I[7].x=u[0][0].x,I[4].z=I[6].z=h[0][0].z,I[4].x=I[6].x=h[0][0].x;for(var F=0;F<1;F++)for(var z=1;z<n;z++)I[M].z=I[M+3*_].z=h[0][z].z,I[M].x=I[M+3*_].x=h[0][z].x,I[M+_].z=I[M+2*_].z=u[0][z].z,I[M+_].x=I[M+2*_].x=u[0][z].x,M++;for(var D=k.faceVertexUvs[0],j=k.faces,B=0,U=0;U<D.length;U++)if(j[U].materialIndex===S.MATERIAL_FACE.BACK){var V=g[B]/f;U%2==0?(D[U][0].x=D[U][1].x=D[U+1][0].x=V,B++):D[U-1][2].x=D[U][1].x=D[U][2].x=V}else if(j[U].materialIndex===S.MATERIAL_FACE.FRONT){var H=1-g[B]/f;U%2==0?(D[U][0].x=D[U][1].x=D[U+1][0].x=H,B--):D[U-1][2].x=D[U][1].x=D[U][2].x=H}k.computeBoundingBox(),e.element.scale.x=1*r/f,k.computeBoundingSphere(),k.verticesNeedUpdate=!0,k.computeFaceNormals(),k.computeVertexNormals(),k.uvsNeedUpdate=!0,k.normalsNeedUpdate=!0}s.forEach((function(e){null})),l.forEach((function(e){null})),h.forEach((function(e){null})),u.forEach((function(e){null}))}}},{key:"flip",value:function(e,t){var i=this,n=i.viewer.isBooklet,o=t-e,a=e>90,r=i.viewer.isRTL,s=a?i.backPage.pageNumber:i.frontPage.pageNumber,l=this.viewer.getViewPort(s);l&&(l=m.contain(l.width,l.height,i.viewer.availablePageWidth(),i.viewer.availablePageHeight()));var u=-(i.viewer.has3DCover&&i.viewer.isClosedPage()?i.viewer.coverExtraWidth:0);i.init={angle:e,angle2:a?180:0,height:a?i.viewer.rightSheetHeight:i.viewer.leftSheetHeight,width:a?i.viewer.rightSheetWidth:i.viewer.leftSheetWidth,index:a&&!r||!a&&r?1:0,_index:0},i.first={angle:e+o/4,angle2:90,index:a&&!r||!a&&r?1:.25},i.mid={angle:e+2*o/4,angle2:a?45:135,index:.5},i.mid2={angle:e+3*o/4,angle2:a?0:180,index:a&&!r||!a&&r?.25:1},i.end={angle:t,angle2:a?0:180,index:a&&!r||!a&&r?0:1,height:2*u+(l?l.height:i.height),width:u+(l?l.width:i.width)},i.isFlipping=!0;n&&(!a&&!r||a&&r)&&(i.element.material[5].opacity=i.element.material[4].opacity=0,i.element.castShadow=!1),i.currentTween=new TWEEN.Tween(i.init).to({angle:[i.first.angle,i.mid.angle,i.mid2.angle,i.end.angle],angle2:[i.first.angle2,i.mid.angle2,i.mid2.angle2,i.end.angle2],index:[i.first.index,i.mid.index,i.mid2.index,i.end.index],_index:1,height:i.end.height,width:i.end.width},i.viewer.app.options.duration).onUpdate((function(e){var t;t=this,i.sheetAngle=t.angle,i.curveAngle=i.isHard?t.angle:t.angle2,!0===i.isHard?(i.flexibility=0,i.isCover&&i.viewer.flipCover(i)):i.flexibility=t.angle<90?i.leftFlexibility:i.rightFlexibility,i.element.position.z=(t.angle<90?i.leftPos:i.rightPos)+i.depth,n&&(i.element.material[5].opacity=i.element.material[4].opacity=t.index,i.element.castShadow=t.index>.5),i.height=t.height,i.width=t.width,i.updateAngle(!0)})).easing(TWEEN.Easing.Sinusoidal.Out).onStop((function(){i.currentTween=null,i.isFlipping=!1,i.isCover&&(i.viewer.leftCover.isFlipping=!1,i.viewer.rightCover.isFlipping=!1),i.element.material[5].opacity=i.element.material[4].opacity=1})).onComplete((function(){i.updateAngle(),i.element.material[5].opacity=i.element.material[4].opacity=1,i.element.castShadow=!0,i.isFlipping=!1,i.isCover&&(i.viewer.leftCover.isFlipping=!1,i.viewer.rightCover.isFlipping=!1),i.side=i.targetSide,i.viewer.onFlip(),i.viewer.afterFlip(),i.currentTween=null,i.viewer&&i.viewer.requestRefresh&&i.viewer.requestRefresh()})).start()}}]),i}(o.b),b=function(e){c(o,e);var t=d(o);function o(e,i){var n,a,r,s;return l(this,o),e.viewerClass="df-flipbook-3d",(s=t.call(this,e,i)).flexibility=m.limitAt(null!==(n=e.flexibility)&&void 0!==n?n:.9,0,10),s.drag3D=!1,s.texturePowerOfTwo=null===(a=e.texturePowerOfTwo)||void 0===a||a,s.color3DSheets=null!==(r=s.app.options.color3DSheets)&&void 0!==r?r:"white",s.initMOCKUP((function(){i._viewerPrepared()})),s}return h(o,[{key:"initMOCKUP",value:function(e){var t=this.app;"undefined"==typeof THREE?(t.updateInfo(t.options.text.loading+" WEBGL 3D ..."),"function"==typeof define&&i(6)&&window.requirejs?(window.requirejs.config({paths:{three:t.options.threejsSrc.replace(".js","")},shim:{three:{exports:"THREE"}}}),window.require(["three"],(function(t){return window.THREE=t,S.init(),"function"==typeof e&&e(),t}))):"function"==typeof define&&i(6)?window.require(["three",t.options.threejsSrc.replace(".js","")],(function(t){t((function(){S.init(),"function"==typeof e&&e()}))})):m.getScript(t.options.threejsSrc+"?ver="+v.version,(function(){S.init(),"function"==typeof e&&e()}),(function(){t.updateInfo("Unable to load THREE.js...")}))):(S.init(),"function"==typeof e&&e())}},{key:"init",value:function(){var e=this.app;s(g(o.prototype),"init",this).call(this);e.provider.coverPage.pageRatio;this.pageScaleX=1,this.initDepth(),this.initStage(),this.initPages(),this.initEvents(),this.render()}},{key:"updatePageMode",value:function(){s(g(o.prototype),"updatePageMode",this).call(this);var e=this.app;this.has3DCover=e.options.has3DCover&&e.pageCount>7&&!this.isBooklet,this.has3DCover&&"none"===e.options.flipbookHardPages&&(e.options.flipbookHardPages="cover")}},{key:"initDepth",value:function(){var e,t;this.sheetDepth=this.pageScaleX*(null!==(e=this.app.options.sheetDepth)&&void 0!==e?e:.5),this.sheetSegments=null!==(t=this.app.options.sheetSegments)&&void 0!==t?t:20,this.coverDepth=2*this.sheetDepth,this.sheetsDepth=Math.min(20,this.app.pageCount/4)*this.sheetDepth}},{key:"initStage",value:function(){var e=this,t=e.stage=new S.Stage({pixelRatio:window.devicePixelRatio});(t.canvas=jQuery(t.renderer.domElement).addClass("df-3dcanvas")).appendTo(this.element),t.camera.position.set(0,20,600),t.camera.lookAt(new THREE.Vector3(0,0,0)),e.camera=t.camera,t.spotLight.position.set(-220,220,550),t.spotLight.castShadow=!m.isMobile&&e.app.options.has3DShadow,t.spotLight.shadow&&(t.spotLight.shadow.bias=-.0035),t.ambientLight.color=new THREE.Color("#fff"),t.ambientLight.intensity=.8;var i=new THREE.ShadowMaterial;i.opacity=e.app.options.shadowOpacity,t.ground.oldMaterial=t.ground.material,t.ground.material=i,t.ground.position.z=this.has3DCover?-6:-4,t.orbitControl.maxAzimuthAngle=0,t.orbitControl.minAzimuthAngle=0,t.orbitControl.minPolarAngle=Math.PI/2,t.orbitControl.maxPolarAngle=2.2,t.orbitControl.mouseButtons.ORBIT=THREE.MOUSE.RIGHT,t.orbitControl.mouseButtons.PAN=-1,t.orbitControl.noPan=!0,t.orbitControl.maxDistance=7e3,t.orbitControl.minDistance=50,t.orbitControl.noZoom=!0,t.selectiveRendering=!0,t.orbitControl.zoomSpeed=5,t.orbitControl.keyPanSpeed=0,t.orbitControl.center.set(0,0,0),t.orbitControl.update();var n=t.cssRenderer=new THREE.CSS3DRenderer;jQuery(n.domElement).css({position:"absolute",top:0,pointerEvents:"none"}).addClass("df-3dcanvas df-csscanvas"),e.element[0].appendChild(n.domElement),t.cssScene=new THREE.Scene,e.wrapper.remove(),e.wrapper=new THREE.Group,e.stage.add(e.wrapper),e.wrapper.add(t.ground),e.app.renderRequestStatus=v.REQUEST_STATUS.ON}},{key:"initPages",value:function(){for(var e={parent3D:this.wrapper,viewer:this,segments:this.sheetSegments,depth:this.sheetDepth,flexibility:this.flexibility},t=0;t<6;t++){var i=new y(e);i.index=t,i.viewer=this,this.sheets.push(i),i.setMatColor(this.color3DSheets),this.pages.push(i.frontPage),this.pages.push(i.backPage),this.stage.cssScene.add(i.frontPage.cssPage),this.stage.cssScene.add(i.backPage.cssPage)}e.depth=this.sheetsDepth,e.segments=1,e.flexibility=0,this.leftSheets=new y(e),this.rightSheets=new y(e),this.leftSheets.setMatColor(this.color3DSheets),this.rightSheets.setMatColor(this.color3DSheets),e.depth=this.coverDepth,this.leftCover=new y(e),this.rightCover=new y(e),this.leftCover.bumpScale[4]=10,this.rightCover.bumpScale[5]=10,this.leftCover.isHard=!0,this.rightCover.isHard=!0,this.setcolor3DCover(this.app.options.color3DCover),this.stage.cssScene.add(this.leftCover.frontPage.cssPage),this.stage.cssScene.add(this.rightCover.backPage.cssPage)}},{key:"setcolor3DCover",value:function(e){this.leftCover.setMatColor(e),this.rightCover.setMatColor(e),this.leftCover.setMatColor(this.color3DSheets,5),this.rightCover.setMatColor(this.color3DSheets,4),this.app.renderRequestStatus=n.a.REQUEST_STATUS.ON}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],s(g(o.prototype),"initEvents",this).call(this)}},{key:"dispose",value:function(){s(g(o.prototype),"dispose",this).call(this);var e=this;e.stage&&(e.stage.clearChild(),e.stage.cssRenderer.domElement.parentNode.removeChild(e.stage.cssRenderer.domElement),e.stage.cssRenderer=null,e.stage.orbitControl=m.disposeObject(e.stage.orbitControl),e.stage.renderer=m.disposeObject(e.stage.renderer),jQuery(e.stage.canvas).remove(),e.stage.canvas=null,e.stage=m.disposeObject(e.stage)),e.centerTween&&e.centerTween.stop&&e.centerTween.stop()}},{key:"render",value:function(){this.stage.render(),this.stage.cssRenderer.render(this.stage.cssScene,this.stage.camera)}},{key:"resize",value:function(){s(g(o.prototype),"resize",this).call(this);var e=this,t=e.app,i=e.stage,n=t.dimensions,a=n.padding;e.isSingle,this.availablePageWidth(),this.availablePageHeight();void 0===this.rightSheetHeight&&(this.rightSheetHeight=this._containCover.height,this.leftSheetHeight=this._containCover.height,this.leftSheetWidth=this._containCover.width,this.rightSheetWidth=this._containCover.width),i.resizeCanvas(n.stage.width,n.stage.height),i.cssRenderer.setSize(n.stage.width,n.stage.height);var r=1/(2*Math.tan(Math.PI*i.camera.fov*.5/180)/(n.stage.height/t.zoomValue))+2.2;this.pageScaleX=Math.max(Math.max(this._containCover.height,this._containCover.width)/400,1),this.initDepth(),this.sheets.forEach((function(t){t.depth=e.sheetDepth})),this.updateShadowSize(),this.stage.spotLight.position.x=330*-this.pageScaleX,this.stage.spotLight.position.y=440*this.pageScaleX,this.stage.spotLight.position.z=660*this.pageScaleX,this.stage.spotLight.shadow.camera.far=1200*this.pageScaleX,this.stage.spotLight.shadow.camera.updateProjectionMatrix(),i.camera.updateProjectionMatrix();var l=(a.top-a.bottom)/t.zoomValue/2,u=-(a.left-a.right)/t.zoomValue/2;i.camera.position.z!==r&&!0===t.pendingZoom&&(i.camera.position.z=r),1===t.zoomValue&&(i.camera.position.set(u,l,r),i.orbitControl.target=new THREE.Vector3(u,l,0),i.orbitControl.update(),i.orbitControl.rotateTo(THREE.Math.degToRad(90+t.options.flipbook3DTiltAngle))),i.orbitControl.update(),t.refreshRequestStart();var h=this.refSize=Math.max(this._containCover.width,this._containCover.height);this.coverExtraWidth=.02*h,i.orbitControl.mouseButtons.ORBIT=1!==t.zoomValue?-1:THREE.MOUSE.RIGHT,i.orbitControl.mouseButtons.PAN=1!==t.zoomValue?THREE.MOUSE.LEFT:-1,e.app.renderRequestStatus=v.REQUEST_STATUS.ON,e.zoomViewer.resize(),e.centerNeedsUpdate=!0,e.checkCenter(!0),e.pagesReady()}},{key:"updateShadowSize",value:function(){}},{key:"refresh",value:function(){var e=this,t=this.app,i=e.getBasePage(),n=1/t.pageCount*i,a=this.isRTL?1-n:n,r=1-a,l=Math.min(e.stackCount,e.totalSheets),u=m.limitAt(e.totalSheets,e.stackCount,2*e.stackCount),h=(Math.max(a,r),this.isBooklet?0:this.flexibility/u);e.leftFlexibility=h*r,e.rightFlexibility=h*a,e.midPosition=.5*l*e.sheetDepth,s(g(o.prototype),"refresh",this).call(this);var c=!0===this.has3DCover;if(this.leftCover.element.visible=this.rightCover.element.visible=this.leftSheets.element.visible=this.rightSheets.element.visible=c,this.wrapper.position.z=-this.midPosition,c){var p=0,d=0,f=e.isRTL,v=this.isFirstPage(),y=this.isLastPage();e.leftSheets.depth=f?e.sheetsDepth*(1-e.getBasePage()/t.pageCount):e.sheetsDepth*i/t.pageCount,e.leftSheets.element.visible=f?t.pageCount-e.getBasePage()>2:i>2,p-=e.leftSheets.depth/2,e.leftSheets.element.position.z=p,p-=e.coverDepth+(e.leftSheets.element.visible?e.leftSheets.depth/2:0)+3*e.coverDepth,e.leftCover.depth=e.rightCover.depth=e.coverDepth;var b=this.isClosedPage()&&(f&&y||!f&&v),w=this.isClosedPage()&&(!f&&y||f&&v);!0!==e.leftCover.isFlipping&&(e.leftCover.element.position.z=b?e.midPosition+e.coverDepth:p+e.coverDepth/2,e.leftCover.element.position.x=0,e.leftSheets.sheetAngle=e.leftCover.sheetAngle=b?180:0,e.leftSheets.curveAngle=e.leftCover.curveAngle=b?180:0,e.leftSheets.updateAngle(),e.leftCover.updateAngle()),e.rightSheets.depth=e.sheetsDepth-e.leftSheets.depth,e.rightSheets.element.visible=f?i>2:t.pageCount-e.getBasePage()>2,d-=e.rightSheets.depth/2,e.rightSheets.element.position.z=d,d-=e.coverDepth+(e.rightSheets.element.visible?e.rightSheets.depth/2:0)+3*e.coverDepth,!0!==e.rightCover.isFlipping&&(e.rightCover.element.position.z=w?e.midPosition+e.coverDepth:d+e.coverDepth/2,e.rightCover.element.position.x=0,e.rightSheets.sheetAngle=e.rightCover.sheetAngle=w?0:180,e.rightSheets.curveAngle=e.rightCover.curveAngle=w?0:180,e.rightSheets.updateAngle(),e.rightCover.updateAngle()),e.stage.ground.position.z=1.5*Math.min(p,d),this.isClosedPage()&&(e.stage.ground.position.z-=5*e.coverDepth)}else e.stage.ground.position.z=-e.midPosition-15*e.sheetDepth}},{key:"refreshSheet",value:function(e){var t,i=this,o=e.sheet,a=e.index,r=o.sheetAngle,s=!(o.isHard||0===this.flexibility);o.leftFlexibility=s?i.leftFlexibility:0,o.rightFlexibility=s?i.rightFlexibility:0,o.leftPos=i.midPosition+(a-e.midPoint+1)*i.sheetDepth-i.sheetDepth/2,o.rightPos=i.midPosition-(a-e.midPoint)*i.sheetDepth-i.sheetDepth/2,t=o.targetSide===n.a.TURN_DIRECTION.LEFT?0:180,!1===o.isFlipping&&(e.needsFlip?(o.isFlipping=!0,o.isCover&&0===e.sheetNumber&&(i.isRTL?i.rightCover.isFlipping=!0:i.leftCover.isFlipping=!0),o.isCover&&i.totalSheets-e.sheetNumber==1&&(i.isRTL?i.leftCover.isFlipping=!0:i.rightCover.isFlipping=!0),o.element.position.z=Math.max(r<90?o.leftPos:o.rightPos,i.midPosition)+i.sheetDepth,o.flexibility=r<90?o.leftFlexibility:o.rightFlexibility,o.flip(r,t)):(o.skipFlip=!1,o.sheetAngle=o.curveAngle=t,o.flexibility=t<90?o.leftFlexibility:o.rightFlexibility,o.element.position.z=t<90?o.leftPos:o.rightPos,o.side=o.targetSide,o.height=t<90?this.leftSheetHeight:this.rightSheetHeight,o.width=t<90?this.leftSheetWidth:this.rightSheetWidth),o.updateAngle(),this.app.renderRequestStatus=v.REQUEST_STATUS.ON),o.element.visible=e.visible}},{key:"updateCenter",value:function(){var e=this,t=this.app,i=e.wrapper.position.x,n=e.centerShift*(this.isLeftPage()?this.leftSheetWidth:this.rightSheetWidth)/2;e.seamPosition=(-t.dimensions.offset.width+t.dimensions.containerWidth)/2+n,n!==e.centerEnd&&(e.centerTween&&e.centerTween.stop&&e.centerTween.stop(),e.onCenterStartAnimation(this),e.centerTween=new TWEEN.Tween({x:i}).delay(0).to({x:n},1===t.zoomValue&&!0!==e.skipCenterAnimation?e.app.options.duration:1).onStart((function(){})).onUpdate((function(){e.onCenterUpdateAnimation(this)})).onComplete((function(){e.onCenterCompleteAnimation(this)})).onStop((function(){e.onCenterStopAnimation(this)})).easing(TWEEN.Easing.Cubic.InOut).start(),this.updatePendingStatusClass(),e.skipCenterAnimation=!1,e.centerEnd=n),e.renderRequestStatus=v.REQUEST_STATUS.ON,this.zoomViewer.updateCenter()}},{key:"onCenterUpdateAnimation",value:function(e){this.wrapper.position.x=e.x,this.stage&&this.stage.cssScene&&(this.stage.cssScene.position.x=e.x)}},{key:"onCenterStartAnimation",value:function(e){}},{key:"onCenterStopAnimation",value:function(e){}},{key:"onCenterCompleteAnimation",value:function(e){}},{key:"flipCover",value:function(e){var t,i,n=null;0===e.pageNumber||this.isBooklet&&1===e.pageNumber?(n=this.isRTL?this.rightCover:this.leftCover,t=this.isRTL?1:-1):e.pageNumber===this.totalSheets-1&&(n=this.isRTL?this.leftCover:this.rightCover,t=this.isRTL?-1:1),null!==n&&(i=n.depth+e.depth+1,n.sheetAngle=e.sheetAngle,n.curveAngle=e.curveAngle,this.rightCover.height=this.leftCover.height=e.height+2*this.coverExtraWidth,this.rightCover.width=this.leftCover.width=e.width+this.coverExtraWidth,n.flexibility=e.flexibility,n.element.position.x=t*Math.sin(e.sheetAngle*Math.PI/180)*i,n.element.position.z=e.element.position.z+t*Math.cos(e.sheetAngle*Math.PI/180)*i,this.rightCover.updateAngle(),this.leftCover.updateAngle())}},{key:"pagesReady",value:function(){if(!this.isAnimating()){if(!1===this.app.options.flipbookFitPages){var e=this.app.viewer.getBasePage(),t=this.leftViewport=this.getViewPort(e+(this.isBooklet?0:this.isRTL?1:0)),i=this.rightViewPort=this.getViewPort(e+(this.isBooklet||this.isRTL?0:1));if(t){var n=m.contain(100*t.width,100*t.height,this.availablePageWidth(),this.availablePageHeight());this.leftSheetWidth=Math.floor(n.width),this.leftSheetHeight=Math.floor(n.height)}if(i){var o=m.contain(100*i.width,100*i.height,this.availablePageWidth(),this.availablePageHeight());this.rightSheetWidth=Math.floor(o.width),this.rightSheetHeight=Math.floor(o.height)}for(var a=0;a<this.sheets.length;a++){var r=this.sheets[a];r.side===v.TURN_DIRECTION.LEFT?(r.height=this.leftSheetHeight,r.width=this.leftSheetWidth,r.updateAngle()):(r.height=this.rightSheetHeight,r.width=this.rightSheetWidth,r.updateAngle())}if(this.isClosedPage()){var s=this.isRTL&&this.isLastPage()||!this.isRTL&&this.isFirstPage();this.leftCover.width=this.rightCover.width=s?this.rightSheetWidth:this.leftSheetWidth,this.leftCover.height=this.rightCover.height=s?this.rightSheetHeight:this.leftSheetHeight}else this.leftCover.height=this.rightCover.height=2*this.coverExtraWidth+Math.max(this.leftSheetHeight,this.rightSheetHeight),this.leftCover.width=this.coverExtraWidth+this.leftSheetWidth,this.rightCover.width=this.coverExtraWidth+this.rightSheetWidth;this.leftSheets.width=this.leftSheetWidth,this.leftSheets.height=this.leftSheetHeight,this.rightSheets.height=this.rightSheetHeight,this.rightSheets.width=this.rightSheetWidth,this.leftCover.updateAngle(),this.leftSheets.updateAngle(),this.rightCover.updateAngle(),this.rightSheets.updateAngle()}this.updateCenter(),this.updateCSSLayer(),this.updatePendingStatusClass()}}},{key:"updateCSSLayer",value:function(){var e,t=this,i=t.getBasePage(),n=i+(t.isBooklet?0:t.isRTL?1:0),o=i+(t.isBooklet||this.isRTL?0:1),a=!this.isRTL&&t.isBooklet?void 0:t.getPageByNumber(n),r=this.isRTL&&t.isBooklet?void 0:t.getPageByNumber(o);if(jQuery(t.stage.cssRenderer.domElement).find(".df-page-content").css({display:"none"}),this.leftViewport&&null!=a&&a.sheet.element.visible){var s=a.cssPage;if(null!=s){var l=a.sheet.element.geometry.boundingBox;e=Math.abs(l.max.x-l.min.x)*a.sheet.element.scale.x,s.rotation.y=0,s.position.z=0,s.position.x=0,jQuery(s.element).css({width:e,height:a.sheet.height,left:-e/2,display:"block"}),this.resizeAnnotations(n)}}if(this.rightViewPort&&null!=r&&r.sheet.element.visible){var u=r.cssPage;if(null!=u){var h=r.sheet.element.geometry.boundingBox;e=Math.abs(h.max.x-h.min.x)*r.sheet.element.scale.x,u.rotation.y=0,u.position.z=0,u.position.x=0,jQuery(u.element).css({width:e,height:r.sheet.height,left:e/2,display:"block"}),this.resizeAnnotations(o)}}}},{key:"mouseMove",value:function(e){if(e=m.fixMouseEvent(e),this.app.renderRequestStatus=v.REQUEST_STATUS.ON,null==e.touches||2!=e.touches.length){var t=this,i=t.eventToPoint(e);if(null!==t.dragSheet&&!1!==t.drag3D){var n=180*Math.acos(m.limitAt(1-(i.x-i.left)/this.leftSheetWidth,-1,1))/Math.PI,o=t.dragSheet,a=t.drag===v.TURN_DIRECTION.LEFT;o.sheetAngle=n;var r=a?m.limitAt(o.sheetAngle+45,0,180):m.limitAt(o.sheetAngle,0,180);o.curveAngle=o.isHard?o.sheetAngle:r*TWEEN.Easing.Sinusoidal.Out(.8*r/180),console.log("x:"+(1-(i.x-i.left)/this.leftSheetWidth)+"angle: "+n+" curveAngle:"+r),o.updateAngle()}t.checkSwipe(i,e)}else this.pinchMove(e)}},{key:"mouseUp",value:function(e){if((e=m.fixMouseEvent(e)).touches||0===e.button)if(null==e.touches||0!=e.touches.length){var t=this,i=t.eventToPoint(e);if(1===t.app.zoomValue){null!==t.dragSheet&&(i.x>t.app.dimensions.width/2?t.drag===v.TURN_DIRECTION.LEFT&&t.app.openLeft():t.drag===v.TURN_DIRECTION.RIGHT&&t.app.openRight(),t.requestRefresh());var n=e.target||e.originalTarget,o=t.startPoint&&i.x===t.startPoint.x&&i.y===t.startPoint.y&&"A"!==n.nodeName;!0===e.ctrlKey&&o?this.zoomOnPoint(i):o&&!0===i.isInsideSheet&&t.clickAction===v.MOUSE_CLICK_ACTIONS.NAV&&(i.isLeftSheet?t.app.openLeft():t.app.openRight())}t.dragSheet=null,t.drag=null,t.startPoint=null,t.canSwipe=!1,t.app.renderRequestStatus=v.REQUEST_STATUS.ON}else this.pinchUp(e)}},{key:"mouseDown",value:function(e){if((e=m.fixMouseEvent(e)).touches||0===e.button)if(null==e.touches||2!=e.touches.length){e=m.fixMouseEvent(e);var t=this,i=t.eventToPoint(e);t.startPoint=i,t.lastPos=i.x,i.isInsideDragZone&&!1!==t.drag3D?(t.dragSheet=i.sheet,t.drag=i.sheet.sheetAngle<90?v.TURN_DIRECTION.LEFT:v.TURN_DIRECTION.RIGHT):t.canSwipe=!0}else this.pinchDown(e)}},{key:"eventToPoint",value:function(e){var t=this,i=this.app.dimensions,n={x:(e=m.fixMouseEvent(e)).clientX,y:e.clientY};n.x=n.x-t.parentElement[0].getBoundingClientRect().left,n.y=n.y-t.parentElement[0].getBoundingClientRect().top;var o=(-i.offset.width+i.containerWidth)/2-i.stage.width/2,a=(-i.offset.width+i.containerWidth)/2+i.stage.width/2,r=i.padding.top,s=i.padding.top+t.availablePageHeight(),l=n.x<t.seamPosition,u=t.getBasePage()+(l?0:1),h=this.getPageByNumber(u);h&&(h=h.sheet);var c=n.x>o&&n.x<a&&n.y>r&&n.y<s;return{isInsideSheet:c,isInsideDragZone:c&&n.x-o<t.foldSense||a-n.x<t.foldSense,x:n.x,y:n.y,left:o,top:r,right:a,bottom:s,raw:n,isLeftSheet:l,sheet:h}}},{key:"checkPageLoading",value:function(){for(var e=!0,t=this.getVisiblePages().main,i=0;i<(this.isBooklet?1:2);i++){var n=this.getPageByNumber(t[i]);n&&(e=n.textureLoaded&&e)}this.element.toggleClass("df-loading",!e)}},{key:"textureLoadedCallback",value:function(e){this.app.renderRequestStart(),this.pagesReady()}},{key:"getTextureSize",value:function(e){var t=s(g(o.prototype),"getTextureSize",this).call(this,e);if(1!==this.app.zoomValue||!0===e.isAnnotation)return t;var i=m.nearestPowerOfTwo(t.height),n=t.width*i/t.height;return this.texturePowerOfTwo?{height:i,width:n}:t}},{key:"getPageByNumber",value:function(e){if(this.has3DCover){var t=!this.isBooklet&&e===this.app.pageCount&&e%2==0,i=1===e;if(!this.isRTL&&i||this.isRTL&&t)return this.leftCover.frontPage;if(!this.isRTL&&t||this.isRTL&&i)return this.rightCover.backPage}return s(g(o.prototype),"getPageByNumber",this).call(this,e)}},{key:"setPage",value:function(e){return s(g(o.prototype),"setPage",this).call(this,e)}},{key:"beforeFlip",value:function(){s(g(o.prototype),"beforeFlip",this).call(this)}},{key:"resizeAnnotations",value:function(e){var t=this.getAnnotationElement(e);if(!t||""===t.style.width){var i=this.getPageByNumber(e),n=s(g(o.prototype),"getViewPort",this).call(this,e);if(i&&n){n=n.clone({dontFlip:!0});var a=e+"|"+this.rightSheetHeight,r=i.cssPage;if(r.lastStamp!=a){var l=i.sheet.element.geometry.boundingBox,u=Math.abs(l.max.x-l.min.x)*i.sheet.element.scale.x,h=this.getDoublePageWidthFix(e)*u/n.width,c=i.sheet.height/n.height,p=r.element.querySelectorAll("section");p.length>0&&p.forEach((function(e){e.style.transform="matrix("+h+", 0, 0, "+c+","+n.transform[4]*h+","+n.transform[5]*c+")"})),this.app.provider.processTextContent(e,this.getTextElement(e,!0))}}}}},{key:"finalizeAnnotations",value:function(e,t){s(g(o.prototype),"finalizeAnnotations",this).call(this,e,t),this.resizeAnnotations(t)}}]),o}(o.a),w=function(e){c(i,e);var t=d(i);function i(e){var n;l(this,i);var o=f(n=t.call(this,e));return o.element=null,o.face=e.face,o.parent3D=e.sheet,o.sheet=e.sheet,o.cssPage=new THREE.CSS3DObject(o.contentLayer[0]),n}return h(i,[{key:"setLoading",value:function(){this.sheet.viewer.checkPageLoading()}},{key:"clearMap",value:function(){this.sheet.element.material[this.face].map=null,this.sheet.element.material[this.face].needsUpdate=!0}},{key:"loadTexture",value:function(e){var t=this,i=e.texture,n=e.callback;function o(i,o){t.updateTextureLoadStatus(!0),t.sheet.resetMatColor(t.face,e.texture===t.textureLoadFallback),"function"==typeof n&&n(e)}t.textureSrc=i,4===this.face?this.sheet.backImage(i,o):this.sheet.frontImage(i,o)}}]),i}(a.a),S={init:function(){if(!0!==S.initialized){var e=window.THREE;S={init:function(){},initialized:!0,GEOMETRY_TYPE:{PLANE:0,BOX:1,MODEL:2},MATERIAL_FACE:{FRONT:5,BACK:4},WHITE_COLOR:new e.Color("white"),defaults:{anisotropy:8,maxTextureSize:2048,groundTexture:"blank",color:16777215,shininess:15,width:210,height:297,depth:.2,segments:150,textureLoadFallback:"blank"},textureLoader:new e.TextureLoader,clearChild:function(e){var t,i=e.material;if(e.parent.remove(e),e.geometry=m.disposeObject(e.geometry),e=m.disposeObject(e),null!=i){if(null==i.length)i.map&&(t=i.map,i.dispose(),t.dispose()),i.bumpMap&&(t=i.bumpMap,i.dispose(),t.dispose());else for(var n=0;n<i.length;n++)i[n]&&(i[n].map&&(t=i[n].map,i[n].dispose(),t.dispose()),i[n].bumpMap&&(t=i[n].bumpMap,i[n].dispose(),t.dispose())),i[n]=null;i=null,t=null}},loadImage:function(t,i,n,o,a){if(null==i){var r=null==t.material[n]?null:t.material[n][o]?t.material[n][o].sourceFile:null;return null==r||r.indexOf("data:image")>-1?null:r}var s=null;return"CANVAS"===i.nodeName||"IMG"===i.nodeName?((s=new e.Texture(i)).needsUpdate=!0,S.loadTexture(s,t,o,n),"function"==typeof a&&a(t,s)):"blank"!==i?(s=null==i?null:S.textureLoader.load(i,(function(e){e.sourceFile=i,S.loadTexture(e,t,o,n),"function"==typeof a&&a(t,e)}),void 0,(function(){null==s.image&&S.loadImage(t,S.defaults.textureLoadFallback,n,o),S.loadTextureFailed()})))&&(s.mapping=e.UVMapping):(S.loadTexture(null,t,o,n),"function"==typeof a&&a(t,s)),0},loadTexture:function(t,i,n,o){if(t){var a=t.image;t.naturalWidth=a.naturalWidth,t.naturalHeight=a.naturalHeight,t.needsUpdate=!0}null!==t&&"map"===n&&(t.anisotropy=0,S.defaults.anisotropy>0&&(t.anisotropy=S.defaults.anisotropy),!0===e.skipPowerOfTwo&&(t.minFilter=e.LinearFilter,t.magFilter=e.LinearFilter),t.name=(new Date).toTimeString()),S.clearTexture(i.material[o][n]),i.material[o][n]=t,"bumpMap"===n&&(i.material[o].bumpScale=i.sheet.getBumpScale(o)),i.material[o].needsUpdate=!0},loadTextureFailed:function(){return null},clearTexture:function(e){e&&(e.image&&"CANVAS"===e.image.nodeName&&(e.image.remove&&e.image.remove(),delete e.image),e=m.disposeObject(e))}},e.skipPowerOfTwo=!0;var t=function(t){c(n,t);var i=d(n);function n(t){var o;l(this,n);var a=t.width||S.defaults.width,r=t.height||S.defaults.height,s=t.color||S.defaults.color,u=t.segments||S.defaults.segments,h=t.depth||S.defaults.depth,c={color:s,flatShading:!1,shininess:t.shininess||S.defaults.shininess},p=new e.MeshPhongMaterial(c),d=[p,p,p,p,new e.MeshPhongMaterial(c),new e.MeshPhongMaterial(c)];return(o=i.call(this,new e.BoxGeometry(a,r,h,u,1,1),d)).material[5].transparent=!0,o.material[4].transparent=!0,o.baseType="Paper",o.type="Paper",o.castShadow=!0,o.receiveShadow=!0,t.parent3D.add(f(o)),o}return h(n,[{key:"frontImage",value:function(e,t){S.loadImage(this,e,S.MATERIAL_FACE.FRONT,"map",t)}},{key:"backImage",value:function(e,t){S.loadImage(this,e,S.MATERIAL_FACE.BACK,"map",t)}},{key:"loadBump",value:function(e){S.loadImage(this,e,S.MATERIAL_FACE.FRONT,"bumpMap",null),S.loadImage(this,e,S.MATERIAL_FACE.BACK,"bumpMap",null)}}]),n}(e.Mesh),i=function(e){c(i,e);var t=d(i);function i(e){var n;return l(this,i),(n=t.call(this,e)).receiveShadow=!0,n.frontImage(S.defaults.groundTexture),n.backImage(S.defaults.groundTexture),n.type="Ground",n}return i}(t),n=function(t){c(o,t);var n=d(o);function o(t){var a;l(this,o);var r=f(a=n.call(this));r.canvas=t.canvas||document.createElement("canvas"),r.canvas=jQuery(a.canvas),r.camera=new e.PerspectiveCamera(20,r.width/r.height,4,5e4),r.renderer=new e.WebGLRenderer({canvas:r.canvas[0],antialias:!0,alpha:!0}),r.renderer.setPixelRatio(t.pixelRatio),r.renderer.setSize(r.width,r.height),r.renderer.setClearColor(16777215,0),(r.orbitControl=new e.OrbitControls(r.camera,r.renderer.domElement)).maxPolarAngle=Math.PI,r.renderer.shadowMap.enabled=!0,r.renderer.shadowMap.type=1,r.ground=new i({color:16777215,height:r.camera.far/10,width:r.camera.far/10,segments:2,parent3D:r}),r.ambientLight=new e.AmbientLight(4473924),r.add(r.ambientLight);var s=r.spotLight=new e.DirectionalLight(16777215,.25);return s.position.set(0,1,0),!1!==t.castShadow&&(s.castShadow=!0,s.shadow.camera.near=200,s.shadow.camera.far=2e3,s.shadow.camera.top=1350,s.shadow.camera.bottom=-1350,s.shadow.camera.left=-1350,s.shadow.camera.right=1350,s.shadow.radius=2,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024),r.add(s),r.animateCount=0,r.renderCount=0,r.camera.position.set(-300,300,300),r.camera.lookAt(new e.Vector3(0,0,0)),r.orbitControl.center.set(0,0,0),r.orbitControl.update(),a}return h(o,[{key:"resizeCanvas",value:function(e,t){this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"render",value:function(){this.animateCount++,this.renderer.render(this,this.camera),null!=this.stats&&this.stats.update()}},{key:"clearMaterials",value:function(){for(var e=this.children.length-1;e>=0;e--){var t=this.children[e];if(t.baseType&&"Paper"===t.baseType&&t.material)if(t.material.length)for(var i=0;i<t.material.length;i++)t.material[i].needsUpdate=!0;else t.material.needsUpdate=!0}}},{key:"clearChild",value:function(){this.spotLight.shadow.map=m.disposeObject(this.spotLight.shadow.map),this.spotLight.castShadow=!1,this.clearMaterials();for(var e=this.children.length-1;e>=0;e--){var t=this.children[e];if(t.children&&t.children.length>0)for(var i=t.children.length-1;i>=0;i--)S.clearChild(t.children[i]);S.clearChild(t),t=null}this.render()}}]),o}(e.Scene);S.Paper=t,S.Stage=n,e.OrbitControls=function(t,i){this.object=t,this.domElement=null!=i?i:document,this.enabled=!0,this.target=new e.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT};var n,o,a=this,r=1e-6,s=new e.Vector2,l=new e.Vector2,u=new e.Vector2,h=new e.Vector2,c=new e.Vector2,p=new e.Vector2,d=new e.Vector3,f=new e.Vector3,g=new e.Vector2,v=new e.Vector2,m=new e.Vector2,y=0,b=0,w=1,S=new e.Vector3,P=new e.Vector3,C=new e.Quaternion,x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},T=x.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var E=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),k="function"==typeof E.inverse?E.clone().inverse():E.clone().invert(),O={type:"change"},R={type:"start"},L={type:"end"};function N(){return 2*Math.PI/60/60*a.autoRotateSpeed}function A(){return Math.pow(.95,a.zoomSpeed)}function I(e){if(!1!==a.enabled){if(e.preventDefault(),e.button===a.mouseButtons.ORBIT){if(!0===a.noRotate)return;T=x.ROTATE,s.set(e.clientX,e.clientY)}else if(e.button===a.mouseButtons.ZOOM){if(!0===a.noZoom)return;T=x.DOLLY,g.set(e.clientX,e.clientY)}else if(e.button===a.mouseButtons.PAN){if(!0===a.noPan)return;T=x.PAN,h.set(e.clientX,e.clientY)}T!==x.NONE&&(document.addEventListener("mousemove",_,!1),document.addEventListener("mouseup",M,!1),document.addEventListener("mouseout",M,!1),a.dispatchEvent(R))}}function _(e){if(!1!==a.enabled){e.preventDefault();var t=a.domElement===document?a.domElement.body:a.domElement;if(T===x.ROTATE){if(!0===a.noRotate)return;l.set(e.clientX,e.clientY),u.subVectors(l,s),a.rotateLeft(2*Math.PI*u.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*u.y/t.clientHeight*a.rotateSpeed),s.copy(l)}else if(T===x.DOLLY){if(!0===a.noZoom)return;v.set(e.clientX,e.clientY),m.subVectors(v,g),m.y>0?a.dollyIn():m.y<0&&a.dollyOut(),g.copy(v)}else if(T===x.PAN){if(!0===a.noPan)return;c.set(e.clientX,e.clientY),p.subVectors(c,h),a.pan(p.x,p.y),h.copy(c)}T!==x.NONE&&a.update()}}function M(){!1!==a.enabled&&(document.removeEventListener("mousemove",_,!1),document.removeEventListener("mouseup",M,!1),document.removeEventListener("mouseout",M,!1),a.dispatchEvent(L),T=x.NONE)}function F(e){if(!1!==a.enabled&&!0!==a.noZoom&&T===x.NONE){e.preventDefault(),e.stopPropagation();var t=0;null!=e.wheelDelta?t=e.wheelDelta:null!=e.detail&&(t=-e.detail),t>0?a.dollyOut():t<0&&a.dollyIn(),a.update(),a.dispatchEvent(R),a.dispatchEvent(L),a.zoomCallback&&a.zoomCallback()}}function z(e){if(!1!==a.enabled&&!0!==a.noKeys&&!0!==a.noPan)switch(e.keyCode){case a.keys.UP:a.pan(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:a.pan(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:a.pan(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:a.pan(-a.keyPanSpeed,0),a.update()}}function D(t){if(!1!==a.enabled){var i=t.touches.length;switch(a.mouseButtons.PAN===e.MOUSE.LEFT&&(i=3),i){case 4:if(!0===a.noRotate)return;T=x.TOUCH_ROTATE,s.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!0===a.noZoom)return;T=x.TOUCH_DOLLY;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(n*n+o*o);g.set(0,r);break;case 3:if(!0===a.noPan)return;T=x.TOUCH_PAN,h.set(t.touches[0].pageX,t.touches[0].pageY);break;default:T=x.NONE}T!==x.NONE&&a.dispatchEvent(R)}}function j(t){if(!1!==a.enabled){var i=a.domElement===document?a.domElement.body:a.domElement,n=t.touches.length;switch(a.mouseButtons.PAN===e.MOUSE.LEFT&&(n=3),n){case 4:if(!0===a.noRotate)return;if(T!==x.TOUCH_ROTATE)return;t.preventDefault(),t.stopPropagation(),l.set(t.touches[0].pageX,t.touches[0].pageY),u.subVectors(l,s),a.rotateLeft(2*Math.PI*u.x/i.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*u.y/i.clientHeight*a.rotateSpeed),s.copy(l),a.update();break;case 2:if(!0===a.noZoom)return;if(T!==x.TOUCH_DOLLY)return;t.preventDefault(),t.stopPropagation();var o=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,d=Math.sqrt(o*o+r*r);v.set(0,d),m.subVectors(v,g),m.y>0?a.dollyOut():m.y<0&&a.dollyIn(),g.copy(v),a.update();break;case 3:if(!0===a.noPan)return;if(T!==x.TOUCH_PAN)return;t.preventDefault(),t.stopPropagation(),c.set(t.touches[0].pageX,t.touches[0].pageY),p.subVectors(c,h),a.pan(p.x,p.y),h.copy(c),a.update();break;default:T=x.NONE}}}function B(){!1!==a.enabled&&(a.dispatchEvent(L),T=x.NONE)}function U(e){e.preventDefault()}this.rotateLeft=function(e){null==e&&(e=N()),b-=e},this.rotateUp=function(e){null==e&&(e=N()),y-=e},this.rotateTo=function(e){y=e-o},this.panLeft=function(e){var t=this.object.matrix.elements;d.set(t[0],t[1],t[2]),d.multiplyScalar(-e),S.add(d)},this.panUp=function(e){var t=this.object.matrix.elements;d.set(t[4],t[5],t[6]),d.multiplyScalar(e),S.add(d)},this.pan=function(t,i){var n=a.domElement===document?a.domElement.body:a.domElement;if(a.object instanceof e.PerspectiveCamera){var o=a.object.position.clone().sub(a.target).length();o*=Math.tan(a.object.fov/2*Math.PI/180),a.panLeft(2*t*o/n.clientHeight),a.panUp(2*i*o/n.clientHeight)}else a.object instanceof e.OrthographicCamera?(a.panLeft(t*(a.object.right-a.object.left)/n.clientWidth),a.panUp(i*(a.object.top-a.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){null==t&&(t=A()),a.object instanceof e.PerspectiveCamera?w/=t:a.object instanceof e.OrthographicCamera?(a.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),a.object.updateProjectionMatrix(),a.dispatchEvent(O)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){null==t&&(t=A()),a.object instanceof e.PerspectiveCamera?w*=t:a.object instanceof e.OrthographicCamera?(a.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),a.object.updateProjectionMatrix(),a.dispatchEvent(O)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var e=this.object.position;f.copy(e).sub(this.target),f.applyQuaternion(E),n=Math.atan2(f.x,f.z),o=Math.atan2(Math.sqrt(f.x*f.x+f.z*f.z),f.y),this.autoRotate&&T===x.NONE&&this.rotateLeft(N()),n+=b,o+=y,n=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,n)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(r,Math.min(Math.PI-r,o));var t=f.length()*w;t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(S),f.x=t*Math.sin(o)*Math.sin(n),f.y=t*Math.cos(o),f.z=t*Math.sin(o)*Math.cos(n),f.applyQuaternion(k),e.copy(this.target).add(f),this.object.lookAt(this.target),b=0,y=0,w=1,S.set(0,0,0),(P.distanceToSquared(this.object.position)>r||8*(1-C.dot(this.object.quaternion))>r)&&(this.dispatchEvent(O),P.copy(this.object.position),C.copy(this.object.quaternion))},this.reset=function(){T=x.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(O),this.update()},this.getPolarAngle=function(){return o},this.getAzimuthalAngle=function(){return n},this.dispose=function(){this.domElement.removeEventListener("contextmenu",U,!1),this.domElement.removeEventListener("mousedown",I,!1),this.domElement.removeEventListener("mousewheel",F,!1),this.domElement.removeEventListener("DOMMouseScroll",F,!1),this.domElement.removeEventListener("touchstart",D,!1),this.domElement.removeEventListener("touchend",B,!1),this.domElement.removeEventListener("touchmove",j,!1),window.removeEventListener("keydown",z,!1)},this.domElement.addEventListener("contextmenu",U,!1),this.domElement.addEventListener("mousedown",I,!1),this.domElement.addEventListener("mousewheel",F,!1),this.domElement.addEventListener("DOMMouseScroll",F,!1),this.domElement.addEventListener("touchstart",D,!1),this.domElement.addEventListener("touchend",B,!1),this.domElement.addEventListener("touchmove",j,!1),window.addEventListener("keydown",z,!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls;var o=function(e){c(i,e);var t=d(i);function i(e){var n;return l(this,i),(n=t.call(this)).element=e,n.element.style.position="absolute",n.addEventListener("removed",(function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})),n}return i}(e.Object3D);e.CSS3DObject=o;var a=function(e){c(i,e);var t=d(i);function i(e){return l(this,i),t.call(this,e)}return i}(e.CSS3DObject);e.CSS3DSprite=a,e.MathUtils&&(e.Math=e.MathUtils),e.CSS3DRenderer=function(){var t,i,n,o;m.log("THREE.CSS3DRenderer",e.REVISION);var a=new e.Matrix4,r={camera:{fov:0,style:""},objects:{}},s=document.createElement("div");s.style.overflow="hidden",s.style.WebkitTransformStyle="preserve-3d",s.style.MozTransformStyle="preserve-3d",s.style.oTransformStyle="preserve-3d",s.style.transformStyle="preserve-3d",this.domElement=s;var l=document.createElement("div");l.style.WebkitTransformStyle="preserve-3d",l.style.MozTransformStyle="preserve-3d",l.style.oTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",s.appendChild(l),this.setClearColor=function(){},this.getSize=function(){return{width:t,height:i}},this.setSize=function(e,a){n=(t=e)/2,o=(i=a)/2,s.style.width=e+"px",s.style.height=a+"px",l.style.width=e+"px",l.style.height=a+"px"};var u=function(e){return Math.abs(e)<Number.EPSILON?0:e},h=function(e){var t=e.elements;return"matrix3d("+u(t[0])+","+u(-t[1])+","+u(t[2])+","+u(t[3])+","+u(t[4])+","+u(-t[5])+","+u(t[6])+","+u(t[7])+","+u(t[8])+","+u(-t[9])+","+u(t[10])+","+u(t[11])+","+u(t[12])+","+u(-t[13])+","+u(t[14])+","+u(t[15])+")"},c=function(e){var t=e.elements;return"translate3d(-50%,-50%,0) matrix3d("+u(t[0])+","+u(t[1])+","+u(t[2])+","+u(t[3])+","+u(-t[4])+","+u(-t[5])+","+u(-t[6])+","+u(-t[7])+","+u(t[8])+","+u(t[9])+","+u(t[10])+","+u(t[11])+","+u(t[12])+","+u(t[13])+","+u(t[14])+","+u(t[15])+")"},p=function t(i,n){if(i instanceof e.CSS3DObject){var o;i instanceof e.CSS3DSprite?(a.copy(n.matrixWorldInverse),a.transpose(),a.copyPosition(i.matrixWorld),a.scale(i.scale),a.elements[3]=0,a.elements[7]=0,a.elements[11]=0,a.elements[15]=1,o=c(a)):o=c(i.matrixWorld);var s=i.element,u=r.objects[i.id];void 0!==u&&u===o||(s.style.WebkitTransform=o,s.style.MozTransform=o,s.style.oTransform=o,s.style.transform=o,r.objects[i.id]=o),s.parentNode!==l&&l.appendChild(s)}for(var h=0,p=i.children.length;h<p;h++)t(i.children[h],n)};this.render=function(t,a){var u=.5/Math.tan(e.Math.degToRad(.5*a.fov))*i;r.camera.fov!==u&&(s.style.WebkitPerspective=u+"px",s.style.MozPerspective=u+"px",s.style.oPerspective=u+"px",s.style.perspective=u+"px",r.camera.fov=u),t.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),a.matrixWorldInverse.invert?a.matrixWorldInverse.copy(a.matrixWorld).invert():a.matrixWorldInverse.getInverse(a.matrixWorld);var c="translate3d(0,0,"+u+"px)"+h(a.matrixWorldInverse)+" translate3d("+n+"px,"+o+"px, 0)";r.camera.style!==c&&(l.style.WebkitTransform=c,l.style.MozTransform=c,l.style.oTransform=c,l.style.transform=c,r.camera.style=c),p(t,a)}}}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i(0);i(11);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,r=void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===o(r)?r:String(r)),n)}var a,r}function s(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}n.a;var l=n.a.utils,u=n.a.REQUEST_STATUS,h=function(){function e(t,i){a(this,e),this.options=t,this.app=i,this.parentElement=this.app.container,this.element=jQuery("<div>",{class:"df-ui"}),this.parentElement.append(this.element),this.events={},this.controls={}}return s(e,[{key:"init",value:function(){var e=this,t="<div>",i=this.app,a=this.controls,r=i.options.text,s=i.options.icons;e.createLogo(),this.openRight=a.openRight=jQuery(t,{class:"df-ui-nav df-ui-next",title:i.isRTL?r.previousPage:r.nextPage,html:'<div class="df-ui-btn '+s.next+'"</div>'}).on("click",(function(){i.openRight()})),this.openLeft=a.openLeft=jQuery(t,{class:"df-ui-nav df-ui-prev",title:i.isRTL?r.nextPage:r.previousPage,html:'<div class="df-ui-btn '+s.prev+'"</div>'}).on("click",(function(){i.openLeft()})),1==i.options.autoPlay&&(this.play=a.play=l.createBtn("play",s.play,r.play).on("click",(function(){var e=jQuery(this);i.setAutoPlay(!e.hasClass(i.options.icons.pause))})),i.setAutoPlay(i.options.autoPlayStart)),this.pageNumber=a.pageNumber=l.createBtn("page").on("change",(function(){var e=parseInt(a.pageInput.val(),10);e=i.getValidPage(e),i.gotoPage(e)})).on("keyup",(function(e){if(13===e.keyCode){var t=parseInt(a.pageInput.val(),10);(t=i.getValidPage(t))!==i.currentPageNumber&&i.gotoPage(t)}}));var h="df_book_page_number_"+Math.ceil(performance.now()/10);this.pageInput=a.pageInput=jQuery('<input id="'+h+'" type="text"/>').appendTo(a.pageNumber),this.pageLabel=a.pageLabel=jQuery('<label for="'+h+'"></label>').appendTo(a.pageNumber),this.thumbnail=a.thumbnail=l.createBtn("thumbnail",s.thumbnail,r.toggleThumbnails),a.thumbnail.on("click",(function(){var t=jQuery(this);null==i.thumblist&&i.initThumbs(),i.thumbContainer.toggleClass("df-sidemenu-visible"),t.toggleClass("df-active"),t.hasClass("df-active")&&(t.siblings(".df-active").trigger("click"),i.thumbRequestStatus=u.ON),e.update(),!1===i.options.sideMenuOverlay&&i.resizeRequestStart()})).addClass("df-sidemenu-trigger"),i.hasOutline()&&(this.outline=a.outline=l.createBtn("outline",s.outline,r.toggleOutline),a.outline.on("click",(function(){var t=jQuery(this);if(null==i.outlineViewer&&i.initOutline(),i.outlineContainer){var n=i.outlineContainer;t.toggleClass("df-active"),n.toggleClass("df-sidemenu-visible"),t.hasClass("df-active")&&t.siblings(".df-active").trigger("click"),e.update(),!1===i.options.sideMenuOverlay&&i.resizeRequestStart()}})).addClass("df-sidemenu-trigger"));var p=e.element;if(this.zoomIn=a.zoomIn=l.createBtn("zoomin",s.zoomin,r.zoomIn).on("click",(function(){i.zoom(1),e.update()})),this.zoomOut=a.zoomOut=l.createBtn("zoomout",s.zoomout,r.zoomOut).on("click",(function(){i.zoom(-1),e.update()})),this.resetZoom=a.resetZoom=l.createBtn("resetzoom",s.resetzoom,r.resetZoom).on("click",(function(){i.resetZoom(-1),e.update()})),i.viewer.isFlipBook){var d=i.viewer.pageMode===n.a.FLIPBOOK_PAGE_MODE.SINGLE;this.pageMode=a.pageMode=l.createBtn("pagemode",s[d?"doublepage":"singlepage"],d?r.doublePageMode:r.singlePageMode).on("click",(function(){var e=jQuery(this);i.viewer.setPageMode({isSingle:!e.hasClass(s.doublepage)}),i.viewer.pageMode===n.a.FLIPBOOK_PAGE_MODE.DOUBLE?a.pageMode.removeClass(s.doublepage).addClass(s.singlepage).attr("title",r.singlePageMode).html("<span>"+r.singlePageMode+"</span>"):a.pageMode.addClass(s.doublepage).removeClass(s.singlepage).attr("title",r.doublePageMode).html("<span>"+r.doublePageMode+"</span>")}))}else this.pageFit=a.pageFit=l.createBtn("pagefit",s.pagefit,r.pageFit).on("click",(function(){var e=a.pageFit;!0===!e.hasClass(s.widthfit)?(e.addClass(s.widthfit),e.html("<span>"+r.widthFit+"</span>"),e.attr("title",r.widthFit)):(e.removeClass(s.widthfit),e.html("<span>"+r.pageFit+"</span>"),e.attr("title",r.pageFit))}));if(e.shareBox=new c(i.container,i.options),this.share=a.share=l.createBtn("share",s.share,r.share).on("click",(function(){!0===e.shareBox.isOpen?e.shareBox.close():(e.shareBox.update(i.getURLHash()),e.shareBox.show())})),this.more=a.more=l.createBtn("more",s.more).on("click",(function(t){!0!==e.moreContainerOpen&&(jQuery(this).addClass("df-active"),e.moreContainerOpen=!0,t.stopPropagation())})),this.startPage=a.startPage=l.createBtn("start",s.start,r.gotoFirstPage).on("click",(function(){i.start()})),this.endPage=a.endPage=l.createBtn("end",s.end,r.gotoLastPage).on("click",(function(){i.end()})),this.print=a.print=l.createBtn("print",s.print,r.print).on("click",(function(){i.print()})),!0===i.options.showDownloadControl){var f="df-ui-btn df-ui-download "+s.download;this.download=a.download=jQuery('<a download target="_blank" class="'+f+'"><span>'+r.downloadPDFFile+"</span></a>"),a.download.attr("href",l.httpsCorrection(i.options.source)).attr("title",r.downloadPDFFile)}e.moreContainer=jQuery(t,{class:"df-more-container"}),a.more.append(e.moreContainer),!0===i.options.isLightBox&&!0!==i.fullscreenSupported||(this.fullScreen=a.fullScreen=l.createBtn("fullscreen",s.fullscreen,r.toggleFullscreen).on("click",i.switchFullscreen.bind(i))),i.viewer.initCustomControls();var g=i.options.allControls.replace(/ /g,"").split(","),v=","+i.options.moreControls.replace(/ /g,"")+",",m=","+i.options.hideControls.replace(/ /g,"")+",";m+=",";for(var y=0;y<g.length;y++){var b=g[y];if(m.indexOf(","+b+",")<0){var w=a[b];null!=w&&"object"==o(w)&&(v.indexOf(","+b+",")>-1&&"more"!==b&&"pageNumber"!==b?e.moreContainer.append(w):p.append(w))}}0==e.moreContainer.children().length&&this.more.addClass("df-hidden"),i.container.append(p),i.container.append(a.openLeft),i.container.append(this.controls.openRight),window.addEventListener("click",e.events.closePanels=e.closePanels.bind(e),!1),window.addEventListener("keyup",e.events.keyup=e.keyUp.bind(e),!1),document.addEventListener("fullscreenchange",e.events.fullscreenChange=e.fullscreenChange.bind(e),!1),!0===i.options.autoOpenThumbnail&&e.controls.thumbnail.trigger("click"),i.hasOutline()&&!0===i.options.autoOpenOutline&&e.controls.outline.trigger("click"),i.executeCallback("onCreateUI")}},{key:"closePanels",value:function(e){var t;!0===this.moreContainerOpen&&(null===(t=this.controls.more)||void 0===t||t.removeClass("df-active"),this.moreContainerOpen=!1)}},{key:"fullscreenChange",value:function(e){void 0===l.getFullscreenElement()&&!0===this.app.isFullscreen&&this.app.switchFullscreen()}},{key:"keyUp",value:function(e){var t=this.app;switch(e.keyCode){case 27:n.a.activeLightBox&&n.a.activeLightBox.app&&!l.isChromeExtension()&&n.a.activeLightBox.closeButton.trigger("click");break;case 37:!0!==t.isFullscreen&&!0!==t.options.isLightBox||t.options.arrowKeysAction!==n.a.ARROW_KEYS_ACTIONS.NAV||t.openLeft();break;case 39:!0!==t.isFullscreen&&!0!==t.options.isLightBox||t.options.arrowKeysAction!==n.a.ARROW_KEYS_ACTIONS.NAV||t.openRight()}}},{key:"createLogo",value:function(){var e=this.app,t=null;e.options.logo.indexOf("<")>-1?t=jQuery(e.options.logo).addClass("df-logo df-logo-html"):e.options.logo.trim().length>2&&(t=jQuery('<a class="df-logo df-logo-img" target="_blank" href="'+e.options.logoUrl+'"><img alt="" src="'+e.options.logo+'"/>')),this.element.append(t)}},{key:"dispose",value:function(){var e=this;for(var t in this.controls)if(this.controls.hasOwnProperty(t)){var i=this.controls[t];null!==i&&"object"==o(i)&&i.off().remove()}e.element.remove(),e.shareBox=l.disposeObject(e.shareBox),window.removeEventListener("click",e.events.closePanels,!1),window.removeEventListener("keyup",e.events.keyup,!1),document.removeEventListener("fullscreenchange",e.events.fullscreenChange,!1)}},{key:"update",value:function(){var e=this.app,t=this.controls;!0!==this._pageLabelWidthSet&&(this.pageLabel.width(""),this.pageLabel.html("88888888888".substring(0,2*e.pageCount.toString().length+3)),this.pageNumber.width(this.pageLabel.width()),this.pageLabel.width(this.pageLabel.width()),this.pageLabel.html(""),this._pageLabelWidthSet=!0),t.pageLabel.html(e.currentPageNumber+"/"+e.pageCount),t.pageInput.val(e.currentPageNumber),e.container.toggleClass("df-sidemenu-open",e.container.find(".df-sidemenu-visible").length>0),t.zoomIn.toggleClass("disabled",e.zoomValue===e.viewer.maxZoom),t.zoomOut.toggleClass("disabled",e.zoomValue===e.viewer.minZoom);var i=e.isRTL,n=e.currentPageNumber===e.startPage,o=e.currentPageNumber===e.endPage,a=n&&!i||o&&i,r=o&&!i||n&&i;t.openRight.toggleClass("df-hidden",r),t.openLeft.toggleClass("df-hidden",a),e.viewer.afterControlUpdate()}}]),e}(),c=function(){function e(t,i){a(this,e);var n=this;n.isOpen=!1,n.shareUrl="",n.init(t,i)}return s(e,[{key:"init",value:function(e,t){var i=this;for(var n in i.wrapper=jQuery('<div class="df-share-wrapper" style="display: none;">').on("click",(function(){i.close()})),i.box=jQuery('<div class="df-share-box">'),i.box.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),i.box.appendTo(i.wrapper).html('<span class="df-share-title">'+t.text.share+"</span>"),i.urlInput=jQuery('<textarea class="df-share-url">').on("click",(function(){jQuery(this).select()})),i.box.append(i.urlInput),t.share)t.share.hasOwnProperty(n)&&function(){var e=t.share[n];null!==e&&(i[n]=jQuery("<div>",{class:"df-share-button df-share-"+n+" "+t.icons[n]}).on("click",(function(t){t.preventDefault(),window.open(e.replace("{{url}}",encodeURIComponent(i.shareUrl)),"Sharer","width=500,height=400"),t.stopPropagation()})),i.box.append(i[n]))}();jQuery(e).append(i.wrapper)}},{key:"show",value:function(){this.wrapper.fadeIn(300),this.urlInput.val(this.shareUrl),this.urlInput.trigger("click"),this.isOpen=!0}},{key:"dispose",value:function(){var e=this;for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].off&&e[t].off();e.wrapper.remove()}},{key:"close",value:function(){this.wrapper.fadeOut(300),this.isOpen=!1}},{key:"update",value:function(e){this.shareUrl=e}}]),e}(),p=function(){function e(t){a(this,e),this.duration=300;var i=this;return i.lightboxWrapper=jQuery("<div>").addClass("df-lightbox-wrapper"),i.element=jQuery("<div>").addClass("df-app").appendTo(i.lightboxWrapper),i.controls=jQuery("<div>").addClass("df-lightbox-controls").appendTo(i.lightboxWrapper),i.closeButton=jQuery("<div>").addClass("df-lightbox-close df-ui-btn "+n.a.defaults.icons.close).on("click",(function(){i.close(t)})).appendTo(i.controls),i.lightboxWrapper.append(i.element),i}return s(e,[{key:"show",value:function(e){return 0===this.lightboxWrapper.parent().length&&jQuery("body").append(this.lightboxWrapper),jQuery("html,body").addClass("df-lightbox-open"),this.lightboxWrapper.fadeIn(this.duration),"function"==typeof e&&e(),this}},{key:"close",value:function(e){return this.lightboxWrapper.fadeOut(this.duration),Array.prototype.forEach.call(n.a.utils.getSharePrefixes(),(function(e){0===window.location.hash.indexOf("#"+e)&&(window.location.hash="#_")})),"function"==typeof e&&setTimeout(e,this.duration),jQuery("html,body").removeClass("df-lightbox-open"),this.element.attr("class","df-app").attr("style",""),this}}]),e}(),d=function(){function e(t,i){a(this,e),this.options=t,this.app=i,this.parentElement=t.parentElement,this.element=jQuery("<div>",{class:"df-sidemenu-wrapper"}),this.parentElement.append(this.element),this.buttons=jQuery("<div>",{class:"df-sidemenu-buttons df-ui-wrapper"}).appendTo(this.element),this.close=l.createBtn("close",i.options.icons.close,i.options.text.close),this.buttons.append(this.close)}return s(e,[{key:"dispose",value:function(){this.element.remove()}}]),e}(),f=function(){function e(t){a(this,e),this.outline=null,this.lastToggleIsShow=!0,this.container=t.container,this.linkService=t.linkService,this.outlineItemClass=t.outlineItemClass||"outlineItem",this.outlineToggleClass=t.outlineToggleClass||"outlineItemToggler",this.outlineToggleHiddenClass=t.outlineToggleHiddenClass||"outlineItemsHidden"}return s(e,[{key:"dispose",value:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.linkService=null}},{key:"reset",value:function(){this.outline=null,this.lastToggleIsShow=!0;for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)}},{key:"_dispatchEvent",value:function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("outlineloaded",!0,!0,{outlineCount:e}),this.container.dispatchEvent(t)}},{key:"_bindLink",value:function(e,t){var i=this.linkService;if(!0===t.custom)e.href=i.getCustomDestinationHash(t.dest),e.onclick=function(){return i.customNavigateTo(t.dest),!1};else{if(t.url)return void pdfjsLib.addLinkAttributes(e,{url:t.url});e.href=i.getDestinationHash(t.dest),e.onclick=function(){return i.navigateTo(t.dest),!1}}}},{key:"_addToggleButton",value:function(e){var t=this,i=document.createElement("div");i.className=this.outlineToggleClass+" "+this.outlineToggleHiddenClass,i.onclick=function(n){if(n.stopPropagation(),i.classList.toggle(this.outlineToggleHiddenClass),n.shiftKey){var o=!i.classList.contains(this.outlineToggleHiddenClass);t._toggleOutlineItem(e,o)}}.bind(this),e.insertBefore(i,e.firstChild)}},{key:"_toggleOutlineItem",value:function(e,t){this.lastToggleIsShow=t;for(var i=e.querySelectorAll("."+this.outlineToggleClass),n=0,o=i.length;n<o;++n)i[n].classList[t?"remove":"add"](this.outlineToggleHiddenClass)}},{key:"render",value:function(e){var t=e&&e.outline||null,i=0;if(this.outline&&this.reset(),this.outline=t,t){for(var n=document.createDocumentFragment(),o=[{parent:n,items:this.outline,custom:!1}],a=!1;o.length>0;)for(var r=o.shift(),s=r.custom,l=0,u=r.items.length;l<u;l++){var h=r.items[l],c=document.createElement("div");c.className=this.outlineItemClass;var p=document.createElement("a");if(null==h.custom&&null!=s&&(h.custom=s),this._bindLink(p,h),p.textContent=h.title.replace(/\x00/g,""),c.appendChild(p),h.items&&h.items.length>0){a=!0,this._addToggleButton(c);var d=document.createElement("div");d.className=this.outlineItemClass+"s",c.appendChild(d),o.push({parent:d,custom:h.custom,items:h.items})}r.parent.appendChild(c),i++}a&&(null!=this.container.classList?this.container.classList.add(this.outlineItemClass+"s"):null!=this.container.className&&(this.container.className+=" picWindow")),this.container.appendChild(n),this._dispatchEvent(i)}}}]),e}(),g=function(){function e(t){a(this,e);var i=this.itemHeight=t.itemHeight,n=this.itemWidth=t.itemWidth,o=this.app=t.app;this.items=t.items,this.generatorFn=t.generatorFn,this.totalRows=t.totalRows||t.items&&t.items.length,this.addFn=t.addFn,this.scrollFn=t.scrollFn,this.container=document.createElement("div");for(var r=this,s=0;s<this.totalRows;s++){var l=document.createElement("div"),h=s+1;l.id="df-thumb"+h;var c=document.createElement("div"),p=document.createElement("div"),d=document.createElement("div");d.className="df-wrapper",p.className="df-thumb-number",l.className="df-thumb",c.className="df-bg-image",d.style.height=i+"px",d.style.width=n+"px",p.innerText=h,l.appendChild(d),d.appendChild(p),d.appendChild(c),this.container.appendChild(l)}function f(){o.thumbRequestCount=0,o.thumbRequestStatus=u.COUNT}r.dispose=function(){r.container&&r.container.parentNode&&r.container.parentNode.removeChild(r.container),r.container.removeEventListener("scroll",f)},r.container.addEventListener("scroll",f)}return s(e,[{key:"processThumbRequest",value:function(){l.log("Thumb Request Initiated");var e=this.app;if((e.thumbRequestStatus=u.OFF,e.activeThumb!==e.currentPageNumber)&&(null!=e.thumbContainer&&e.thumbContainer.hasClass("df-sidemenu-visible"))){var t=e.thumblist.container,i=t.scrollTop,o=t.getBoundingClientRect().height,a=e.thumbContainer.find("#df-thumb"+e.currentPageNumber);a.length>0?(e.thumbContainer.find(".df-selected").removeClass("df-selected"),a.addClass("df-selected"),i+o<(a=a[0]).offsetTop+a.scrollHeight?l.scrollIntoView(a,null,!1):i>a.offsetTop&&l.scrollIntoView(a),e.activeThumb=e.currentPageNumber):(jQuery(t).scrollTop(124*e.currentPageNumber),e.thumbRequestStatus=u.ON)}if(0===e.thumblist.container.getElementsByClassName("df-thumb-requested").length){var r=l.getVisibleElements({container:e.thumblist.container,elements:e.thumblist.container.children});jQuery.inArray(r)&&r.unshift(e.activeThumb);for(var s=0;s<r.length;s++){var h=e.thumblist.container.children[r[s]-1];if(void 0!==h&&!1===h.classList.contains("df-thumb-loaded")&&!1===h.classList.contains("df-thumb-requested"))return h.classList.add("df-thumb-requested"),l.log("Thumb Requested for "+r[s]),e.provider.processPage({pageNumber:r[s],textureTarget:n.a.TEXTURE_TARGET.THUMB}),!1}}}},{key:"setPage",value:function(e){var t=this.app,i=e.pageNumber,o=e.texture;if(e.textureTarget===n.a.TEXTURE_TARGET.THUMB){var a=t.container.find("#df-thumb"+i);a.find(".df-wrapper").css({height:e.height,width:e.width}),a.find(".df-bg-image").css({backgroundImage:l.bgImage(o)}),a.addClass("df-thumb-loaded").removeClass("df-thumb-requested")}l.log("Thumbnail set for "+e.pageNumber),t.thumbRequestStatus=u.ON}}]),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==v(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===v(a)?a:String(a)),n)}var o,a}n.a.openLightBox=function(e){n.a.activeLightBox||(n.a.activeLightBox=new p((function(){n.a.activeLightBox.app&&(n.a.activeLightBox.app.closeRequested=!0,n.a.activeLightBox.app.analytics({eventAction:n.a.activeLightBox.app.options.analyticsViewerClose,options:n.a.activeLightBox.app.options})),n.a.activeLightBox.app=l.disposeObject(n.a.activeLightBox.app)}))),n.a.activeLightBox.duration=300,void 0!==n.a.activeLightBox.app&&null!==n.a.activeLightBox.app&&!0!==n.a.activeLightBox.app.closeRequested&&n.a.openLocalFileElement!=e||(n.a.activeLightBox.app=l.disposeObject(n.a.activeLightBox.app),null===n.a.activeLightBox.app&&n.a.activeLightBox.show((function(){n.a.activeLightBox.app=jQuery(n.a.activeLightBox.element).dearviewer({transparent:!1,isLightBox:!0,height:"100%",dataElement:e})})))},n.a.checkBrowserURLforDefaults=function(){if(!l.isIEUnsupported){var e=new URL(location.href).searchParams.get("viewer-type")||new URL(location.href).searchParams.get("viewertype"),t=new URL(location.href).searchParams.get("is-3d")||new URL(location.href).searchParams.get("is3d");e&&(n.a.defaults.viewerType=e),"true"!==t&&"false"!==t||(n.a.defaults.is3D="true"===t)}},n.a.checkBrowserURLforPDF=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!l.isIEUnsupported){var t=new URL(location.href).searchParams.get("pdf-source");return t&&(t=unescape(t),e&&n.a.openFile(t)),t}},n.a.openFile=function(e){void 0===n.a.openLocalFileElement&&(n.a.openLocalFileElement=jQuery("<div hidden>").appendTo(jQuery("body")).data("option",n.a.openFileOptions)),e&&(n.a.openFileOptions.source=e,n.a.openFileOptions.pdfParameters=null),n.a.openLightBox(n.a.openLocalFileElement)},n.a.openBase64=function(e){n.a.openFileOptions.source=null,n.a.openFileOptions.pdfParameters={data:atob(e)},n.a.openFile()},n.a.openLocalFile=function(){var e;void 0===n.a.openLocalFileInput&&(e=n.a.openLocalFileInput=jQuery('<input type="file" accept=".pdf" style="display:none">').appendTo(jQuery("body"))).change((function(){var t,i,o=e[0].files;o.length&&(t=o[0],n.a.oldLocalFileObjectURL&&window.URL.revokeObjectURL(n.a.oldLocalFileObjectURL),n.a.oldLocalFileObjectURL=window.URL.createObjectURL(t),e.val(""),null===(i=n.a.openLocalFileInputChanged)||void 0===i||i.call(n.a,n.a.oldLocalFileObjectURL,t),n.a.openFile(n.a.oldLocalFileObjectURL))})),n.a.openLocalFileInput.click()},n.a.initControls=function(){var e=jQuery("body");!1!==n.a.defaults.autoPDFLinktoViewer&&e.on("click",'a[href$=".pdf"]',(function(e){var t=jQuery(this);void 0!==t.attr("download")||"_blank"===t.attr("target")||t.hasClass("df-ui-btn")||t.parents(".df-app").length>0||(e.preventDefault(),t.data("source",t.attr("href")),n.a.openLightBox(t))})),e.on("click",".df-sidemenu-buttons .df-ui-close",(function(){jQuery(this).closest(".df-app").find(".df-ui-outline.df-active , .df-ui-thumbnail.df-active").trigger("click")})),e.on("mouseout",".df-link-content section.squareAnnotation, .df-link-content section.textAnnotation",(function(){var e=jQuery(this);n.a.handlePopup(e,!1)})),e.on("mouseover",".df-link-content section.squareAnnotation, .df-link-content section.textAnnotation",(function(){var e=jQuery(this);n.a.handlePopup(e,!0)})),n.a.handlePopup=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.closest(".df-container"),n=i.find(".df-comment-popup");if(n.toggleClass("df-active",t),t){var o=e[0].getBoundingClientRect(),a=i[0].getBoundingClientRect(),r=e.find(".popupWrapper").first();n.html(r.html());var s=o.left-a.left;s+360>a.width?s=a.width-360-10:s<10&&(s=10);var l=o.top-a.top+o.height+5;l+n.height()>a.height?l=o.top-n.height()-o.height-10:l<10&&(l=10),n.css({left:s,top:l})}}};n.a;var y=n.a.REQUEST_STATUS,b=n.a.utils,w=function(){function e(t){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.viewerType=this.options.viewerType,this.startPage=1,this.endPage=1,this.element=jQuery(this.options.element),this.dimensions={padding:{},offset:{},pageFit:{},stage:{},isAutoHeight:"auto"===t.height},this.is3D=t.is3D,this.events={},this.links=t.links,this.thumbSize=128,this.pendingZoom=!0,this.currentPageNumber=this.options.openPage||this.startPage,this.pendingZoom=!0,this.zoomValue=1,this.pageScaling=n.a.PAGE_SCALE.MANUAL,this.isRTL=t.readDirection===n.a.READ_DIRECTION.RTL,this.jumpStep=1,this.resizeRequestStatus=y.OFF,this.refreshRequestStatus=y.OFF,this.refreshRequestCount=0,this.resizeRequestCount=0,this.fullscreenSupported=b.hasFullscreenEnabled(),this.thumbRequestCount=0,this.isExternalReady=null===(i=this.options.isExternalReady)||void 0===i||i,this.init(),!0===this.options.autoLightBoxFullscreen&&!0===this.options.isLightBox&&this.switchFullscreen(),this.executeCallback("onCreate"),this.target=this}var t,i,o;return t=e,i=[{key:"init",value:function(){var e=this.options,t=this;return t.initDOM(),t.initResourcesLocation(),t.initInfo(),null!=e.source&&0!==e.source.length||null!=e.pdfParameters?b.isIEUnsupported?(t.updateInfo("Your browser (Internet Explorer) is out of date to run DearPDF Flipbook Plugin. <br><a href='https://browsehappy.com/'>Upgrade to a new one</a>","df-old-browser"),void t.container.removeClass("df-loading").addClass("df-error")):(t.commentPopup=jQuery('<div class="df-comment-popup">').appendTo(t.container),t.viewer=new t.viewerType(e,this),t.sideMenu=new d({parentElement:this.container},t),void(t.provider=new n.a.providers[e.providerType](e,t))):(t.updateInfo("ERROR: Set a Valid Document Source.",n.a.INFO_TYPE.ERROR),void t.container.removeClass("df-loading").addClass("df-error"))}},{key:"initDOM",value:function(){this.element.addClass("df-app").removeClass("df-container df-loading"),this.container=jQuery("<div>").appendTo(this.element),this.container.addClass("df-container df-loading df-init df-controls-"+this.options.controlsPosition+(!0===this.options.controlsFloating?" df-float":" df-float-off")+("transparent"===this.options.backgroundColor?" df-transparent":"")+(!0===this.isRTL?" df-rtl":"")+(!0===b.isIOS||!0===b.isIPad?" df-ios":"")),this._offsetParent=this.container[0].offsetParent,this.backGround=jQuery("<div class='df-bg'>").appendTo(this.container).css({backgroundColor:this.options.backgroundColor,backgroundImage:this.options.backgroundImage?"url('"+this.options.backgroundImage+"')":""}),this.viewerContainer=jQuery("<div>").appendTo(this.container),this.viewerContainer.addClass("df-viewer-container")}},{key:"initResourcesLocation",value:function(){var e=this.options;if(void 0!==window[n.a.locationVar]){if(e.pdfjsSrc=window[n.a.locationVar]+"js/libs/pdf.min.js",e.threejsSrc=window[n.a.locationVar]+"js/libs/three.min.js",e.pdfjsWorkerSrc=window[n.a.locationVar]+"js/libs/pdf.worker.min.js",e.soundFile=window[n.a.locationVar]+e.soundFile,e.imagesLocation=window[n.a.locationVar]+e.imagesLocation,e.imageResourcesPath=window[n.a.locationVar]+e.imageResourcesPath,e.cMapUrl=window[n.a.locationVar]+e.cMapUrl,void 0!==e.pdfVersion){var t="";"latest"==e.pdfVersion||"beta"==e.pdfVersion?t="latest":"stable"==e.pdfVersion&&(t="stable"),"default"!==t&&""!==t&&(e.pdfjsSrc=window[n.a.locationVar]+"js/libs/pdfjs/"+t+"/pdf.min.js",e.pdfjsWorkerSrc=window[n.a.locationVar]+"js/libs/pdfjs/"+t+"/pdf.worker.min.js")}}else console.warn("DEARVIEWER locationVar not found!");this.executeCallback("onInitResourcesLocation")}},{key:"initEvents",value:function(){var e=this,t=this.container[0];window.addEventListener("resize",e.events.resize=e.resetResizeRequest.bind(e),!1),t.addEventListener("mousemove",e.events.mousemove=e.mouseMove.bind(e),!1),t.addEventListener("mousedown",e.events.mousedown=e.mouseDown.bind(e),!1),window.addEventListener("mouseup",e.events.mouseup=e.mouseUp.bind(e),!1),t.addEventListener("touchmove",e.events.touchmove=e.mouseMove.bind(e),!1),t.addEventListener("touchstart",e.events.touchstart=e.mouseDown.bind(e),!1),window.addEventListener("touchend",e.events.touchend=e.mouseUp.bind(e),!1)}},{key:"mouseMove",value:function(e){e.touches&&e.touches.length>1&&e.preventDefault(),!0===this.viewer.acceptAppMouseEvents&&this.viewer.mouseMove(e)}},{key:"mouseDown",value:function(e){this.userHasInteracted=!0,!0===this.viewer.acceptAppMouseEvents&&0===jQuery(e.srcElement).closest(".df-sidemenu").length&&this.viewer.mouseDown(e)}},{key:"mouseUp",value:function(e){this.viewer&&!0===this.viewer.acceptAppMouseEvents&&this.viewer.mouseUp(e)}},{key:"dispose",value:function(){var e,t,i,n,o,a=this,r=this.container[0];clearInterval(this.autoPlayTimer),this.autoPlayTimer=null,this.autoPlayFunction=null,a.provider=b.disposeObject(a.provider),a.contentProvider=null,a.target=null,a.viewer=b.disposeObject(a.viewer),a.sideMenu=b.disposeObject(a.sideMenu),a.ui=b.disposeObject(a.ui),a.thumblist=b.disposeObject(a.thumblist),a.outlineViewer=b.disposeObject(a.outlineViewer),this.events&&(window.removeEventListener("resize",a.events.resize,!1),r.removeEventListener("mousemove",a.events.mousemove,!1),r.removeEventListener("mousedown",a.events.mousedown,!1),window.removeEventListener("mouseup",a.events.mouseup,!1),r.removeEventListener("touchmove",a.events.touchmove,!1),r.removeEventListener("touchstart",a.events.touchstart,!1),window.removeEventListener("touchend",a.events.touchend,!1)),a.events=null,a.options=null,a.element.removeClass("df-app"),a.viewerType=null,a.checkRequestQueue=null,null===(e=a.info)||void 0===e||e.remove(),a.info=null,null===(t=a.loadingIcon)||void 0===t||t.remove(),a.loadingIcon=null,null===(i=a.backGround)||void 0===i||i.remove(),a.backGround=null,null===(n=a.outlineContainer)||void 0===n||n.remove(),a.outlineContainer=null,null===(o=a.commentPopup)||void 0===o||o.remove(),a.commentPopup=null,a.viewerContainer.off(),a.viewerContainer.remove(),a.viewerContainer=null,a.container.off(),a.container.remove(),a.container=null,a.element.off(),a.element=null,a._offsetParent=null,a.dimensions=null}},{key:"resetResizeRequest",value:function(){this.resizeRequestStatus=y.COUNT,this.resizeRequestCount=0,this.container.addClass("df-pendingresize"),this.pendingResize=!0}},{key:"initInfo",value:function(){this.info=jQuery("<div>",{class:"df-loading-info"}),this.container.append(this.info),this.info.html(this.options.text.loading+"..."),this.loadingIcon=jQuery("<div>",{class:"df-loading-icon"}).appendTo(this.container)}},{key:"updateInfo",value:function(e,t){b.log(e),void 0!==this.info&&this.info.html(e)}},{key:"_documentLoaded",value:function(){b.log("Document Loaded"),this.isDocumentReady=!0,this.contentProvider=this.provider,this.executeCallback("onDocumentLoad"),this.endPage=this.pageCount=this.provider.pageCount,this.currentPageNumber=this.getValidPage(this.currentPageNumber),this.requestFinalize()}},{key:"_viewerPrepared",value:function(){b.log("Viewer Prepared"),this.isViewerPrepared=!0,this.executeCallback("onViewerLoad"),this.requestFinalize()}},{key:"requestFinalize",value:function(){!0===this.isDocumentReady&&!0===this.isViewerPrepared&&!0===this.isExternalReady&&!0!==this.finalizeRequested&&(this.finalizeRequested=!0,this.finalize())}},{key:"finalize",value:function(){this.viewer.init(),this.ui=new h({},this),this.ui.init(),this.resize(),this.ui.update(),this.initEvents(),1==this.options.isLightBox&&this.analytics({eventAction:this.options.analyticsViewerOpen,options:this.options}),this.container.removeClass("df-loading df-init"),this.viewer.onReady(),this.analytics({eventAction:this.options.analyticsViewerReady,options:this.options}),this.checkRequestQueue(),this.executeCallback("onReady"),b.focusHash(this.options.dataElement),b.log("App Finalized")}},{key:"initOutline",value:function(){var e=this,t=jQuery("<div>").addClass("df-outline-container df-sidemenu"),i=jQuery("<div>").addClass("df-wrapper");t.append(i),e.sideMenu.element.append(t),e.outlineContainer=t,e.outlineViewer=new f({container:i[0],linkService:e.provider.linkService,outlineItemClass:"df-outline-item",outlineToggleClass:"df-outline-toggle",outlineToggleHiddenClass:"df-outlines-hidden"}),e.outlineViewer.render({outline:e.provider.outline})}},{key:"initThumbs",value:function(){var e=this;e.thumblist=new g({app:e,addFn:function(e){},scrollFn:function(){e.thumbRequestStatus=y.ON},itemHeight:e.thumbSize,itemWidth:b.limitAt(Math.floor(e.dimensions.coverPage.ratio*e.thumbSize),32,180),totalRows:e.pageCount}),e.thumblist.lastScrolled=Date.now(),e.thumbRequestStatus=y.ON;var t=jQuery("<div>").addClass("df-thumb-container df-sidemenu");t.append(jQuery(e.thumblist.container).addClass("df-wrapper")),e.thumbContainer=t,e.sideMenu.element.append(t),e.container.on("click",".df-thumb-container .df-thumb",(function(t){t.stopPropagation();var i=jQuery(this).attr("id").replace("df-thumb","");e.gotoPage(parseInt(i,10))}))}},{key:"checkRequestQueue",value:function(){var e=this;e.checkRequestQueue&&requestAnimationFrame((function(){e&&e.checkRequestQueue&&e.checkRequestQueue()})),e.container&&e.container[0]&&e._offsetParent!==e.container[0].offsetParent&&(e._offsetParent=e.container[0].offsetParent,null!==e._offsetParent&&(e.resize(),e.resizeRequestStatus=y.OFF),b.log("Visibility Resize Detected")),(null!==e._offsetParent||e.isFullscreen)&&(TWEEN.getAll().length>0&&(TWEEN.update(),e.renderRequestStatus=y.ON),e.resizeRequestStatus===y.ON?(e.resizeRequestStatus=y.OFF,e.resize()):e.resizeRequestStatus===y.COUNT&&(e.resizeRequestCount++,e.resizeRequestCount>10&&(e.resizeRequestCount=0,e.resizeRequestStatus=y.ON)),e.refreshRequestStatus===y.ON?(e.refreshRequestStatus=y.OFF,e.pendingResize=!1,e.viewer.refresh(),this.container.removeClass("df-pendingresize")):e.refreshRequestStatus===y.COUNT&&(e.refreshRequestCount++,e.refreshRequestCount>3&&(e.refreshRequestCount=0,e.refreshRequestStatus=y.ON)),e.textureRequestStatus===y.ON&&e.processTextureRequest(),e.thumbRequestStatus===y.ON?e.processThumbRequest():e.thumbRequestStatus===y.COUNT&&(e.thumbRequestCount++,e.thumbRequestCount>3&&(e.thumbRequestCount=0,e.thumbRequestStatus=y.ON)),e.renderRequestStatus===y.ON&&(e.viewer.render(),e.renderRequestStatus=y.OFF),e.provider.checkRequestQueue(),e.viewer.checkRequestQueue())}},{key:"processTextureRequest",value:function(){var e,t,i=this,o=this.viewer,a=this.provider,r=o.getVisiblePages().main,s=0,l=i.zoomValue>1;if(o.isAnimating())i.textureRequestStatus=y.ON;else{b.log("Texture Request Working");for(var u=0;u<r.length;u++){s=0;var h=r[u];if(h>0&&h<=i.pageCount&&((e=l?o.zoomViewer.getPageByNumber(h):o.getPageByNumber(h))&&(t=o.getTextureSize({pageNumber:h}),t=b.limitAt(t,1,i.dimensions.maxTextureHeight),e.changeTexture(h,Math.floor(t.height))&&(a.processPage({pageNumber:h,textureTarget:l?n.a.TEXTURE_TARGET.ZOOM:n.a.TEXTURE_TARGET.VIEWER}),s++,i.viewer.getAnnotationElement(h,!0))),s>0))break}0===s&&(i.textureRequestStatus=y.OFF)}}},{key:"applyTexture",value:function(e,t){var i=this,o=void 0!==e.toDataURL;if(t.textureTarget===n.a.TEXTURE_TARGET.THUMB){if(t.height=e.height,t.width=e.width,o){var a=e.toDataURL("image/png");i.provider.setCache(t.pageNumber,a,i.thumbSize),t.texture=a}else t.texture=e.src;i.thumblist.setPage(t)}else t.texture=o?e:e.src,!0===i.viewer.setPage(t)&&(i.provider.processAnnotations(t.pageNumber,i.viewer.getAnnotationElement(t.pageNumber,!0)),i.provider.processTextContent(t.pageNumber,i.viewer.getTextElement(t.pageNumber,!0)))}},{key:"processThumbRequest",value:function(){null!==this.thumblist&&void 0!==this.thumblist&&this.thumblist.processThumbRequest()}},{key:"refreshRequestStart",value:function(){this.refreshRequestStatus=y.COUNT,this.refreshRequestCount=0}},{key:"renderRequestStart",value:function(){this.renderRequestStatus=y.ON}},{key:"resizeRequestStart",value:function(){this.resizeRequestStatus=y.ON}},{key:"zoom",value:function(e){var t=this;t.pendingZoom=!0,t.zoomDelta=e,t.resize()}},{key:"resetZoom",value:function(){1!==this.zoomValue&&(this.zoomValue=1.001,this.zoom(-1))}},{key:"resize",value:function(){var e,t,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b.log("Resize Request Initiated");var o=this,a=o.container.hasClass("df-sidemenu-open"),r=o.dimensions,s=o.dimensions.padding,l=jQuery(window).height();r.offset={top:0,left:o.options.sideMenuOverlay||!a||o.isRTL?0:220,right:!o.options.sideMenuOverlay&&a&&o.isRTL?220:0,bottom:0,width:!o.options.sideMenuOverlay&&a?220:0},o.viewerContainer.css({left:r.offset.left,right:r.offset.right});var u=r.controlsHeight=o.container.find(".df-ui").height();if(s.top=o.options.paddingTop+(o.options.controlsPosition===n.a.CONTROLS_POSITION.TOP?u:0),s.left=o.options.paddingLeft,s.right=o.options.paddingRight,s.bottom=o.options.paddingBottom+(o.options.controlsPosition===n.a.CONTROLS_POSITION.BOTTOM?u:0),s.height=s.top+s.bottom,s.width=s.left+s.right,s.heightDiff=s.top-s.bottom,s.widthDiff=s.left-s.right,r.isFullSize=!0===o.isFullscreen,r.isFixedHeight=r.isFullSize||!r.isAutoHeight,r.containerWidth=r.isFullSize?jQuery(window).width():this.element.width(),o.container.toggleClass("df-xs",r.containerWidth<400).toggleClass("df-xss",r.containerWidth<320),r.maxHeight=l-(r.containerWidth>600&&null!==(e=jQuery(null!==(t=o.options.headerElementSelector)&&void 0!==t?t:"#wpadminbar").height())&&void 0!==e?e:0),r.isFixedHeight)if(r.isFullSize)r.maxHeight=l;else{o.element.height(o.options.height);var h=o.element.height();r.maxHeight=Math.min(h,r.maxHeight)}r.width,r.stage.innerWidth=this.viewer._getInnerWidth();var c=r.stage.innerHeight=this.viewer._getInnerHeight(),p=this.viewer._getOuterHeight(c+r.padding.height);r.containerHeight=r.isFullSize?l:p,o.element.height(r.containerHeight);var d=o.element.height();r.isFullSize||d==r.containerHeight||(r.containerHeight=d,r.stage.innerHeight=d-r.padding.height,r.stage.height=d),r.origin={x:(s.widthDiff+r.containerWidth-r.offset.left-r.offset.right)/2,y:(s.heightDiff+r.containerHeight)/2},o.viewer.handleZoom(),o.viewer.resize(),!1!==i&&(o.pendingZoom?(this.viewer.refresh(),b.log("Pending Zoom updated")):this.refreshRequestStart(),this.ui.update(),this.renderRequestStatus=y.ON,o.zoomChanged=!1,o.pendingZoom=!1,this.executeCallback("afterResize"))}},{key:"hasOutline",value:function(){if(this.provider.outline.length>0)return!0}},{key:"switchFullscreen",value:function(){var e,t,i=this,n=i.container[0];if(i.container.toggleClass("df-fullscreen",!0!==i.isFullscreen),(null==i||null===(e=i.ui)||void 0===e||null===(t=e.controls)||void 0===t?void 0:t.fullscreen)&&i.ui.controls.fullScreen.toggleClass(i.options.icons["fullscreen-off"],!0!==i.isFullscreen),!0!==i.isFullscreen){var o=null;n.requestFullscreen?o=n.requestFullscreen():n.msRequestFullscreen?o=n.msRequestFullscreen():n.mozRequestFullScreen?o=n.mozRequestFullScreen():n.webkitRequestFullscreen&&(o=n.webkitRequestFullscreen()),o&&o.then&&o.then((function(){i.refreshRequestStatus,y.ON,i.resize()})),i.isFullscreen=!0}else i.isFullscreen=!1,document.exitFullscreen?document.fullscreenElement&&document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),b.hasFullscreenEnabled()||i.container[0].scrollIntoView();b.hasFullscreenEnabled()||(i.resizeRequestStatus=y.ON)}},{key:"next",value:function(){this.jumpBy(this.jumpStep)}},{key:"prev",value:function(){this.jumpBy(-this.jumpStep)}},{key:"jumpBy",value:function(e){var t=this.currentPageNumber+e;t=b.limitAt(t,this.startPage,this.endPage),1!=this.anyFirstPageChanged&&(this.analytics({eventAction:this.options.analyticsFirstPageChange,options:this.options}),this.anyFirstPageChanged=!0),this.gotoPage(t),this.ui.update()}},{key:"openRight",value:function(){this.isRTL?this.prev():this.next()}},{key:"openLeft",value:function(){this.isRTL?this.next():this.prev()}},{key:"start",value:function(){this.gotoPage(this.startPage)}},{key:"end",value:function(){this.gotoPage(this.endPage)}},{key:"gotoPage",value:function(e){var t=this;e=t.getValidPage(parseInt(e,10)),null!==t.viewer&&!1!==t.viewer.validatePageChange(e)&&(this.executeCallback("beforePageChanged"),t.requestDestRefKey=void 0,t.container.removeClass("df-fetch-pdf"),t.oldPageNumber=t.currentPageNumber,t.currentPageNumber=e,t.thumbRequestStatus=y.ON,t.viewer.gotoPageCallBack&&t.viewer.gotoPageCallBack(),t.ui.update(),1==this.autoPlay&&this.setAutoPlay(this.autoPlay),this.executeCallback("onPageChanged"))}},{key:"autoPlayFunction",value:function(){this&&this.autoPlay&&this.next()}},{key:"setAutoPlay",value:function(e){if(this.options.autoPlay){var t=(e=1==e)?this.options.text.pause:this.options.text.play;this.ui.controls.play.toggleClass(this.options.icons.pause,e),this.ui.controls.play.html("<span>"+t+"</span>"),this.ui.controls.play.attr("title",t),clearInterval(this.autoPlayTimer),e&&(this.autoPlayTimer=setInterval(this.autoPlayFunction.bind(this),this.options.autoPlayDuration)),this.autoPlay=e}}},{key:"getValidPage",value:function(e){var t=this;return isNaN(e)?e=t.currentPageNumber:e<1?e=1:e>t.pageCount&&(e=t.pageCount),e}},{key:"getURLHash",value:function(){if(null!=this.options.id){var e=b.getSharePrefix(this.options.sharePrefix)+(null!=this.options.slug?this.options.slug:this.options.id)+"/";null!=this.currentPageNumber&&(e+=this.currentPageNumber+"/"),window.location.hash=e}return window.location.href}},{key:"executeCallback",value:function(e){}},{key:"analytics",value:function(e){}}],i&&m(t.prototype,i),o&&m(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.a.prepareOptions=function(e){e.element instanceof jQuery||(e.element=jQuery(e.element));var t=e.element;null==e.dataElement&&(e.dataElement=t);var i=e.dataElement,o=n.a.utils.getOptions(i),a=jQuery.extend(!0,{},n.a.defaults,e,o);a=b.fallbackOptions(a),b.log(a);var r=jQuery.extend(!0,{},n.a._defaults,a);return b.isMobile&&"function"==typeof n.a.viewers[r.mobileViewerType]&&(r.viewerType=r.mobileViewerType),"function"!=typeof n.a.viewers[r.viewerType]?(console.warn("Invalid Viewer Type! "+r.viewerType+" | Using default Viewer!"),r.viewerType=n.a.viewers.default):r.viewerType=n.a.viewers[r.viewerType],r=b.finalizeOptions(b.sanitizeOptions(r))},n.a.Application=function(e){var t=n.a.prepareOptions(e),i=new w(t);return null!=t.id&&!0!==t.isLightBox&&(window[t.id.toString()]=i),i},jQuery.fn.extend({dearviewer_options:function(e){return null==e&&(e={}),e.element=jQuery(this),new n.a.prepareOptions(e)},dearviewer:function(e){return null==e&&(e={}),e.element=jQuery(this),new n.a.Application(e)}})},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(0),o=i(2),a=i(1);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),n)}var o,a}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},l.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p(e);if(t){var o=p(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,i)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=n.a.utils,f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,i,o,r=h(f);function f(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e.viewerClass="df-reader",t.options.mouseScrollAction=n.a.MOUSE_SCROLL_ACTIONS.NONE,(i=r.call(this,e,t)).app.jumpStep=1,i.minZoom=.25,i.stackCount=i.app.pageCount,i.app.options.paddingLeft=0,i.app.options.paddingRight=0,i.app.options.paddingTop=10,i.app.options.paddingBottom=!0===i.app.options.controlsFloating?20:10,i.app.pageScaling=i.app.options.pageScale,i.acceptAppMouseEvents=!0,i.scrollStatus=n.a.REQUEST_STATUS.OFF,i.deltaPanX=0,i.deltaPanY=0,t._viewerPrepared(),i.zoomViewer=c(i),i}return t=f,i=[{key:"init",value:function(){l(p(f.prototype),"init",this).call(this),this.initEvents(),this.initPages(),this.initScrollBar()}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],l(p(f.prototype),"initEvents",this).call(this)}},{key:"initPages",value:function(){this.stackCount=this.app.pageCount;for(var e=0;e<this.stackCount;e++){var t=new a.a({parentElement:this.wrapper});t.index=e,t.viewer=this,this.pages.push(t)}}},{key:"initScrollBar",value:function(){this.scrollBar=jQuery("<div class='df-reader-scrollbar'>"),this.scrollBar.appendTo(this.app.container),this.scrollPageNumber=jQuery("<div class='df-reader-scroll-page-number'>").appendTo(this.app.container)}},{key:"afterControlUpdate",value:function(){this.scrollBar[0].innerHTML=this.app.currentPageNumber,this.scrollPageNumber[0].innerHTML=this.app.currentPageNumber+"<div>of "+this.app.pageCount+"</div>"}},{key:"updateBuffer",value:function(e){if("-1"!==e.textureStamp&&void 0!==e.pageNumber){for(var t=e.pageNumber,i=e.pageNumber,n=0,o=0;o<this.pageBuffer.length;o++){var a=this.pageBuffer[o].pageNumber;if(t===a)return void d.log("Page "+t+" already in buffer, skipping");Math.abs(this.app.currentPageNumber-a)>Math.abs(this.app.currentPageNumber-i)&&(i=a,n=o)}this.pageBuffer.push(e),this.pageBuffer.length>this.pageBufferSize&&(d.log("Farthest buffer: "+i),this.pageBuffer[n].reset(),this.pageBuffer.splice(n,1))}}},{key:"initCustomControls",value:function(){var e=this.app.ui.controls;e.openRight.hide(),e.openLeft.hide()}},{key:"dispose",value:function(){l(p(f.prototype),"dispose",this).call(this),this.scrollBar&&this.scrollBar.remove(),this.scrollPageNumber&&this.scrollPageNumber.remove(),this.element.remove()}},{key:"_getInnerHeight",value:function(){l(p(f.prototype),"_getInnerHeight",this).call(this);var e=this.app.dimensions.maxHeight-this.app.dimensions.padding.height,t=this.app.dimensions.coverPage.viewPort,i=this.app.dimensions.containerWidth-20;this.app.pageScaling===n.a.PAGE_SCALE.ACTUAL&&(i=1*this.app.provider.coverPage.viewPort.width);var o=e;return this.app.pageScaling===n.a.PAGE_SCALE.PAGE_WIDTH?o=100*t.height:this.app.pageScaling===n.a.PAGE_SCALE.AUTO?o=1.5*t.height:this.app.pageScaling===n.a.PAGE_SCALE.ACTUAL&&(o=1*t.height),o-=2,this._containCover=d.contain(100*t.width,100*t.height,i,o),o=Math.min(e,this._containCover.height+2),this.app.pageScaleValue=this._containCover.height/t.height,this.app.dimensions.isFixedHeight?e:o}},{key:"handleZoom",value:function(){var e=this.app,t=this.maxZoom=4,i=e.zoomValue;!0===e.pendingZoom&&null!=e.zoomDelta?i=e.zoomDelta>0?i*e.options.zoomRatio:i/e.options.zoomRatio:null!=this.lastScale&&(i*=this.lastScale,this.lastScale=null),i=d.limitAt(i,this.minZoom,t),e.zoomValueChange=i/e.zoomValue,e.zoomChanged=e.zoomValue!==i,e.zoomValue=i}},{key:"resize",value:function(){var e=this,t=e.app,i=(t.dimensions,t.dimensions.padding),n=this.shiftHeight=0;this.element.css({top:-n,bottom:-n,right:-0,left:-0,paddingTop:i.top,paddingRight:i.right,paddingBottom:i.bottom,paddingLeft:i.left});for(var o=e.pages[e.getVisiblePages().main[0]-1].element[0],a=o.getBoundingClientRect(),r=this.parentElement[0].getBoundingClientRect(),s=0;s<e.pages.length;s++){var l=e.pages[s],u=e.getViewPort(s+1,!0),h=l.element[0].style;h.height=Math.floor(u.height*t.pageScaleValue*t.zoomValue)+"px",h.width=Math.floor(u.width*t.pageScaleValue*t.zoomValue)+"px"}if(e.oldScrollHeight!=e.element[0].scrollHeight&&void 0!==e.oldScrollHeight){var c,p=e.element[0].scrollHeight/e.oldScrollHeight;e.skipScrollCheck=!0;var d=o.offsetTop+o.clientTop-(a.top-r.top+o.clientTop)*p,f=o.offsetLeft+o.clientLeft-(a.left-r.left+o.clientLeft)*p;d+=10*(p-1)/2,f+=10*(p-1)/2,this.zoomCenter=null!==(c=this.zoomCenter)&&void 0!==c?c:{x:0,y:0},d+=(p-1)*this.zoomCenter.y,f+=(p-1)*this.zoomCenter.x,this.zoomCenter=null,e.element[0].scrollTop=d,e.element[0].scrollLeft=f,e.skipScrollCheck=!1}e.oldScrollHeight=e.element[0].scrollHeight,this.scrollBar[0].style.transform="none",this.updateScrollBar()}},{key:"onReady",value:function(){this.gotoPageCallBack(),this.oldScrollHeight=this.element[0].scrollHeight}},{key:"refresh",value:function(){for(var e=this,t=this.app,i=e.getVisiblePages().main,o=0;o<i.length;o++){var a=void 0,r=i[o];r!==(a=e.pages[r-1]).pageNumber&&(a.resetTexture(),this.app.textureRequestStatus=n.a.REQUEST_STATUS.ON),a.element.attr("number",r),a.pageNumber=r}e.requestRefresh(!1),t.textureRequestStatus=n.a.REQUEST_STATUS.ON}},{key:"isAnimating",value:function(){return this.scrollStatus===n.a.REQUEST_STATUS.ON||this.scrollStatus===n.a.REQUEST_STATUS.COUNT}},{key:"checkRequestQueue",value:function(){l(p(f.prototype),"checkRequestQueue",this).call(this),this.scrollStatus===n.a.REQUEST_STATUS.ON&&(this.scrollStatus=n.a.REQUEST_STATUS.OFF),this.scrollStatus===n.a.REQUEST_STATUS.COUNT&&(this.scrollStatus=n.a.REQUEST_STATUS.ON)}},{key:"getVisiblePages",value:function(){var e=d.getVisibleElements({container:this.element[0],elements:this.wrapper[0].children});return 0===e.length&&(e=[this.app.currentPageNumber]),{main:e,buffer:[]}}},{key:"getPageByNumber",value:function(e){var t=this.pages[e-1];return void 0===t&&d.log("Page Not found for: "+e),t}},{key:"onScroll",value:function(e){for(var t=this,i=t.element[0].scrollTop+t.app.dimensions.containerHeight/2,o=t.getVisiblePages().main,a=o[0],r=0;r<o.length;r++){a=o[r];var s=t.pages[a-1].element[0],l=s.offsetTop+s.clientTop;if(l<=i&&s.clientHeight+l>=i)break;if(r>0&&l>i&&s.clientHeight+l>=i){a=o[r-1];break}}t.skipScrollIntoView=!0,t.app.gotoPage(a),t.skipScrollIntoView=!1,t.updateScrollBar(),e.preventDefault&&e.preventDefault(),e.stopPropagation(),t.requestRefresh(),this.scrollStatus=n.a.REQUEST_STATUS.COUNT,n.a.handlePopup(t.element,!1)}},{key:"updateScrollBar",value:function(){var e=this.element[0],t=(this.app.container[0],e.scrollLeft,60+(e.offsetHeight-40-60-60)*e.scrollTop/(e.scrollHeight-e.offsetHeight));isNaN(t)&&(t=60),this.scrollBar.lastY=t,this.scrollBar[0].style.transform="translateY("+t+"px)"}},{key:"validatePageChange",value:function(e){}},{key:"gotoPageCallBack",value:function(){var e=this;if(!0!==e.skipScrollIntoView){var t=e.getPageByNumber(e.app.currentPageNumber);null!=t&&d.scrollIntoView(t.element[0],e.element[0])}e.skipScrollIntoView=!1,e.requestRefresh()}},{key:"getTextureSize",value:function(e){var t=this.app.provider.viewPorts[1];return this.app.provider.viewPorts[e.pageNumber]&&(t=this.app.provider.viewPorts[e.pageNumber]),{height:t.height*this.app.zoomValue*this.app.pageScaleValue*window.devicePixelRatio,width:t.width*this.app.zoomValue*this.app.pageScaleValue*window.devicePixelRatio}}},{key:"textureLoadedCallback",value:function(e){var t=this.getPageByNumber(e.pageNumber),i=this.app,n=this.getViewPort(e.pageNumber,!0);t.element.height(Math.floor(n.height*i.pageScaleValue*i.zoomValue)).width(Math.floor(n.width*i.pageScaleValue*i.zoomValue))}},{key:"pan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,o=i.startPoint,a=e.raw.y-o.raw.y,r=e.raw.x-o.raw.x;i.deltaPanY+=a,i.deltaPanX+=r,i.panRequestStatus=n.a.REQUEST_STATUS.ON,!1===t&&(i.startPoint=e)}},{key:"updatePan",value:function(){this.element[0].scrollTop=this.element[0].scrollTop-this.deltaPanY,this.element[0].scrollLeft=this.element[0].scrollLeft-this.deltaPanX,this.deltaPanY=0,this.deltaPanX=0}},{key:"mouseMove",value:function(e){if(this.startPoint&&this.isScrollBarPressed){var t=d.fixMouseEvent(e),i=this.eventToPoint(t),n=this.element[0],o=this.scrollBar.lastY-(this.startPoint.raw.y-i.raw.y);return this.scrollBar.lastY=o,n.scrollTop=(o-60)*(n.scrollHeight-n.offsetHeight)/(n.offsetHeight-40-60-60),this.startPoint=i,void e.preventDefault()}e.touches&&e.touches.length<2||l(p(f.prototype),"mouseMove",this).call(this,e)}},{key:"mouseDown",value:function(e){l(p(f.prototype),"mouseDown",this).call(this,e),e.srcElement===this.scrollBar[0]&&(this.isScrollBarPressed=!0,this.scrollBar.addClass("df-active"),this.scrollPageNumber.addClass("df-active"))}},{key:"mouseUp",value:function(e){l(p(f.prototype),"mouseUp",this).call(this,e),(this.isScrollBarPressed=this.scrollBar)&&(this.isScrollBarPressed=!1,this.scrollBar.removeClass("df-active"),this.scrollPageNumber.removeClass("df-active"))}}],i&&s(t.prototype,i),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i(0),o=i(4),a=i(1);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},s.apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),n)}var o,a}function h(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var o=f(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var g=n.a,v=g.utils,m=function(e){c(i,e);var t=d(i);function i(e){var n;return l(this,i),(n=t.call(this,e)).init(),n}return h(i,[{key:"init",value:function(){var e=this,t="<div>",i=e.element=jQuery(t,{class:"df-sheet"}),n=e.frontPage=new a.a;n.element.addClass("df-page-front");var o=e.backPage=new a.a;o.element.addClass("df-page-back");var r=e.wrapper=jQuery(t,{class:"df-sheet-wrapper"}),s=e.foldInnerShadow=jQuery(t,{class:"df-sheet-fold-inner-shadow"}),l=e.foldOuterShadow=jQuery(t,{class:"df-sheet-fold-outer-shadow"});this.parentElement.append(i),i.append(r),i.append(l),r.append(n.element),r.append(o.element),r.append(s)}},{key:"updateCSS",value:function(e){this.element.css(e)}},{key:"resetCSS",value:function(){var e=this;e.wrapper.css({transform:""}),e.frontPage.resetCSS(),e.backPage.resetCSS()}},{key:"updateSize",value:function(e,t,i){e=Math.floor(e),t=Math.floor(t),i=Math.floor(i),this.wrapper[0].style.height=this.wrapper[0].style.width=Math.ceil(v.distOrigin(e,t)*this.viewer.app.zoomValue)+"px",this.element[0].style.height=this.frontPage.element[0].style.height=this.backPage.element[0].style.height=this.foldInnerShadow[0].style.height=t+"px",this.element[0].style.width=this.frontPage.element[0].style.width=this.backPage.element[0].style.width=this.foldInnerShadow[0].style.width=e+"px",this.element[0].style.transform="translateY("+i+"px)"}},{key:"flip",value:function(e){var t=this;if(e=e||t.pendingPoint,null!=t&&null!=t.viewer){t.isFlipping=!0,t.viewer.flipPage=t;var i,o,a=t.viewer.isBooklet,r=t.side===n.a.TURN_DIRECTION.RIGHT,s=t.viewer.isRTL,l=t.viewer.corner===n.a.TURN_CORNER.BL||t.viewer.corner===n.a.TURN_CORNER.BR?t.element.height():0,u=t.viewer.leftSheetWidth+t.viewer.rightSheetWidth,h=0;o=t.end=t&&!0===t.animateToReset?{x:r?u:0,y:l}:{x:r?0:u,y:l},t.flipEasing=t.isHard?TWEEN.Easing.Quadratic.InOut:TWEEN.Easing.Linear.None;var c=t.viewer.app.options.duration;!0===t.isHard?(null!=e&&(h=v.angleByDistance(e.distance,e.fullWidth)),i=t.init={angle:h*(r?-1:1)},o=t.end=t&&!0===t.animateToReset?{angle:r?0:-0}:{angle:r?-180:180}):null==e?i=t.init=t&&!0===t.animateToReset?{x:r?0:u,y:0}:{x:r?u:0,y:0}:(i=t.init={x:e.x,y:e.y,opacity:1},c=t.viewer.app.options.duration*v.distPoints(i.x,i.y,o.x,o.y)/t.viewer.fullWidth,c=v.limitAt(c,t.viewer.app.options.duration/3,t.viewer.duration)),i.index=0,o.index=1,t.isFlipping=!0,a&&(!r&&!s||r&&s)&&(t.element[0].style.opacity=0),!0===t.isHard?t.currentTween=new TWEEN.Tween(i).delay(0).to(o,t.viewer.app.options.duration).onUpdate((function(){t.updateTween(this)})).easing(t.flipEasing).onComplete(t.completeTween.bind(t)).start():t.currentTween=null==e?new TWEEN.Tween(i).delay(0).to(o,t.viewer.app.options.duration).onUpdate((function(){t.updateTween(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(t.completeTween.bind(t)).start():new TWEEN.Tween(i).delay(0).to(o,c).onUpdate((function(){t.updateTween(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(t.completeTween.bind(t)).start()}}},{key:"updatePoint",value:function(e){var t=this;if(null!=e){var i=t.element.width(),o=t.element.height(),a=t.viewer.corner!==n.a.TURN_CORNER.NONE?t.viewer.corner:e.corner,r=n.a.TURN_CORNER,s=t.side===n.a.TURN_DIRECTION.RIGHT,l=a===r.BL||a===r.BR;e.rx=!0===s?t.viewer.leftSheetWidth+i-e.x:e.x,e.ry=!0===l?o-e.y:e.y;var u=Math.atan2(e.ry,e.rx);u=Math.PI/2-v.limitAt(u,0,v.toRad(90));var h=i-e.rx/2,c=e.ry/2,p=Math.max(0,Math.sin(u-Math.atan2(c,h))*v.distOrigin(h,c)),d=.5*v.distOrigin(e.rx,e.ry),f=Math.ceil(i-p*Math.sin(u)),g=Math.ceil(p*Math.cos(u)),m=v.toDeg(u),y=l?s?90-m+180:180+m:s?m:90-m,b=l?s?90-m+180:m:s?m+180:y,w=l?s?90-m:m+90:s?y-90:y+180,S=s?i-f:f,P=l?o+g:-g,C=s?-f:f-i,x=l?-o-g:g,T=v.limitAt(.5*e.distance/i,0,.5),E=v.limitAt(.5*(t.viewer.leftSheetWidth+i-e.rx)/i,.05,.3);t.element.addClass("df-folding");var k=s?t.backPage.element:t.frontPage.element,O=s?t.frontPage.element:t.backPage.element,R=t.foldOuterShadow,L=t.foldInnerShadow;t.wrapper.css({transform:v.translateStr(S,P)+v.rotateStr(y)}),O.css({transform:v.rotateStr(-y)+v.translateStr(-S,-P)}),k.css({transform:v.rotateStr(b)+v.translateStr(C,x),boxShadow:"rgba(0, 0, 0, "+T+") 0px 0px 20px"}),L.css({transform:v.rotateStr(b)+v.translateStr(C,x),opacity:E/2,backgroundImage:v.prefix.css+"linear-gradient( "+w+"deg, rgba(0, 0, 0, 0.25) , rgb(0, 0, 0) "+.7*d+"px, rgb(255, 255, 255) "+d+"px)"}),R.css({opacity:E/2,left:s?"auto":0,right:s?0:"auto",backgroundImage:v.prefix.css+"linear-gradient( "+(180-w)+"deg, rgba(0, 0, 0,0) "+d/3+"px, rgb(0, 0, 0) "+d+"px)"})}}},{key:"updateAngle",value:function(e,t){var i=this,n=5*i.element.width();i.wrapper.css({perspective:n,perspectiveOrigin:!0===t?"0% 50%":"100% 50%"}),i.element.addClass("df-folding"),i.backPage.updateCSS({display:!0===t?e<=-90?"block":"none":e<90?"block":"none",transform:("MfS"!==v.prefix.dom?"":"perspective("+n+"px) ")+(!0===t?"translateX(-100%) ":"")+"rotateY("+((!0===t?180:0)+e)+"deg)"}),i.frontPage.updateCSS({display:!0===t?e>-90?"block":"none":e>=90?"block":"none",transform:("MSd"!==v.prefix.dom?"":"perspective("+n+"px) ")+(!1===t?"translateX(100%) ":"")+"rotateY("+((!1===t?-180:0)+e)+"deg)"})}},{key:"updateTween",value:function(e){var t=this,i=t.viewer.isBooklet,o=t.side===n.a.TURN_DIRECTION.RIGHT,a=t.viewer.isRTL,r=!0===t.animateToReset;!0===t.isHard?(t.updateAngle(e.angle,o),t.angle=e.angle):(t.updatePoint({x:e.x,y:e.y}),t.x=e.x,t.y=e.y),i&&!r&&(t.element[0].style.opacity=o&&!a||!o&&a?e.index>.5?2*(1-e.index):1:e.index<.5?2*e.index:1)}},{key:"completeTween",value:function(){var e=this;!0===e.isHard?(e.updateAngle(e.end.angle),e.backPage.element.css({display:"block"}),e.frontPage.element.css({display:"block"})):e.updatePoint({x:e.end.x,y:e.end.y}),e.element[0].style.opacity=1,!0!==e.animateToReset&&(e.side=e.targetSide),e.reset(),e.viewer.onFlip(),e.viewer.afterFlip(),e.viewer.requestRefresh()}}]),i}(o.b),y=function(e){c(i,e);var t=d(i);function i(e,o){var a;return l(this,i),e.viewerClass="df-flipbook-2d",e.skipViewerLoaded=!0,(a=t.call(this,e,o)).bookShadow=jQuery("<div>",{class:"df-book-shadow"}),a.wrapper.append(a.bookShadow),a.corner=n.a.TURN_CORNER.NONE,o._viewerPrepared(),a}return h(i,[{key:"init",value:function(){s(f(i.prototype),"init",this).call(this),this.initEvents(),this.initPages()}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],s(f(i.prototype),"initEvents",this).call(this)}},{key:"dispose",value:function(){s(f(i.prototype),"dispose",this).call(this),this.element.remove()}},{key:"initPages",value:function(){for(var e=0;e<6;e++){var t=new m({parentElement:this.wrapper});t.index=e,t.viewer=this,this.sheets.push(t),this.pages.push(t.frontPage),this.pages.push(t.backPage)}}},{key:"resize",value:function(){s(f(i.prototype),"resize",this).call(this);var e=this,t=e.app.dimensions,n=t.padding,o=this.availablePageHeight(),a=this.availablePageWidth(),r=e.fullWidth=2*a,l=t.width,u=t.height,h=e.shiftHeight=Math.ceil(v.limitAt((o-u+n.height)/2,0,o)),c=e.shiftWidth=Math.ceil(v.limitAt((r-l+n.width)/2,0,r));1===e.app.zoomValue&&(e.left=0,e.top=0),void 0===this.rightSheetHeight&&(this.rightSheetHeight=this._containCover.height,this.leftSheetHeight=this._containCover.height,this.leftSheetWidth=this._containCover.width,this.rightSheetWidth=this._containCover.width,this.leftSheetTop=this.rightSheetTop=(o-this._containCover.height)/2),e.element.css({top:-h,bottom:-h,right:-c,left:-c,paddingTop:n.top,paddingRight:n.right,paddingBottom:n.bottom,paddingLeft:n.left,transform:"translate3d("+e.left+"px,"+e.top+"px,0)"}),e.wrapper.css({marginTop:Math.max(t.height-o-n.height)/2,height:o,width:r-r%2}),e.zoomViewer.resize(),e.centerNeedsUpdate=!0,e.checkCenter(!0),e.pagesReady()}},{key:"updateCenter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,i=t.centerShift,n=(t.isRTL,i*(this.isLeftPage()?this.leftSheetWidth:this.rightSheetWidth)/2);t.seamPosition=(-t.app.dimensions.offset.width+t.app.dimensions.containerWidth)/2+n,t.wrapperShift=(t.isSingle?-t.app.dimensions.stage.innerWidth/2:0)+n,t.wrapper[0].style.left=t.wrapperShift+"px",t.wrapper[0].style.transition=e?"none":"",this.zoomViewer.updateCenter()}},{key:"refreshSheet",value:function(e){var t=e.sheet,i=e.sheetNumber;!1===t.isFlipping&&(e.needsFlip?(t.element.addClass("df-flipping"),t.flip()):(t.skipFlip=!1,t.element.removeClass("df-flipping df-quick-turn df-folding df-left-side df-right-side"),t.element.addClass(t.targetSide===g.TURN_DIRECTION.LEFT?"df-left-side":"df-right-side"),t.side=t.targetSide,t.targetSide===g.TURN_DIRECTION.LEFT?t.updateSize(this.leftSheetWidth,this.leftSheetHeight,this.leftSheetTop):t.updateSize(this.rightSheetWidth,this.rightSheetHeight,this.rightSheetTop))),t.visible=e.visible,t.isHard?t.element.addClass("df-hard-sheet"):(t.element.removeClass("df-hard-sheet"),t.frontPage.updateCSS({display:"block"}),t.backPage.updateCSS({display:"block"})),t.updateCSS({display:!0===t.visible?"block":"none",zIndex:e.zIndex}),null==t.pendingPoint&&!1===t.isFlipping&&t.resetCSS(),i!==t.pageNumber&&(t.element.attr("number",i),t.backPage.element.attr("pagenumber",t.backPage.pageNumber),t.frontPage.element.attr("pagenumber",t.frontPage.pageNumber))}},{key:"eventToPoint",value:function(e){var t=this;e=v.fixMouseEvent(e);var i,n,o,a,r,s,l,u,h,c=t.wrapper[0].getBoundingClientRect(),p=t.is3D,d=t.sheets,f=(t.app.dimensions,{x:e.clientX,y:e.clientY}),m=t.parentElement[0].getBoundingClientRect();f.x=f.x-m.left,f.y=f.y-m.top,i=(h=t.dragSheet?t.dragSheet.side===g.TURN_DIRECTION.RIGHT:f.x>t.seamPosition)?t.rightSheetWidth:t.leftSheetWidth,o=h?t.rightSheetHeight:t.leftSheetHeight,n=t.rightSheetWidth+t.leftSheetWidth,r=h?t.rightSheetTop:t.leftSheetTop,a=f.x-(t.seamPosition-t.leftSheetWidth),r=f.y-(c.top-m.top)-r,s=t.drag===g.TURN_DIRECTION.NONE?a<i?a:n-a:t.drag===g.TURN_DIRECTION.LEFT?a:n-a,l=h?d[t.stackCount/2]:d[t.stackCount/2-1],u=a<t.foldSense?g.TURN_DIRECTION.LEFT:a>n-t.foldSense?g.TURN_DIRECTION.RIGHT:g.TURN_DIRECTION.NONE;var y,b=a,w=r,S=o,P=n,C=t.foldSense;return{isInsideSheet:b>=0&&b<=P&&w>=0&&w<=S,isInsideCorner:(y=b>=0&&b<C?w>=0&&w<=C?g.TURN_CORNER.TL:w>=S-C&&w<=S?g.TURN_CORNER.BL:w>C&&w<S-C?g.TURN_CORNER.L:g.TURN_CORNER.NONE:b>=P-C&&b<=P?w>=0&&w<=C?g.TURN_CORNER.TR:w>=S-C&&w<=S?g.TURN_CORNER.BR:w>C&&w<S-C?g.TURN_CORNER.R:g.TURN_CORNER.NONE:g.TURN_CORNER.NONE)!==g.TURN_CORNER.NONE&&y!==g.TURN_CORNER.L&&y!==g.TURN_CORNER.R,x:p?f.x:a,y:p?f.y:r,fullWidth:n,sheetWidth:i,sheetHeight:o,rawDistance:n-a,distance:s,sheet:l,drag:u,foldSense:t.foldSense,event:e,raw:f,corner:y}}},{key:"pan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v.pan(this,e,t)}},{key:"mouseMove",value:function(e){var t=this,i=t.eventToPoint(e);if(null==e.touches||2!=e.touches.length){1!==t.app.zoomValue&&null!=t.startPoint&&!0===t.canSwipe&&(t.pan(i),e.preventDefault());var n=t.dragSheet||i.sheet;if(null==t.flipPage&&(null!=t.dragSheet||!0===i.isInsideCorner)){null!=t.dragSheet||(i.y=v.limitAt(i.y,1,t.availablePageHeight()-1),i.x=v.limitAt(i.x,1,i.fullWidth-1));var o=null!=t.dragSheet?t.corner:i.corner;if(n.isHard){var a=o===g.TURN_CORNER.BR||o===g.TURN_CORNER.TR,r=v.angleByDistance(i.distance,i.fullWidth);n.updateAngle(r*(a?-1:1),a)}else n.updatePoint(i);n.magnetic=!0,n.magneticCorner=i.corner,e.preventDefault()}null==t.dragSheet&&null!=n&&!1===i.isInsideCorner&&!0===n.magnetic&&(n.pendingPoint=i,n.animateToReset=!0,n.magnetic=!1,t.corner=n.magneticCorner,n.flip(n.pendingPoint),n.pendingPoint=null),t.checkSwipe(i,e)}else this.pinchMove(e)}},{key:"mouseUp",value:function(e){if(e.touches||0===e.button)if(null==e.touches||0!=e.touches.length){var t=this,i=t.eventToPoint(e),o=e.target||e.originalTarget,a=1===t.app.zoomValue&&i.x===t.startPoint.x&&i.y===t.startPoint.y&&"A"!==o.nodeName;if(!0===e.ctrlKey&&a)this.zoomOnPoint(i);else if(t.dragSheet){e.preventDefault();var r=t.dragSheet;if(r.pendingPoint=i,t.drag=i.drag,a&&(!0===i.isInsideCorner||i.isInsideSheet&&t.clickAction===g.MOUSE_CLICK_ACTIONS.NAV))i.corner.indexOf("l")>-1?t.app.openLeft():t.app.openRight();else{var s=this.getBasePage();i.distance>i.sheetWidth&&(i.sheet.side===n.a.TURN_DIRECTION.LEFT?t.app.openLeft():t.app.openRight()),s===this.getBasePage()&&(r.animateToReset=!0,r.flip(i))}t.dragSheet=null,r.magnetic=!1}else a&&!i.sheet.isFlipping&&i.isInsideSheet&&t.clickAction===g.MOUSE_CLICK_ACTIONS.NAV&&("left"===i.sheet.side?t.app.openLeft():t.app.openRight());t.startPoint=null,t.canSwipe=!1,t.drag=g.TURN_DIRECTION.NONE}else this.pinchUp(e)}},{key:"mouseDown",value:function(e){if(e.touches||0===e.button)if(null==e.touches||2!=e.touches.length){var t=this,i=t.eventToPoint(e);t.startPoint=i,t.lastPos=i.x,i.isInsideCorner&&null==t.flipPage?(t.dragSheet=i.sheet,t.drag=i.drag,t.corner=i.corner,0===i.sheet.pageNumber?t.bookShadow.css({width:"50%",left:t.app.isRTL?0:"50%",transitionDelay:""}):i.sheet.pageNumber===Math.ceil(t.app.pageCount/2)-1&&t.bookShadow.css({width:"50%",left:t.app.isRTL?"50%":0,transitionDelay:""})):t.canSwipe=!0}else this.pinchDown(e)}},{key:"onScroll",value:function(e){}},{key:"resetPageTween",value:function(){for(var e=this,t=0;t<e.stackCount;t++){var i=e.sheets[t];i.currentTween&&i.currentTween.complete(!0)}e.requestRefresh()}},{key:"pagesReady",value:function(){if(!this.isFlipping()){if(!1===this.app.options.flipbookFitPages){var e=this.app.viewer.getBasePage(),t=this.leftViewport=this.getViewPort(e+(this.isBooklet?0:this.isRTL?1:0)),i=this.rightViewPort=this.getViewPort(e+(this.isBooklet||this.isRTL?0:1));if(t){var n=v.contain(t.width,t.height,this.availablePageWidth(),this.availablePageHeight());this.leftSheetWidth=Math.floor(n.width),this.leftSheetHeight=Math.floor(n.height),this.leftSheetTop=(this.availablePageHeight()-this.leftSheetHeight)/2}if(i){var o=v.contain(i.width,i.height,this.availablePageWidth(),this.availablePageHeight());this.rightSheetWidth=Math.floor(o.width),this.rightSheetHeight=Math.floor(o.height),this.rightSheetTop=(this.availablePageHeight()-this.rightSheetHeight)/2}this.totalSheetsWidth=this.leftSheetWidth+this.rightSheetWidth;for(var a=0;a<this.sheets.length;a++){var r=this.sheets[a];r.side===g.TURN_DIRECTION.LEFT?r.updateSize(this.leftSheetWidth,this.leftSheetHeight,this.leftSheetTop):r.updateSize(this.rightSheetWidth,this.rightSheetHeight,this.rightSheetTop)}}this.updateCenter(),this.updatePendingStatusClass()}}},{key:"textureLoadedCallback",value:function(e){this.getPageByNumber(e.pageNumber);this.pagesReady()}}]),i}(o.a)},function(e,t){!function(){var e,t,i=i||(e=[],{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)},update:function(t){if(0===e.length)return!1;var i=0;for(t=null!=t?t:window.performance.now();i<e.length;)e[i].update(t)?i++:e.splice(i,1);return!0}});i.Tween=function(e){var t=e,n={},o={},a={},r=1e3,s=0,l=!1,u=!1,h=!1,c=0,p=null,d=i.Easing.Linear.None,f=i.Interpolation.Linear,g=[],v=null,m=!1,y=null,b=null,w=null;for(var S in e)n[S]=parseFloat(e[S],10);this.to=function(e,t){return null!=t&&(r=t),o=e,this},this.start=function(e){for(var r in i.add(this),u=!0,m=!1,p=null!=e?e:window.performance.now(),p+=c,o){if(o[r]instanceof Array){if(0===o[r].length)continue;o[r]=[t[r]].concat(o[r])}null!=n[r]&&(n[r]=t[r],n[r]instanceof Array==!1&&(n[r]*=1),a[r]=n[r]||0)}return this},this.stop=function(){return u?(i.remove(this),u=!1,null!=w&&w.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=g.length;e<t;e++)g[e].stop()},this.complete=function(){return u?(i.remove(this),u=!1,null!=b&&b.call(t),this.completeChainedTweens(),this):this},this.completeChainedTweens=function(){for(var e=0,t=g.length;e<t;e++)g[e].complete()},this.delay=function(e){return c=e,this},this.repeat=function(e){return s=e,this},this.yoyo=function(e){return l=e,this},this.easing=function(e){return d=null==e?d:e,this},this.interpolation=function(e){return f=e,this},this.chain=function(){return g=arguments,this},this.onStart=function(e){return v=e,this},this.onUpdate=function(e){return y=e,this},this.onComplete=function(e){return b=e,this},this.onStop=function(e){return w=e,this},this.update=function(e){var i,u,w;if(e<p)return!0;for(i in!1===m&&(null!=v&&v.call(t),m=!0),w=d(u=(u=(e-p)/r)>1?1:u),o)if(null!=n[i]){var S=n[i]||0,P=o[i];P instanceof Array?t[i]=f(P,w):("string"==typeof P&&(P=P.startsWith("+")||P.startsWith("-")?S+parseFloat(P,10):parseFloat(P,10)),"number"==typeof P&&(t[i]=S+(P-S)*w))}if(null!=y&&y.call(t,w),1===u){if(s>0){for(i in isFinite(s)&&s--,a){if("string"==typeof o[i]&&(a[i]=a[i]+parseFloat(o[i],10)),l){var C=a[i];a[i]=o[i],o[i]=C}n[i]=a[i]}return l&&(h=!h),p=e+c,!0}null!=b&&b.call(t);for(var x=0,T=g.length;x<T;x++)g[x].start(p+r);return!1}return!0}},i.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}},i.Interpolation={Linear:function(e,t){var n=e.length-1,o=n*t,a=Math.floor(o),r=i.Interpolation.Utils.Linear;return t<0?r(e[0],e[1],o):t>1?r(e[n],e[n-1],n-o):r(e[a],e[a+1>n?n:a+1],o-a)},Bezier:function(e,t){for(var n=0,o=e.length-1,a=Math.pow,r=i.Interpolation.Utils.Bernstein,s=0;s<=o;s++)n+=a(1-t,o-s)*a(t,s)*e[s]*r(o,s);return n},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var n=i.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(t=[1],function(e){var i=1;if(t[e])return t[e];for(var n=e;n>1;n--)i*=n;return t[e]=i,i}),CatmullRom:function(e,t,i,n,o){var a=.5*(i-e),r=.5*(n-t),s=o*o;return(2*t-2*i+a+r)*(o*s)+(-3*t+3*i-2*a-r)*s+a*o+t}}},window.TWEEN=i}()},function(e,t,i){"use strict";var n=i(0),o=i(3),a=i(5),r=i(8);r.a.prototype.executeCallback=function(e){"function"==typeof this.options[e]&&this.options[e](this)},r.a.prototype.analytics=function(e){if(1==this.options.enableAnalytics)try{var t=e.options,i=void 0;t&&(i=t.bookTitle||t.slug||t.id);var n=window.gtag;if(n)n("event",e.eventAction,{event_category:t.analyticsEventCategory,event_label:i});else(window.ga||window.__gaTracker)("send",{hitType:"event",eventCategory:t.analyticsEventCategory,eventAction:e.eventAction,eventLabel:i})}catch(e){}},n.a.executeCallback=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;"function"==typeof t[e]&&t[e]()},n.a.openAttachmentLightBoxes=function(){var e=jQuery("body.attachment-pdf [apl], body.attachment-pdf [attachment_pdf_lightbox]");e.length>0&&jQuery(e[0]).trigger("click"),jQuery(window).on("hashchange",(function(e){var t=location.hash;t&&t.length>5&&(n.a.hashFocusBookFound=!1,o.a.detectHash())}))},a.a.prototype.processCustomLinks=function(e,t){var i=this,n=this.app;if(!1!==n.options.enableAnnotation&&i._isValidPage(e)&&null!=t){var o=n.viewer.getDocumentPageNumber(e),a=n.options.links;if(null!=a&&null!=a[o])for(var r=a[o],s=0;s<r.length;s++){var l=r[s],u=void 0;l.dest&&l.dest.indexOf&&0==l.dest.indexOf("[html]")?((u=document.createElement("div")).innerHTML=l.dest.substr(6),u.className="customHtmlAnnotation"):((u=document.createElement("a")).setAttribute("dest",l.dest),u.className="customLinkAnnotation",u.href="#"+l.dest,u.onclick=function(){var e=this.getAttribute("dest");return e&&i.linkService.customNavigateTo(e),!1}),u.style.left=l.x+"%",u.style.top=l.y+"%",u.style.width=l.w+"%",u.style.height=l.h+"%",t.appendChild(u)}n.viewer.finalizeAnnotations(t,e)}},a.b.prototype.processTextContent=function(e,t){},a.b.prototype.processAnnotations=function(e,t){var i=this,n=this.app;if(!1!==n.options.enableAnnotation&&i._isValidPage(e)&&null!=t){var o=n.viewer.getDocumentPageNumber(e);i.pdfDocument.getPage(o).then((function(o){var a=o.getViewport({scale:1,rotation:o._pageInfo.rotate+n.options.pageRotation});a=o.getViewport({scale:n.viewer.getTextureSize({pageNumber:e,isAnnotation:!0}).height/(a.height*window.devicePixelRatio),rotation:o._pageInfo.rotate+n.options.pageRotation}),o.getAnnotations().then((function(r){if(null!==n.options&&null!==n.viewer){a=a.clone({dontFlip:!0});var s={annotations:r,div:t,page:o,viewport:a,imageResourcesPath:n.options.imageResourcesPath,linkService:i.linkService};pdfjsLib.AnnotationLayer.render(s),n.options.annotationClass&&""!==n.options.annotationClass&&jQuery(t).find(" > section").addClass(n.options.annotationClass),i.processCustomLinks(e,t),n.viewer.finalizeAnnotations(t,e)}}))}))}},n.a.getPDFThumb=function(e){var t={};t.url=o.a.httpsCorrection(e.pdfURL),t.rangeChunkSize=524288,t.cMapPacked=!0,t.disableAutoFetch=!0,t.disableStream=!0,t.disableFontFace=n.a.defaults.disableFontFace,t.cMapUrl=n.a.defaults.cMapUrl,t.imagesLocation=n.a.defaults.imagesLocation,t.imageResourcesPath=n.a.defaults.imageResourcesPath;var i=pdfjsLib.getDocument(t),a=i.promise.then((function(t){t.getPage(1).then((function(t){var n=1,o=document.createElement("canvas"),r=t.getViewport({scale:n});n=r.width>r.height?400*n/r.width:400*n/r.height,r=t.getViewport({scale:n}),o.height=Math.floor(r.height),o.width=Math.floor(r.width),t.render({canvas:o,canvasContext:o.getContext("2d"),viewport:r}).promise.then((function(){var t,n=o.toDataURL("image/jpeg",.9);null===(t=e.callback)||void 0===t||t.call(e,n),a.destroy&&a.destroy(),i.destroy&&i.destroy(),a=null,i=null}))}))}));i.onProgress=function(t){var i=100*t.loaded/t.total;isNaN(i)?t&&t.loaded?e.updateInfo("Loading PDF "+(Math.ceil(t.loaded/1e4)/100).toFixed(2).toString()+"MB ..."):e.updateInfo("Loading PDF ..."):e.updateInfo("Loading PDF "+Math.ceil(i).toString().split(".")[0]+"% ...")}}},function(e,t,i){"use strict";var n=i(0),o=i(2),a=i(9);i(1);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var o=h(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return u(this,i)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}n.a.utils;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e);l(t);function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(undefined)}return t}(o.a),p=i(10),d=i(7);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==f(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===f(a)?a:String(a)),n)}var o,a}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},m.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=w(e);if(t){var o=w(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var S=n.a.utils;o.a.prototype.pinchDown=function(e){null!=e.touches&&2==e.touches.length&&null==this.startTouches&&(this.startTouches=S.getTouches(e),this.app.viewer.zoomCenter=S.getVectorAvg(S.getTouches(e,this.parentElement.offset())),this.lastScale=1)},o.a.prototype.pinchUp=function(e){null!=e.touches&&e.touches.length<2&&1==this.pinchZoomDirty&&(this.app.viewer.lastScale=this.lastScale,this.app.container.removeClass("df-pinch-zoom"),this.updateTemporaryScale(!0),this.app.zoom(),this.lastScale=null,this.app.viewer.canSwipe=!1,this.pinchZoomDirty=!1,this.app.viewer._pinchZoomLastScale=null,this.startTouches=null)},o.a.prototype.pinchMove=function(e){if(null!=e.touches&&2==e.touches.length&&null!=this.startTouches){this.pinchZoomDirty=!0,this.app.container.addClass("df-pinch-zoom");var t=S.calculateScale(this.startTouches,S.getTouches(e));this.lastScale;return this.lastScale=t,this.app.viewer.pinchZoomUpdateScale=S.limitAt(t,this.app.viewer.minZoom/this.app.zoomValue,this.app.viewer.maxZoom/this.app.zoomValue),this.app.viewer._pinchZoomLastScale!=this.app.viewer.pinchZoomUpdateScale&&(this.app.viewer.pinchZoomRequestStatus=n.a.REQUEST_STATUS.ON,this.app.viewer._pinchZoomLastScale=this.app.viewer.pinchZoomUpdateScale),void e.preventDefault()}};var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,i,n,o=b(a);function a(e,t){return g(this,a),o.call(this,e,t)}return t=a,i=[{key:"init",value:function(){m(w(a.prototype),"init",this).call(this),this.texturePowerOfTwo=!1,this.app.container.addClass("df-hybrid-viewer df-pending")}},{key:"resize",value:function(){void 0===this.zoomViewer.rightSheetHeight&&(this.zoomViewer.rightSheetHeight=this._containCover.height,this.zoomViewer.leftSheetHeight=this._containCover.height,this.zoomViewer.leftSheetWidth=this._containCover.width,this.zoomViewer.rightSheetWidth=this._containCover.width),m(w(a.prototype),"resize",this).call(this),this.stage.orbitControl.mouseButtons.ORBIT=-1}},{key:"getAnnotationElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomViewer.getAnnotationElement(e,t)}},{key:"getTextElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomViewer.getTextElement(e,t)}},{key:"isAnimating",value:function(){return this.isFlipping()}},{key:"onCenterStartAnimation",value:function(e){this.app.container.addClass("df-hide-zoomview")}},{key:"onCenterStopAnimation",value:function(e){this.finalizeCenterAnimation()}},{key:"onCenterCompleteAnimation",value:function(e){this.zoomViewer.updateCenter(),this.finalizeCenterAnimation()}},{key:"finalizeCenterAnimation",value:function(){this.app.container.removeClass("df-hide-zoomview")}},{key:"afterFlip",value:function(){!0!==this.isAnimating()&&(this.pagesReady(),this.updatePendingStatusClass(),this.updateZoomViewerTexture({pageNumber:this.getBasePage()}),this.updateZoomViewerTexture({pageNumber:this.getBasePage()+1}))}},{key:"exchangeTexture",value:function(e,t){this.skipCenterAnimation=!0,m(w(a.prototype),"exchangeTexture",this).call(this,e,t),this.updateZoomViewerTextContent({pageNumber:this.getBasePage()}),this.updateZoomViewerTextContent({pageNumber:this.getBasePage()+1})}},{key:"updateZoomViewerTexture",value:function(e){var t=this.zoomViewer.getPageByNumber(e.pageNumber);t&&"-1"===t.textureStamp&&this.zoomViewer.setPage({pageNumber:t.pageNumber,texture:this.getPageByNumber(t.pageNumber).getTexture()})&&this.updateZoomViewerTextContent(e)}},{key:"updateZoomViewerTextContent",value:function(e){this.app.provider.processAnnotations(e.pageNumber,this.app.viewer.getAnnotationElement(e.pageNumber,!0)),this.app.provider.processTextContent(e.pageNumber,this.app.viewer.getTextElement(e.pageNumber,!0))}},{key:"textureLoadedCallback",value:function(e){this.app.renderRequestStart(),this.updateZoomViewerTexture(e),this.pagesReady()}}],i&&v(t.prototype,i),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d.a);n.a.viewers=n.a.viewers||{},n.a.viewers.flipbook=function e(t,i){return g(this,e),0==n.a.utils.canSupport3D()&&(t.is3D=!1),!0===t.is3D?!0===t.flat3D?(t.flexibility=0,new P(t,i)):new d.a(t,i):new p.a(t,i)},n.a.viewers.default=n.a.viewers.reader=a.a,n.a.viewers.slider=c},function(e,t,i){"use strict";i.r(t);var n=i(0),o=i(3),a=(i(13),i(5),i(12),window.DEARPDF=n.a);a.defaults.viewerType="reader",a.slug="dearpdf",a.locationVar="dearPdfLocation",a.locationFile="dearpdf-pro",window.dearPDFOpenFileOptions=n.a.openFileOptions,jQuery(document).ready((function(){var e=jQuery("body");a.executeCallback("onBeforeDearPDFInit"),void 0!==window.dearpdfWPGlobal&&jQuery.extend(!0,n.a.defaults,window.dearpdfWPGlobal),a.initUtils(),a.initControls(),jQuery(".df-element").addClass("dp-element"),jQuery(".df-posts").addClass("dearpdf-posts"),e.on("click",".df-element[data-lightbox]",(function(e){e.preventDefault(),a.openLightBox(jQuery(this))})),a.checkBrowserURLforDefaults(),a.parseCSSElements(),o.a.detectHash(),a.parseNormalElements(),a.checkBrowserURLforPDF(!0),a.openAttachmentLightBoxes(),a.executeCallback("onDearPDFInit")})),a.executeCallback("onDearPDFLoad"),t.default=a}]);